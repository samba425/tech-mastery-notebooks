{"id":"part2-backend","title":"üîß Part 2: Backend Development (Hours 11-20)","content":"# Part 2: Backend Development with Python\n## Hours 11-20 (Databases & Web APIs)\n\n**Duration:** 10 hours total  \n**Target:** Students who completed Python fundamentals  \n**Format:** 1 hour per session  \n**Style:** Read and teach directly, copy-paste examples\n\n---\n\n## üìö TABLE OF CONTENTS\n\n- [Hour 11: OOP Fundamentals](#hour-11)\n- [Hour 12: Advanced OOP](#hour-12)\n- [Hour 13: Virtual Environments & Dependencies](#hour-13)\n- [Hour 14: SQL & Relational Databases](#hour-14)\n- [Hour 15: ORMs (SQLAlchemy/Django ORM)](#hour-15)\n- [Hour 16: NoSQL Basics (MongoDB)](#hour-16)\n- [Hour 17: RESTful API Concepts](#hour-17)\n- [Hour 18: Flask Part 1 (Basics)](#hour-18)\n- [Hour 19: Flask Part 2 (Advanced)](#hour-19)\n- [Hour 20: Authentication & Authorization](#hour-20)\n\n---\n\n<a name=\"hour-11\"></a>\n## üìÖ Hour 11: OOP Fundamentals\n\n### üéØ Learning Objectives\n- Understand classes and objects\n- Create `__init__` constructor\n- Differentiate class vs instance variables\n- Build User and Post classes for a blog\n\n### üìñ What to Teach\n\n**\"Today we learn Object-Oriented Programming (OOP) - think of it as creating blueprints for objects, like a car factory!\"**\n\n---\n\n### 1Ô∏è‚É£ What is OOP? (10 minutes)\n\n**Real-Life Analogy:**\n\n```\nCar Factory:\n‚îú‚îÄ‚îÄ Blueprint (Class) ‚Üí Design of a car\n‚îî‚îÄ‚îÄ Actual Cars (Objects) ‚Üí Individual cars made from blueprint\n\nEach car has:\n- Properties: color, brand, price (Attributes)\n- Actions: start(), drive(), stop() (Methods)\n```\n\n**In Python Terms:**\n\n```python\n# Class = Blueprint\nclass Car:\n    pass\n\n# Objects = Individual cars\ncar1 = Car()  # First car\ncar2 = Car()  # Second car\ncar3 = Car()  # Third car\n```\n\n---\n\n### 2Ô∏è‚É£ Creating a Simple Class (10 minutes)\n\n**Basic Class Structure:**\n\n```python\n# Define a class (blueprint for a user)\nclass User:\n    # Attributes (properties)\n    def __init__(self, name, email, age):\n        self.name = name\n        self.email = email\n        self.age = age\n    \n    # Methods (actions)\n    def display_info(self):\n        print(f\"Name: {self.name}\")\n        print(f\"Email: {self.email}\")\n        print(f\"Age: {self.age}\")\n    \n    def greet(self):\n        print(f\"Hello, I'm {self.name}!\")\n\n# Create objects (individual users)\nuser1 = User(\"Alice\", \"alice@email.com\", 25)\nuser2 = User(\"Bob\", \"bob@email.com\", 30)\n\n# Use methods\nuser1.display_info()\nuser1.greet()\n```\n\n**Output:**\n```\nName: Alice\nEmail: alice@email.com\nAge: 25\nHello, I'm Alice!\n```\n\n---\n\n### 3Ô∏è‚É£ Understanding __init__ (Constructor) (10 minutes)\n\n**Explain to Students:**\n\n\"`__init__` is a special method that automatically runs when you create an object. Like a setup function!\"\n\n```python\nclass BankAccount:\n    def __init__(self, account_holder, initial_balance):\n        # self = this specific account\n        self.account_holder = account_holder\n        self.balance = initial_balance\n        print(f\"Account created for {account_holder}\")\n    \n    def deposit(self, amount):\n        self.balance += amount\n        print(f\"Deposited ‚Çπ{amount}. New balance: ‚Çπ{self.balance}\")\n    \n    def withdraw(self, amount):\n        if amount <= self.balance:\n            self.balance -= amount\n            print(f\"Withdrawn ‚Çπ{amount}. New balance: ‚Çπ{self.balance}\")\n        else:\n            print(\"Insufficient funds!\")\n    \n    def check_balance(self):\n        print(f\"Current balance: ‚Çπ{self.balance}\")\n\n# __init__ is called automatically\naccount1 = BankAccount(\"Alice\", 5000)  # Account created for Alice\naccount2 = BankAccount(\"Bob\", 10000)   # Account created for Bob\n\n# Use methods\naccount1.deposit(2000)\naccount1.withdraw(1000)\naccount1.check_balance()\n```\n\n---\n\n### 4Ô∏è‚É£ Class Variables vs Instance Variables (10 minutes)\n\n**Explain the Difference:**\n\n```python\nclass Employee:\n    # CLASS VARIABLE (shared by all employees)\n    company_name = \"Tech Corp\"\n    total_employees = 0\n    \n    def __init__(self, name, salary):\n        # INSTANCE VARIABLES (unique to each employee)\n        self.name = name\n        self.salary = salary\n        Employee.total_employees += 1  # Increment class variable\n    \n    def display_info(self):\n        print(f\"Name: {self.name}\")\n        print(f\"Salary: ‚Çπ{self.salary}\")\n        print(f\"Company: {Employee.company_name}\")\n\n# Create employees\nemp1 = Employee(\"Alice\", 50000)\nemp2 = Employee(\"Bob\", 60000)\nemp3 = Employee(\"Charlie\", 70000)\n\n# Class variable is shared\nprint(f\"Total employees: {Employee.total_employees}\")  # 3\nprint(f\"Company: {Employee.company_name}\")  # Tech Corp\n\n# Instance variables are unique\nprint(f\"Employee 1 salary: ‚Çπ{emp1.salary}\")  # 50000\nprint(f\"Employee 2 salary: ‚Çπ{emp2.salary}\")  # 60000\n```\n\n**Visual Diagram:**\n\n```\nEmployee Class\n‚îú‚îÄ‚îÄ company_name = \"Tech Corp\"  (SHARED by all)\n‚îú‚îÄ‚îÄ total_employees = 3          (SHARED by all)\n‚îÇ\n‚îú‚îÄ‚îÄ emp1:\n‚îÇ   ‚îú‚îÄ‚îÄ name = \"Alice\"           (UNIQUE)\n‚îÇ   ‚îî‚îÄ‚îÄ salary = 50000           (UNIQUE)\n‚îÇ\n‚îú‚îÄ‚îÄ emp2:\n‚îÇ   ‚îú‚îÄ‚îÄ name = \"Bob\"             (UNIQUE)\n‚îÇ   ‚îî‚îÄ‚îÄ salary = 60000           (UNIQUE)\n‚îÇ\n‚îî‚îÄ‚îÄ emp3:\n    ‚îú‚îÄ‚îÄ name = \"Charlie\"         (UNIQUE)\n    ‚îî‚îÄ‚îÄ salary = 70000           (UNIQUE)\n```\n\n---\n\n### 5Ô∏è‚É£ Methods (Instance Methods) (10 minutes)\n\n**Different Types of Methods:**\n\n```python\nclass Calculator:\n    def __init__(self, name):\n        self.name = name\n        self.history = []\n    \n    # Instance method (uses self)\n    def add(self, a, b):\n        result = a + b\n        self.history.append(f\"{a} + {b} = {result}\")\n        return result\n    \n    def multiply(self, a, b):\n        result = a * b\n        self.history.append(f\"{a} √ó {b} = {result}\")\n        return result\n    \n    def show_history(self):\n        print(f\"\\n{self.name}'s Calculation History:\")\n        for calculation in self.history:\n            print(f\"  - {calculation}\")\n\n# Create calculator objects\ncalc1 = Calculator(\"Alice's Calculator\")\ncalc2 = Calculator(\"Bob's Calculator\")\n\n# Use methods\ncalc1.add(10, 5)\ncalc1.multiply(4, 3)\ncalc1.show_history()\n\ncalc2.add(100, 200)\ncalc2.show_history()\n```\n\n**Output:**\n```\nAlice's Calculator's Calculation History:\n  - 10 + 5 = 15\n  - 4 √ó 3 = 12\n\nBob's Calculator's Calculation History:\n  - 100 + 200 = 300\n```\n\n---\n\n### üíª Live Activity: Blog System (User & Post Classes)\n\n**Copy-Paste for Students:**\n\n```python\n# activity11_blog_system.py\n\nclass User:\n    \"\"\"Represents a blog user\"\"\"\n    \n    def __init__(self, username, email, bio):\n        self.username = username\n        self.email = email\n        self.bio = bio\n        self.posts = []  # List to store user's posts\n    \n    def create_post(self, title, content):\n        \"\"\"Create a new blog post\"\"\"\n        post = Post(title, content, self.username)\n        self.posts.append(post)\n        print(f\"‚úÖ Post '{title}' created successfully!\")\n        return post\n    \n    def display_profile(self):\n        \"\"\"Display user profile\"\"\"\n        print(\"\\n\" + \"=\" * 50)\n        print(f\"üë§ User Profile\")\n        print(\"=\" * 50)\n        print(f\"Username: {self.username}\")\n        print(f\"Email: {self.email}\")\n        print(f\"Bio: {self.bio}\")\n        print(f\"Total Posts: {len(self.posts)}\")\n        print(\"=\" * 50)\n    \n    def show_all_posts(self):\n        \"\"\"Display all posts by this user\"\"\"\n        print(f\"\\nüìù Posts by {self.username}:\")\n        print(\"-\" * 50)\n        if self.posts:\n            for i, post in enumerate(self.posts, 1):\n                print(f\"\\n{i}. {post.title}\")\n                print(f\"   {post.content[:50]}...\")\n        else:\n            print(\"No posts yet.\")\n\n\nclass Post:\n    \"\"\"Represents a blog post\"\"\"\n    \n    post_count = 0  # Class variable to track total posts\n    \n    def __init__(self, title, content, author):\n        self.title = title\n        self.content = content\n        self.author = author\n        self.likes = 0\n        self.comments = []\n        Post.post_count += 1\n        self.post_id = Post.post_count\n    \n    def like(self):\n        \"\"\"Like the post\"\"\"\n        self.likes += 1\n        print(f\"‚ù§Ô∏è Post liked! Total likes: {self.likes}\")\n    \n    def add_comment(self, username, comment_text):\n        \"\"\"Add a comment to the post\"\"\"\n        comment = {\n            \"username\": username,\n            \"text\": comment_text\n        }\n        self.comments.append(comment)\n        print(f\"üí¨ Comment added by {username}\")\n    \n    def display_post(self):\n        \"\"\"Display post details\"\"\"\n        print(\"\\n\" + \"=\" * 50)\n        print(f\"üìÑ Post #{self.post_id}\")\n        print(\"=\" * 50)\n        print(f\"Title: {self.title}\")\n        print(f\"Author: {self.author}\")\n        print(f\"\\n{self.content}\\n\")\n        print(f\"‚ù§Ô∏è Likes: {self.likes}\")\n        print(f\"üí¨ Comments: {len(self.comments)}\")\n        \n        if self.comments:\n            print(\"\\nComments:\")\n            for comment in self.comments:\n                print(f\"  - {comment['username']}: {comment['text']}\")\n        print(\"=\" * 50)\n\n\n# === DEMO THE SYSTEM ===\n\n# Create users\nuser1 = User(\"alice_dev\", \"alice@email.com\", \"Python developer üêç\")\nuser2 = User(\"bob_tech\", \"bob@email.com\", \"Full-stack engineer üíª\")\n\n# Show profiles\nuser1.display_profile()\nuser2.display_profile()\n\n# Create posts\npost1 = user1.create_post(\n    \"Getting Started with Python\",\n    \"Python is an amazing language for beginners. In this post, I'll show you how to get started with Python programming...\"\n)\n\npost2 = user1.create_post(\n    \"10 Python Tips\",\n    \"Here are my top 10 Python tips that will make you a better programmer...\"\n)\n\npost3 = user2.create_post(\n    \"Building REST APIs with Flask\",\n    \"Flask is a lightweight web framework for Python. Let's build a simple REST API...\"\n)\n\n# Interact with posts\npost1.display_post()\npost1.like()\npost1.like()\npost1.add_comment(\"bob_tech\", \"Great post! Very helpful!\")\npost1.add_comment(\"charlie\", \"Thanks for sharing!\")\npost1.display_post()\n\n# Show all posts by user\nuser1.show_all_posts()\n\n# Show statistics\nprint(f\"\\nüìä Blog Statistics:\")\nprint(f\"Total Posts: {Post.post_count}\")\nprint(f\"Total Users: 2\")\n```\n\n**Run this and show output to students!**\n\n---\n\n### üè† Homework: Add Serialization to Models\n\n**Task:** Add methods to convert objects to dictionaries/JSON\n\n```python\n# homework11_serialization.py\n\nimport json\n\nclass User:\n    def __init__(self, username, email, bio):\n        self.username = username\n        self.email = email\n        self.bio = bio\n        self.posts = []\n    \n    # TODO: Add this method\n    def to_dict(self):\n        \"\"\"Convert user object to dictionary\"\"\"\n        return {\n            \"username\": self.username,\n            \"email\": self.email,\n            \"bio\": self.bio,\n            \"post_count\": len(self.posts)\n        }\n    \n    # TODO: Add this method\n    def to_json(self):\n        \"\"\"Convert user object to JSON string\"\"\"\n        return json.dumps(self.to_dict(), indent=2)\n\n\nclass Post:\n    def __init__(self, title, content, author):\n        self.title = title\n        self.content = content\n        self.author = author\n        self.likes = 0\n    \n    # TODO: Add this method\n    def to_dict(self):\n        \"\"\"Convert post object to dictionary\"\"\"\n        return {\n            \"title\": self.title,\n            \"content\": self.content,\n            \"author\": self.author,\n            \"likes\": self.likes\n        }\n    \n    # TODO: Add this method\n    def to_json(self):\n        \"\"\"Convert post object to JSON string\"\"\"\n        return json.dumps(self.to_dict(), indent=2)\n\n\n# Test the serialization\nuser = User(\"alice\", \"alice@email.com\", \"Developer\")\npost = Post(\"Python Tips\", \"Here are some tips...\", \"alice\")\n\nprint(\"User as dict:\", user.to_dict())\nprint(\"\\nUser as JSON:\")\nprint(user.to_json())\n\nprint(\"\\nPost as dict:\", post.to_dict())\nprint(\"\\nPost as JSON:\")\nprint(post.to_json())\n```\n\n**Expected Output:**\n```json\nUser as JSON:\n{\n  \"username\": \"alice\",\n  \"email\": \"alice@email.com\",\n  \"bio\": \"Developer\",\n  \"post_count\": 0\n}\n\nPost as JSON:\n{\n  \"title\": \"Python Tips\",\n  \"content\": \"Here are some tips...\",\n  \"author\": \"alice\",\n  \"likes\": 0\n}\n```\n\n---\n\n### üìù Key Takeaways\n\n‚úÖ Class = Blueprint, Object = Instance\n‚úÖ `__init__` = Constructor (auto-runs)\n‚úÖ `self` = refers to current instance\n‚úÖ Instance variables = unique to each object\n‚úÖ Class variables = shared by all objects\n‚úÖ Methods = functions inside classes\n\n---\n\n<a name=\"hour-14\"></a>\n## üìÖ Hour 14: SQL & Relational Databases\n\n### üéØ Learning Objectives\n- Understand relational databases\n- Learn SQL CRUD operations\n- Work with SQLite\n- Create tables, insert/query data\n- Design schema for a blog\n\n### üìñ What to Teach\n\n**\"Today we learn databases - think of it as an Excel spreadsheet on steroids!\"**\n\n---\n\n### 1Ô∏è‚É£ What is a Database? (10 minutes)\n\n**Real-Life Analogy:**\n\n```\nFiling Cabinet (Database)\n‚îú‚îÄ‚îÄ Drawer 1: Customers (Table)\n‚îÇ   ‚îú‚îÄ‚îÄ John, john@email.com, 25\n‚îÇ   ‚îú‚îÄ‚îÄ Alice, alice@email.com, 30\n‚îÇ   ‚îî‚îÄ‚îÄ Bob, bob@email.com, 28\n‚îÇ\n‚îî‚îÄ‚îÄ Drawer 2: Orders (Table)\n    ‚îú‚îÄ‚îÄ Order #1, John, ‚Çπ500\n    ‚îú‚îÄ‚îÄ Order #2, Alice, ‚Çπ1000\n    ‚îî‚îÄ‚îÄ Order #3, Bob, ‚Çπ750\n```\n\n**Relational Database Concepts:**\n\n```\nDatabase: blog_db\n‚îú‚îÄ‚îÄ Table: users\n‚îÇ   ‚îú‚îÄ‚îÄ Columns: id, username, email, created_at\n‚îÇ   ‚îî‚îÄ‚îÄ Rows: Individual users\n‚îÇ\n‚îî‚îÄ‚îÄ Table: posts\n    ‚îú‚îÄ‚îÄ Columns: id, title, content, author_id, created_at\n    ‚îî‚îÄ‚îÄ Rows: Individual posts\n```\n\n**Why Use Databases?**\n- Store large amounts of data\n- Fast searching\n- Data relationships\n- Data integrity\n- Concurrent access\n- Backup and recovery\n\n---\n\n### 2Ô∏è‚É£ SQL Basics (10 minutes)\n\n**SQL = Structured Query Language**\n\n\"SQL is the language we use to talk to databases!\"\n\n**4 Main Operations (CRUD):**\n\n```sql\nCREATE (INSERT) - Add new data\nREAD (SELECT)   - Get data\nUPDATE          - Modify data\nDELETE          - Remove data\n```\n\n**Basic SQL Syntax:**\n\n```sql\n-- Create table\nCREATE TABLE users (\n    id INTEGER PRIMARY KEY,\n    username TEXT,\n    email TEXT\n);\n\n-- Insert data (CREATE)\nINSERT INTO users (username, email) \nVALUES ('alice', 'alice@email.com');\n\n-- Read data (READ)\nSELECT * FROM users;\n\n-- Update data (UPDATE)\nUPDATE users \nSET email = 'newemail@email.com' \nWHERE username = 'alice';\n\n-- Delete data (DELETE)\nDELETE FROM users \nWHERE username = 'alice';\n```\n\n---\n\n### 3Ô∏è‚É£ Working with SQLite in Python (15 minutes)\n\n**SQLite Setup:**\n\n\"SQLite is built into Python - no installation needed! It's like a mini-database in a file.\"\n\n```python\nimport sqlite3\n\n# Connect to database (creates file if doesn't exist)\nconn = sqlite3.connect('blog.db')\n\n# Create cursor (like a pointer)\ncursor = conn.cursor()\n\n# Execute SQL\ncursor.execute('''\n    CREATE TABLE users (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        username TEXT NOT NULL,\n        email TEXT UNIQUE NOT NULL,\n        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n    )\n''')\n\n# Save changes\nconn.commit()\n\n# Close connection\nconn.close()\n```\n\n---\n\n### 4Ô∏è‚É£ CRUD Operations in Python (15 minutes)\n\n**Complete Example:**\n\n```python\n# crud_demo.py\n\nimport sqlite3\n\nclass Database:\n    def __init__(self, db_name='blog.db'):\n        self.conn = sqlite3.connect(db_name)\n        self.cursor = self.conn.cursor()\n        self.create_tables()\n    \n    def create_tables(self):\n        \"\"\"Create tables if they don't exist\"\"\"\n        # Users table\n        self.cursor.execute('''\n            CREATE TABLE IF NOT EXISTS users (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                username TEXT NOT NULL UNIQUE,\n                email TEXT NOT NULL UNIQUE,\n                bio TEXT,\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n            )\n        ''')\n        \n        # Posts table\n        self.cursor.execute('''\n            CREATE TABLE IF NOT EXISTS posts (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                title TEXT NOT NULL,\n                content TEXT NOT NULL,\n                author_id INTEGER NOT NULL,\n                likes INTEGER DEFAULT 0,\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n                FOREIGN KEY (author_id) REFERENCES users (id)\n            )\n        ''')\n        \n        self.conn.commit()\n        print(\"‚úÖ Tables created successfully!\")\n    \n    # ========== CREATE ==========\n    def create_user(self, username, email, bio=''):\n        \"\"\"Insert new user\"\"\"\n        try:\n            self.cursor.execute('''\n                INSERT INTO users (username, email, bio)\n                VALUES (?, ?, ?)\n            ''', (username, email, bio))\n            self.conn.commit()\n            print(f\"‚úÖ User '{username}' created!\")\n            return self.cursor.lastrowid\n        except sqlite3.IntegrityError:\n            print(f\"‚ùå User '{username}' already exists!\")\n            return None\n    \n    def create_post(self, title, content, author_id):\n        \"\"\"Insert new post\"\"\"\n        self.cursor.execute('''\n            INSERT INTO posts (title, content, author_id)\n            VALUES (?, ?, ?)\n        ''', (title, content, author_id))\n        self.conn.commit()\n        print(f\"‚úÖ Post '{title}' created!\")\n        return self.cursor.lastrowid\n    \n    # ========== READ ==========\n    def get_all_users(self):\n        \"\"\"Get all users\"\"\"\n        self.cursor.execute('SELECT * FROM users')\n        return self.cursor.fetchall()\n    \n    def get_user_by_username(self, username):\n        \"\"\"Get user by username\"\"\"\n        self.cursor.execute('''\n            SELECT * FROM users WHERE username = ?\n        ''', (username,))\n        return self.cursor.fetchone()\n    \n    def get_posts_by_author(self, author_id):\n        \"\"\"Get all posts by an author\"\"\"\n        self.cursor.execute('''\n            SELECT * FROM posts WHERE author_id = ?\n        ''', (author_id,))\n        return self.cursor.fetchall()\n    \n    # ========== UPDATE ==========\n    def update_user_bio(self, username, new_bio):\n        \"\"\"Update user's bio\"\"\"\n        self.cursor.execute('''\n            UPDATE users SET bio = ? WHERE username = ?\n        ''', (new_bio, username))\n        self.conn.commit()\n        print(f\"‚úÖ Updated bio for '{username}'\")\n    \n    def like_post(self, post_id):\n        \"\"\"Increment post likes\"\"\"\n        self.cursor.execute('''\n            UPDATE posts SET likes = likes + 1 WHERE id = ?\n        ''', (post_id,))\n        self.conn.commit()\n        print(f\"‚ù§Ô∏è Post #{post_id} liked!\")\n    \n    # ========== DELETE ==========\n    def delete_user(self, username):\n        \"\"\"Delete user\"\"\"\n        self.cursor.execute('''\n            DELETE FROM users WHERE username = ?\n        ''', (username,))\n        self.conn.commit()\n        print(f\"üóëÔ∏è User '{username}' deleted!\")\n    \n    def delete_post(self, post_id):\n        \"\"\"Delete post\"\"\"\n        self.cursor.execute('''\n            DELETE FROM posts WHERE id = ?\n        ''', (post_id,))\n        self.conn.commit()\n        print(f\"üóëÔ∏è Post #{post_id} deleted!\")\n    \n    def close(self):\n        \"\"\"Close database connection\"\"\"\n        self.conn.close()\n\n\n# ========== DEMO ==========\n\ndef demo():\n    db = Database()\n    \n    # CREATE users\n    user1_id = db.create_user('alice', 'alice@email.com', 'Python developer')\n    user2_id = db.create_user('bob', 'bob@email.com', 'Full-stack engineer')\n    \n    # CREATE posts\n    db.create_post('Python Basics', 'Learn Python...', user1_id)\n    db.create_post('Web Development', 'Build websites...', user1_id)\n    db.create_post('Flask Tutorial', 'Getting started...', user2_id)\n    \n    # READ all users\n    print(\"\\nüìã All Users:\")\n    users = db.get_all_users()\n    for user in users:\n        print(f\"  ID: {user[0]}, Username: {user[1]}, Email: {user[2]}\")\n    \n    # READ specific user\n    print(\"\\nüë§ User Details:\")\n    alice = db.get_user_by_username('alice')\n    print(f\"  {alice}\")\n    \n    # READ posts by author\n    print(\"\\nüìù Alice's Posts:\")\n    posts = db.get_posts_by_author(user1_id)\n    for post in posts:\n        print(f\"  ID: {post[0]}, Title: {post[1]}, Likes: {post[4]}\")\n    \n    # UPDATE\n    db.update_user_bio('alice', 'Senior Python Developer üêç')\n    \n    # LIKE posts\n    db.like_post(1)\n    db.like_post(1)\n    db.like_post(1)\n    \n    db.close()\n\n\nif __name__ == '__main__':\n    demo()\n```\n\n---\n\n### 5Ô∏è‚É£ SQL Joins (10 minutes)\n\n**Explain Joins:**\n\n\"Joins combine data from multiple tables - like matching puzzle pieces!\"\n\n```python\ndef get_posts_with_authors(self):\n    \"\"\"Get posts with author information (JOIN)\"\"\"\n    self.cursor.execute('''\n        SELECT \n            posts.id,\n            posts.title,\n            posts.content,\n            posts.likes,\n            users.username,\n            users.email\n        FROM posts\n        INNER JOIN users ON posts.author_id = users.id\n        ORDER BY posts.created_at DESC\n    ''')\n    return self.cursor.fetchall()\n\n# Usage\nposts_with_authors = db.get_posts_with_authors()\nfor post in posts_with_authors:\n    print(f\"Post: {post[1]} by {post[4]} (Likes: {post[3]})\")\n```\n\n**Output:**\n```\nPost: Flask Tutorial by bob (Likes: 0)\nPost: Web Development by alice (Likes: 0)\nPost: Python Basics by alice (Likes: 3)\n```\n\n---\n\n### üíª Live Activity: Build Blog Database\n\n**Students run the complete demo above and see:**\n- Tables created\n- Users inserted\n- Posts created\n- Data queried\n- Records updated\n- Likes incremented\n\n---\n\n### üè† Homework: Design Complete Blog Schema\n\n**Task:** Design and implement a complete blog database schema\n\n```sql\n-- homework14_blog_schema.sql\n\n-- Users table\nCREATE TABLE users (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    username TEXT NOT NULL UNIQUE,\n    email TEXT NOT NULL UNIQUE,\n    password_hash TEXT NOT NULL,\n    bio TEXT,\n    avatar_url TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- TODO: Add posts table with these columns:\n-- id, title, content, author_id, likes, views, created_at, updated_at\n\n-- TODO: Add comments table with these columns:\n-- id, post_id, user_id, content, created_at\n\n-- TODO: Add categories table:\n-- id, name, description\n\n-- TODO: Add post_categories junction table (many-to-many):\n-- post_id, category_id\n\n-- TODO: Add follows table (user following system):\n-- follower_id, following_id, created_at\n```\n\n**Implement in Python and test with sample data!**\n\n---\n\n### üìù Key Takeaways\n\n‚úÖ SQL = language for databases\n‚úÖ CRUD = Create, Read, Update, Delete\n‚úÖ SQLite = built-in Python database\n‚úÖ Primary Key = unique identifier\n‚úÖ Foreign Key = links tables\n‚úÖ JOIN = combines tables\n\n---\n\n<a name=\"hour-12\"></a>\n## üìÖ Hour 12: Advanced OOP\n\n### üéØ Learning Objectives\n- Master inheritance and polymorphism\n- Use magic methods (`__str__`, `__repr__`)\n- Understand dataclasses\n- Build payment processing system\n\n### üìñ What to Teach\n\n**\"Inheritance = Child classes inherit from parent classes, like children inherit traits from parents!\"**\n\n---\n\n### 1Ô∏è‚É£ Inheritance (15 minutes)\n\n**Basic Inheritance:**\n\n```python\n# Parent class (base class)\nclass Animal:\n    def __init__(self, name, species):\n        self.name = name\n        self.species = species\n    \n    def make_sound(self):\n        return \"Some generic sound\"\n    \n    def info(self):\n        return f\"{self.name} is a {self.species}\"\n\n# Child classes\nclass Dog(Animal):\n    def __init__(self, name, breed):\n        super().__init__(name, species=\"Dog\")  # Call parent __init__\n        self.breed = breed\n    \n    def make_sound(self):  # Override parent method\n        return \"Woof!\"\n    \n    def fetch(self):\n        return f\"{self.name} is fetching the ball!\"\n\nclass Cat(Animal):\n    def __init__(self, name, color):\n        super().__init__(name, species=\"Cat\")\n        self.color = color\n    \n    def make_sound(self):  # Override parent method\n        return \"Meow!\"\n    \n    def scratch(self):\n        return f\"{self.name} is scratching the furniture!\"\n\n# Usage\ndog = Dog(\"Buddy\", \"Golden Retriever\")\ncat = Cat(\"Whiskers\", \"Orange\")\n\nprint(dog.info())        # Buddy is a Dog\nprint(dog.make_sound())  # Woof!\nprint(dog.fetch())       # Buddy is fetching the ball!\n\nprint(cat.info())        # Whiskers is a Cat\nprint(cat.make_sound())  # Meow!\nprint(cat.scratch())     # Whiskers is scratching the furniture!\n```\n\n**Multi-Level Inheritance:**\n\n```python\nclass Vehicle:\n    def __init__(self, brand):\n        self.brand = brand\n    \n    def start(self):\n        return f\"{self.brand} vehicle started\"\n\nclass Car(Vehicle):\n    def __init__(self, brand, model):\n        super().__init__(brand)\n        self.model = model\n    \n    def drive(self):\n        return f\"Driving {self.brand} {self.model}\"\n\nclass ElectricCar(Car):\n    def __init__(self, brand, model, battery_capacity):\n        super().__init__(brand, model)\n        self.battery_capacity = battery_capacity\n    \n    def charge(self):\n        return f\"Charging {self.battery_capacity}kWh battery\"\n\n# Usage\ntesla = ElectricCar(\"Tesla\", \"Model 3\", 75)\nprint(tesla.start())   # Tesla vehicle started\nprint(tesla.drive())   # Driving Tesla Model 3\nprint(tesla.charge())  # Charging 75kWh battery\n```\n\n---\n\n### 2Ô∏è‚É£ Polymorphism (10 minutes)\n\n**Explain:**\n\n\"Polymorphism = Same method name, different behavior based on object type\"\n\n```python\nclass Shape:\n    def area(self):\n        pass\n\nclass Rectangle(Shape):\n    def __init__(self, width, height):\n        self.width = width\n        self.height = height\n    \n    def area(self):\n        return self.width * self.height\n\nclass Circle(Shape):\n    def __init__(self, radius):\n        self.radius = radius\n    \n    def area(self):\n        return 3.14159 * self.radius ** 2\n\nclass Triangle(Shape):\n    def __init__(self, base, height):\n        self.base = base\n        self.height = height\n    \n    def area(self):\n        return 0.5 * self.base * self.height\n\n# Polymorphism in action\nshapes = [\n    Rectangle(10, 5),\n    Circle(7),\n    Triangle(6, 8)\n]\n\nfor shape in shapes:\n    print(f\"{shape.__class__.__name__} area: {shape.area()}\")\n\n# Output:\n# Rectangle area: 50\n# Circle area: 153.93804\n# Triangle area: 24.0\n```\n\n---\n\n### 3Ô∏è‚É£ Magic Methods (15 minutes)\n\n**Common Magic Methods:**\n\n```python\nclass Book:\n    def __init__(self, title, author, pages):\n        self.title = title\n        self.author = author\n        self.pages = pages\n    \n    def __str__(self):\n        \"\"\"String representation for users (print)\"\"\"\n        return f\"'{self.title}' by {self.author}\"\n    \n    def __repr__(self):\n        \"\"\"String representation for developers (debugging)\"\"\"\n        return f\"Book('{self.title}', '{self.author}', {self.pages})\"\n    \n    def __len__(self):\n        \"\"\"Length of book (pages)\"\"\"\n        return self.pages\n    \n    def __eq__(self, other):\n        \"\"\"Check if two books are equal\"\"\"\n        return self.title == other.title and self.author == other.author\n    \n    def __lt__(self, other):\n        \"\"\"Less than comparison (by pages)\"\"\"\n        return self.pages < other.pages\n\n# Usage\nbook1 = Book(\"Python Basics\", \"Alice\", 300)\nbook2 = Book(\"Advanced Python\", \"Bob\", 450)\n\nprint(book1)           # 'Python Basics' by Alice\nprint(repr(book1))     # Book('Python Basics', 'Alice', 300)\nprint(len(book1))      # 300\nprint(book1 == book2)  # False\nprint(book1 < book2)   # True (300 < 450)\n\n# Sorting books by pages\nbooks = [book2, book1]\nbooks.sort()\nfor book in books:\n    print(book)\n```\n\n**More Magic Methods:**\n\n```python\nclass BankAccount:\n    def __init__(self, owner, balance=0):\n        self.owner = owner\n        self.balance = balance\n    \n    def __str__(self):\n        return f\"{self.owner}'s account: ‚Çπ{self.balance}\"\n    \n    def __add__(self, amount):\n        \"\"\"Add money (deposit)\"\"\"\n        self.balance += amount\n        return self\n    \n    def __sub__(self, amount):\n        \"\"\"Subtract money (withdraw)\"\"\"\n        if amount > self.balance:\n            raise ValueError(\"Insufficient funds\")\n        self.balance -= amount\n        return self\n    \n    def __call__(self):\n        \"\"\"Make object callable\"\"\"\n        return f\"Balance: ‚Çπ{self.balance}\"\n\n# Usage\naccount = BankAccount(\"Alice\", 1000)\nprint(account)       # Alice's account: ‚Çπ1000\n\naccount + 500        # Deposit\nprint(account())     # Balance: ‚Çπ1500\n\naccount - 200        # Withdraw\nprint(account())     # Balance: ‚Çπ1300\n```\n\n---\n\n### 4Ô∏è‚É£ Dataclasses (10 minutes)\n\n**Traditional Class:**\n\n```python\nclass Person:\n    def __init__(self, name, age, city):\n        self.name = name\n        self.age = age\n        self.city = city\n    \n    def __repr__(self):\n        return f\"Person(name='{self.name}', age={self.age}, city='{self.city}')\"\n    \n    def __eq__(self, other):\n        return self.name == other.name and self.age == other.age\n```\n\n**Using Dataclass (Simpler!):**\n\n```python\nfrom dataclasses import dataclass\n\n@dataclass\nclass Person:\n    name: str\n    age: int\n    city: str\n\n# Automatically creates __init__, __repr__, __eq__, etc.\nperson = Person(\"Alice\", 25, \"Mumbai\")\nprint(person)  # Person(name='Alice', age=25, city='Mumbai')\n```\n\n**Dataclass with Defaults:**\n\n```python\nfrom dataclasses import dataclass, field\n\n@dataclass\nclass Product:\n    name: str\n    price: float\n    quantity: int = 0\n    tags: list = field(default_factory=list)\n    \n    def total_value(self):\n        return self.price * self.quantity\n\n# Usage\nproduct = Product(\"Laptop\", 50000, 10)\nprint(product)\nprint(f\"Total value: ‚Çπ{product.total_value()}\")\n\nproduct2 = Product(\"Mouse\", 500)\nprint(product2)\n```\n\n---\n\n### 5Ô∏è‚É£ Abstract Classes (10 minutes)\n\n```python\nfrom abc import ABC, abstractmethod\n\nclass PaymentProcessor(ABC):\n    \"\"\"Abstract base class for payment processors\"\"\"\n    \n    @abstractmethod\n    def process_payment(self, amount):\n        \"\"\"Must be implemented by subclasses\"\"\"\n        pass\n    \n    @abstractmethod\n    def refund(self, transaction_id):\n        \"\"\"Must be implemented by subclasses\"\"\"\n        pass\n\nclass CreditCardProcessor(PaymentProcessor):\n    def process_payment(self, amount):\n        return f\"Processing ‚Çπ{amount} via Credit Card\"\n    \n    def refund(self, transaction_id):\n        return f\"Refunding transaction {transaction_id}\"\n\nclass UPIProcessor(PaymentProcessor):\n    def process_payment(self, amount):\n        return f\"Processing ‚Çπ{amount} via UPI\"\n    \n    def refund(self, transaction_id):\n        return f\"Refunding UPI transaction {transaction_id}\"\n\n# Cannot instantiate abstract class\n# processor = PaymentProcessor()  # Error!\n\n# Can instantiate concrete classes\ncc_processor = CreditCardProcessor()\nprint(cc_processor.process_payment(1000))\n\nupi_processor = UPIProcessor()\nprint(upi_processor.process_payment(500))\n```\n\n---\n\n### üíª Live Activity: Payment System\n\n**Create: hour12_payment_system.py**\n\n```python\n\"\"\"\nPayment Processing System\nDemonstrates inheritance, polymorphism, and magic methods\n\"\"\"\n\nfrom abc import ABC, abstractmethod\nfrom dataclasses import dataclass\nfrom datetime import datetime\nfrom enum import Enum\n\nclass PaymentStatus(Enum):\n    PENDING = \"pending\"\n    SUCCESS = \"success\"\n    FAILED = \"failed\"\n    REFUNDED = \"refunded\"\n\n@dataclass\nclass Transaction:\n    transaction_id: str\n    amount: float\n    status: PaymentStatus\n    timestamp: datetime = None\n    \n    def __post_init__(self):\n        if self.timestamp is None:\n            self.timestamp = datetime.now()\n\nclass PaymentMethod(ABC):\n    \"\"\"Abstract base class for payment methods\"\"\"\n    \n    def __init__(self):\n        self.transactions = []\n    \n    @abstractmethod\n    def process_payment(self, amount, description=\"\"):\n        \"\"\"Process a payment\"\"\"\n        pass\n    \n    @abstractmethod\n    def get_fee(self, amount):\n        \"\"\"Calculate processing fee\"\"\"\n        pass\n    \n    def add_transaction(self, transaction):\n        self.transactions.append(transaction)\n    \n    def get_transaction_history(self):\n        return self.transactions\n\nclass CreditCard(PaymentMethod):\n    def __init__(self, card_number, cvv, expiry):\n        super().__init__()\n        self.card_number = card_number[-4:]  # Store only last 4 digits\n        self.cvv = cvv\n        self.expiry = expiry\n    \n    def process_payment(self, amount, description=\"\"):\n        fee = self.get_fee(amount)\n        total = amount + fee\n        \n        # Simulate payment processing\n        transaction_id = f\"CC-{len(self.transactions) + 1:05d}\"\n        transaction = Transaction(\n            transaction_id=transaction_id,\n            amount=total,\n            status=PaymentStatus.SUCCESS\n        )\n        \n        self.add_transaction(transaction)\n        return {\n            \"success\": True,\n            \"transaction_id\": transaction_id,\n            \"amount\": amount,\n            \"fee\": fee,\n            \"total\": total,\n            \"message\": f\"Paid ‚Çπ{total} via Credit Card (****{self.card_number})\"\n        }\n    \n    def get_fee(self, amount):\n        return amount * 0.02  # 2% fee\n\nclass DebitCard(PaymentMethod):\n    def __init__(self, card_number, pin):\n        super().__init__()\n        self.card_number = card_number[-4:]\n        self.pin = pin\n    \n    def process_payment(self, amount, description=\"\"):\n        fee = self.get_fee(amount)\n        total = amount + fee\n        \n        transaction_id = f\"DC-{len(self.transactions) + 1:05d}\"\n        transaction = Transaction(\n            transaction_id=transaction_id,\n            amount=total,\n            status=PaymentStatus.SUCCESS\n        )\n        \n        self.add_transaction(transaction)\n        return {\n            \"success\": True,\n            \"transaction_id\": transaction_id,\n            \"amount\": amount,\n            \"fee\": fee,\n            \"total\": total,\n            \"message\": f\"Paid ‚Çπ{total} via Debit Card (****{self.card_number})\"\n        }\n    \n    def get_fee(self, amount):\n        return 0  # No fee\n\nclass UPI(PaymentMethod):\n    def __init__(self, upi_id):\n        super().__init__()\n        self.upi_id = upi_id\n    \n    def process_payment(self, amount, description=\"\"):\n        fee = self.get_fee(amount)\n        total = amount + fee\n        \n        transaction_id = f\"UPI-{len(self.transactions) + 1:05d}\"\n        transaction = Transaction(\n            transaction_id=transaction_id,\n            amount=total,\n            status=PaymentStatus.SUCCESS\n        )\n        \n        self.add_transaction(transaction)\n        return {\n            \"success\": True,\n            \"transaction_id\": transaction_id,\n            \"amount\": amount,\n            \"fee\": fee,\n            \"total\": total,\n            \"message\": f\"Paid ‚Çπ{total} via UPI ({self.upi_id})\"\n        }\n    \n    def get_fee(self, amount):\n        return 0  # No fee\n\nclass Wallet(PaymentMethod):\n    def __init__(self, balance=0):\n        super().__init__()\n        self.balance = balance\n    \n    def add_money(self, amount):\n        self.balance += amount\n        return f\"Added ‚Çπ{amount}. New balance: ‚Çπ{self.balance}\"\n    \n    def process_payment(self, amount, description=\"\"):\n        if self.balance < amount:\n            return {\n                \"success\": False,\n                \"message\": f\"Insufficient balance. Available: ‚Çπ{self.balance}\"\n            }\n        \n        fee = self.get_fee(amount)\n        total = amount + fee\n        \n        self.balance -= total\n        \n        transaction_id = f\"WALLET-{len(self.transactions) + 1:05d}\"\n        transaction = Transaction(\n            transaction_id=transaction_id,\n            amount=total,\n            status=PaymentStatus.SUCCESS\n        )\n        \n        self.add_transaction(transaction)\n        return {\n            \"success\": True,\n            \"transaction_id\": transaction_id,\n            \"amount\": amount,\n            \"fee\": fee,\n            \"total\": total,\n            \"balance\": self.balance,\n            \"message\": f\"Paid ‚Çπ{total} via Wallet. Remaining: ‚Çπ{self.balance}\"\n        }\n    \n    def get_fee(self, amount):\n        return 0  # No fee\n\nclass PaymentGateway:\n    \"\"\"Main payment gateway to handle all payment methods\"\"\"\n    \n    def __init__(self):\n        self.payment_methods = {}\n    \n    def add_payment_method(self, name, payment_method):\n        self.payment_methods[name] = payment_method\n    \n    def process_payment(self, method_name, amount, description=\"\"):\n        if method_name not in self.payment_methods:\n            return {\"success\": False, \"message\": \"Payment method not found\"}\n        \n        payment_method = self.payment_methods[method_name]\n        return payment_method.process_payment(amount, description)\n    \n    def get_all_transactions(self):\n        all_transactions = []\n        for name, method in self.payment_methods.items():\n            for transaction in method.get_transaction_history():\n                all_transactions.append({\n                    \"method\": name,\n                    \"transaction\": transaction\n                })\n        return all_transactions\n\n# Demo\nprint(\"=== PAYMENT PROCESSING SYSTEM ===\\n\")\n\n# Create payment gateway\ngateway = PaymentGateway()\n\n# Add payment methods\ngateway.add_payment_method(\"credit_card\", CreditCard(\"1234567890123456\", \"123\", \"12/26\"))\ngateway.add_payment_method(\"debit_card\", DebitCard(\"9876543210987654\", \"1234\"))\ngateway.add_payment_method(\"upi\", UPI(\"alice@upi\"))\ngateway.add_payment_method(\"wallet\", Wallet(balance=5000))\n\n# Process payments\nprint(\"1. Credit Card Payment:\")\nresult = gateway.process_payment(\"credit_card\", 1000, \"Shopping\")\nprint(result[\"message\"])\nprint(f\"   Fee: ‚Çπ{result['fee']}\\n\")\n\nprint(\"2. Debit Card Payment:\")\nresult = gateway.process_payment(\"debit_card\", 500)\nprint(result[\"message\"])\nprint(f\"   Fee: ‚Çπ{result['fee']}\\n\")\n\nprint(\"3. UPI Payment:\")\nresult = gateway.process_payment(\"upi\", 750)\nprint(result[\"message\"])\nprint(f\"   Fee: ‚Çπ{result['fee']}\\n\")\n\nprint(\"4. Wallet Payment:\")\nresult = gateway.process_payment(\"wallet\", 300)\nprint(result[\"message\"])\nprint(f\"   Fee: ‚Çπ{result['fee']}\\n\")\n\n# Show transaction history\nprint(\"=== TRANSACTION HISTORY ===\")\ntransactions = gateway.get_all_transactions()\nfor item in transactions:\n    trans = item[\"transaction\"]\n    print(f\"{item['method']}: {trans.transaction_id} - ‚Çπ{trans.amount} ({trans.status.value})\")\n```\n\n---\n\n### üè† Homework: E-commerce System\n\n```python\n# homework12_ecommerce.py\n\nfrom abc import ABC, abstractmethod\nfrom dataclasses import dataclass\nfrom datetime import datetime\n\n# TODO: Create abstract Product class with:\n# - name, price, stock\n# - abstract method: calculate_discount()\n\n# TODO: Create concrete product classes:\n# - Electronics (10% discount)\n# - Clothing (20% discount)\n# - Books (15% discount)\n\n# TODO: Create ShoppingCart class with:\n# - add_item(product, quantity)\n# - remove_item(product)\n# - calculate_total()\n# - apply_coupon(code, discount_percent)\n\n# TODO: Create Order class with:\n# - order_id, customer, items, total, status\n# - Magic methods: __str__, __repr__\n\n# TODO: Test the complete system\n```\n\n---\n\n### üìù Key Takeaways\n\n‚úÖ Inheritance = child classes extend parent\n‚úÖ `super()` calls parent method\n‚úÖ Polymorphism = same method, different behavior\n‚úÖ Magic methods = `__str__`, `__repr__`, `__eq__`, etc.\n‚úÖ Dataclasses = automatic method generation\n‚úÖ Abstract classes = templates for subclasses\n\n---\n\n<a name=\"hour-13\"></a>\n## üìÖ Hour 13: Virtual Environments & Dependencies\n\n### üéØ Learning Objectives\n- Master virtual environments\n- Use pip effectively\n- Create requirements.txt\n- Understand pyproject.toml\n- Use Poetry for dependency management\n\n### üìñ What to Teach\n\n**\"Virtual environments = separate Python installations for each project!\"**\n\n---\n\n### 1Ô∏è‚É£ Why Virtual Environments? (10 minutes)\n\n**The Problem:**\n\n```\nSystem Python (Global):\n‚îú‚îÄ‚îÄ Django 3.0\n‚îú‚îÄ‚îÄ Flask 1.1\n‚îî‚îÄ‚îÄ requests 2.25\n\nProject A needs Django 4.0  ‚ùå Conflict!\nProject B needs Flask 2.0   ‚ùå Conflict!\n```\n\n**The Solution:**\n\n```\nSystem Python\n‚îú‚îÄ‚îÄ Project A (venv)\n‚îÇ   ‚îú‚îÄ‚îÄ Django 4.0 ‚úÖ\n‚îÇ   ‚îî‚îÄ‚îÄ requests 2.28\n‚îî‚îÄ‚îÄ Project B (venv)\n    ‚îú‚îÄ‚îÄ Flask 2.0 ‚úÖ\n    ‚îî‚îÄ‚îÄ requests 2.31\n```\n\n---\n\n### 2Ô∏è‚É£ Creating Virtual Environments (15 minutes)\n\n**Using venv (Built-in):**\n\n```bash\n# Create virtual environment\npython -m venv myenv\n\n# Activate (macOS/Linux)\nsource myenv/bin/activate\n\n# Activate (Windows)\nmyenv\\Scripts\\activate\n\n# Verify activation (prompt shows (myenv))\nwhich python  # Should show myenv/bin/python\n\n# Deactivate\ndeactivate\n```\n\n**Project Setup Workflow:**\n\n```bash\n# 1. Create project folder\nmkdir my_project\ncd my_project\n\n# 2. Create virtual environment\npython -m venv venv\n\n# 3. Activate\nsource venv/bin/activate\n\n# 4. Install packages\npip install flask requests\n\n# 5. Create requirements.txt\npip freeze > requirements.txt\n\n# 6. Work on project...\n\n# 7. Deactivate when done\ndeactivate\n```\n\n---\n\n### 3Ô∏è‚É£ Managing Dependencies with pip (15 minutes)\n\n**Common pip Commands:**\n\n```bash\n# Install package\npip install requests\n\n# Install specific version\npip install flask==2.3.0\n\n# Install with version constraints\npip install \"django>=4.0,<5.0\"\n\n# Install from requirements.txt\npip install -r requirements.txt\n\n# Upgrade package\npip install --upgrade requests\n\n# Uninstall package\npip uninstall requests\n\n# List installed packages\npip list\n\n# Show package details\npip show flask\n\n# Search packages (deprecated, use pypi.org)\n# pip search django\n\n# Check outdated packages\npip list --outdated\n\n# Freeze (save installed packages)\npip freeze > requirements.txt\n```\n\n**requirements.txt Example:**\n\n```txt\n# requirements.txt\n\n# Web Framework\nflask==2.3.0\nflask-cors==4.0.0\n\n# Database\nsqlalchemy==2.0.0\npsycopg2-binary==2.9.5\n\n# Utilities\npython-dotenv==1.0.0\nrequests==2.31.0\n\n# Development only\npytest==7.4.0\nblack==23.7.0\n```\n\n**Development vs Production:**\n\n```txt\n# requirements-dev.txt (development)\npytest==7.4.0\nblack==23.7.0\nflake8==6.1.0\nmypy==1.5.0\n\n# requirements-prod.txt (production)\ngunicorn==21.2.0\npsycopg2-binary==2.9.5\n```\n\n---\n\n### 4Ô∏è‚É£ Modern Dependency Management with Poetry (10 minutes)\n\n**Installing Poetry:**\n\n```bash\n# Install Poetry\ncurl -sSL https://install.python-poetry.org | python3 -\n\n# Or with pip\npip install poetry\n```\n\n**Using Poetry:**\n\n```bash\n# Create new project\npoetry new my_project\ncd my_project\n\n# Or initialize in existing project\npoetry init\n\n# Add dependencies\npoetry add flask\npoetry add requests\n\n# Add dev dependencies\npoetry add --group dev pytest black\n\n# Install all dependencies\npoetry install\n\n# Update dependencies\npoetry update\n\n# Show installed packages\npoetry show\n\n# Run script in virtual environment\npoetry run python app.py\n\n# Activate poetry shell\npoetry shell\n```\n\n**pyproject.toml Example:**\n\n```toml\n[tool.poetry]\nname = \"my-project\"\nversion = \"0.1.0\"\ndescription = \"My awesome project\"\nauthors = [\"Your Name <you@example.com>\"]\n\n[tool.poetry.dependencies]\npython = \"^3.11\"\nflask = \"^2.3.0\"\nsqlalchemy = \"^2.0.0\"\nrequests = \"^2.31.0\"\n\n[tool.poetry.group.dev.dependencies]\npytest = \"^7.4.0\"\nblack = \"^23.7.0\"\nflake8 = \"^6.1.0\"\n\n[build-system]\nrequires = [\"poetry-core\"]\nbuild-backend = \"poetry.core.masonry.api\"\n```\n\n---\n\n### 5Ô∏è‚É£ Project Structure Best Practices (10 minutes)\n\n**Standard Python Project Structure:**\n\n```\nmy_project/\n‚îú‚îÄ‚îÄ venv/                  # Virtual environment\n‚îú‚îÄ‚îÄ src/                   # Source code\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ main.py\n‚îÇ   ‚îú‚îÄ‚îÄ models/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.py\n‚îÇ   ‚îú‚îÄ‚îÄ services/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.py\n‚îÇ   ‚îî‚îÄ‚îÄ utils/\n‚îÇ       ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ       ‚îî‚îÄ‚îÄ helpers.py\n‚îú‚îÄ‚îÄ tests/                 # Test files\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ test_models.py\n‚îÇ   ‚îî‚îÄ‚îÄ test_services.py\n‚îú‚îÄ‚îÄ docs/                  # Documentation\n‚îú‚îÄ‚îÄ .env                   # Environment variables\n‚îú‚îÄ‚îÄ .gitignore            # Git ignore file\n‚îú‚îÄ‚îÄ requirements.txt      # Dependencies\n‚îú‚îÄ‚îÄ README.md             # Project README\n‚îî‚îÄ‚îÄ setup.py              # Package setup\n```\n\n**.gitignore for Python:**\n\n```gitignore\n# Virtual environments\nvenv/\nenv/\nENV/\n\n# Python cache\n__pycache__/\n*.py[cod]\n*$py.class\n*.so\n\n# Distribution / packaging\ndist/\nbuild/\n*.egg-info/\n\n# Environment variables\n.env\n.env.local\n\n# IDE\n.vscode/\n.idea/\n*.swp\n\n# Database\n*.db\n*.sqlite3\n\n# Logs\n*.log\n\n# OS\n.DS_Store\nThumbs.db\n```\n\n---\n\n### üíª Live Activity: Project Setup Script\n\n**Create: hour13_project_setup.py**\n\n```python\n\"\"\"\nAutomated Project Setup Script\nCreates a complete Python project structure\n\"\"\"\n\nimport os\nimport sys\nimport subprocess\nfrom pathlib import Path\n\nclass ProjectSetup:\n    def __init__(self, project_name):\n        self.project_name = project_name\n        self.project_path = Path(project_name)\n    \n    def create_directory_structure(self):\n        \"\"\"Create project folders\"\"\"\n        print(f\"Creating project structure for '{self.project_name}'...\")\n        \n        directories = [\n            self.project_path,\n            self.project_path / \"src\",\n            self.project_path / \"src\" / \"models\",\n            self.project_path / \"src\" / \"services\",\n            self.project_path / \"src\" / \"utils\",\n            self.project_path / \"tests\",\n            self.project_path / \"docs\",\n        ]\n        \n        for directory in directories:\n            directory.mkdir(parents=True, exist_ok=True)\n            print(f\"  ‚úì Created {directory}\")\n    \n    def create_init_files(self):\n        \"\"\"Create __init__.py files\"\"\"\n        print(\"\\nCreating __init__.py files...\")\n        \n        init_files = [\n            self.project_path / \"src\" / \"__init__.py\",\n            self.project_path / \"src\" / \"models\" / \"__init__.py\",\n            self.project_path / \"src\" / \"services\" / \"__init__.py\",\n            self.project_path / \"src\" / \"utils\" / \"__init__.py\",\n            self.project_path / \"tests\" / \"__init__.py\",\n        ]\n        \n        for init_file in init_files:\n            init_file.touch()\n            print(f\"  ‚úì Created {init_file}\")\n    \n    def create_main_file(self):\n        \"\"\"Create main.py\"\"\"\n        print(\"\\nCreating main.py...\")\n        \n        main_content = '''\"\"\"\nMain application file\n\"\"\"\n\ndef main():\n    print(\"Hello from {}!\")\n\nif __name__ == \"__main__\":\n    main()\n'''.format(self.project_name)\n        \n        main_file = self.project_path / \"src\" / \"main.py\"\n        main_file.write_text(main_content)\n        print(f\"  ‚úì Created {main_file}\")\n    \n    def create_readme(self):\n        \"\"\"Create README.md\"\"\"\n        print(\"\\nCreating README.md...\")\n        \n        readme_content = f'''# {self.project_name}\n\n## Description\nBrief description of your project.\n\n## Installation\n\n```bash\n# Create virtual environment\npython -m venv venv\n\n# Activate virtual environment\nsource venv/bin/activate  # macOS/Linux\n# or\nvenv\\\\Scripts\\\\activate  # Windows\n\n# Install dependencies\npip install -r requirements.txt\n```\n\n## Usage\n\n```bash\npython src/main.py\n```\n\n## Testing\n\n```bash\npytest tests/\n```\n\n## License\nMIT License\n'''\n        \n        readme_file = self.project_path / \"README.md\"\n        readme_file.write_text(readme_content)\n        print(f\"  ‚úì Created {readme_file}\")\n    \n    def create_requirements(self):\n        \"\"\"Create requirements.txt\"\"\"\n        print(\"\\nCreating requirements.txt...\")\n        \n        requirements_content = '''# Core dependencies\nrequests==2.31.0\npython-dotenv==1.0.0\n\n# Development dependencies\npytest==7.4.0\nblack==23.7.0\nflake8==6.1.0\n'''\n        \n        req_file = self.project_path / \"requirements.txt\"\n        req_file.write_text(requirements_content)\n        print(f\"  ‚úì Created {req_file}\")\n    \n    def create_gitignore(self):\n        \"\"\"Create .gitignore\"\"\"\n        print(\"\\nCreating .gitignore...\")\n        \n        gitignore_content = '''# Virtual environments\nvenv/\nenv/\nENV/\n\n# Python cache\n__pycache__/\n*.py[cod]\n*$py.class\n\n# Environment variables\n.env\n.env.local\n\n# Database\n*.db\n*.sqlite3\n\n# IDE\n.vscode/\n.idea/\n\n# OS\n.DS_Store\n'''\n        \n        gitignore_file = self.project_path / \".gitignore\"\n        gitignore_file.write_text(gitignore_content)\n        print(f\"  ‚úì Created {gitignore_file}\")\n    \n    def create_env_file(self):\n        \"\"\"Create .env file\"\"\"\n        print(\"\\nCreating .env file...\")\n        \n        env_content = '''# Environment variables\nDEBUG=True\nSECRET_KEY=your-secret-key-here\nDATABASE_URL=sqlite:///app.db\n'''\n        \n        env_file = self.project_path / \".env\"\n        env_file.write_text(env_content)\n        print(f\"  ‚úì Created {env_file}\")\n    \n    def create_virtual_environment(self):\n        \"\"\"Create virtual environment\"\"\"\n        print(\"\\nCreating virtual environment...\")\n        \n        venv_path = self.project_path / \"venv\"\n        subprocess.run([sys.executable, \"-m\", \"venv\", str(venv_path)])\n        print(f\"  ‚úì Created virtual environment at {venv_path}\")\n    \n    def setup(self):\n        \"\"\"Run complete setup\"\"\"\n        print(f\"\\n{'='*60}\")\n        print(f\"  PROJECT SETUP: {self.project_name}\")\n        print(f\"{'='*60}\\n\")\n        \n        self.create_directory_structure()\n        self.create_init_files()\n        self.create_main_file()\n        self.create_readme()\n        self.create_requirements()\n        self.create_gitignore()\n        self.create_env_file()\n        self.create_virtual_environment()\n        \n        print(f\"\\n{'='*60}\")\n        print(\"  ‚úÖ PROJECT SETUP COMPLETE!\")\n        print(f\"{'='*60}\\n\")\n        \n        print(\"Next steps:\")\n        print(f\"  1. cd {self.project_name}\")\n        print(\"  2. source venv/bin/activate\")\n        print(\"  3. pip install -r requirements.txt\")\n        print(\"  4. python src/main.py\")\n\n# Demo\nif __name__ == \"__main__\":\n    project_name = input(\"Enter project name: \").strip()\n    \n    if not project_name:\n        print(\"Error: Project name cannot be empty!\")\n        sys.exit(1)\n    \n    setup = ProjectSetup(project_name)\n    setup.setup()\n```\n\n---\n\n### üè† Homework: Multi-Environment Setup\n\n```python\n# homework13_environments.py\n\n# TODO: Create a script that sets up different environments:\n\n# 1. Development environment\n# - Install dev dependencies (pytest, black, flake8)\n# - Set DEBUG=True\n# - Use SQLite database\n\n# 2. Production environment\n# - Install production dependencies only\n# - Set DEBUG=False\n# - Use PostgreSQL database\n# - Add gunicorn\n\n# 3. Testing environment\n# - Install test dependencies\n# - Use in-memory database\n# - Set TEST=True\n\n# Create separate requirements files:\n# - requirements-dev.txt\n# - requirements-prod.txt\n# - requirements-test.txt\n\n# Write setup script that:\n# - Detects current environment\n# - Installs appropriate dependencies\n# - Sets correct environment variables\n```\n\n---\n\n### üìù Key Takeaways\n\n‚úÖ Virtual environments isolate project dependencies\n‚úÖ `python -m venv venv` creates environment\n‚úÖ `source venv/bin/activate` activates it\n‚úÖ `pip freeze > requirements.txt` saves dependencies\n‚úÖ Poetry = modern dependency management\n‚úÖ Always use .gitignore to exclude venv/\n\n---\n\n<a name=\"hour-15\"></a>\n## üìÖ Hour 15: ORMs - SQLAlchemy\n\n### üéØ Learning Objectives\n- Understand Object-Relational Mapping (ORM)\n- Use SQLAlchemy Core and ORM\n- Define models and relationships\n- Perform CRUD operations with ORM\n\n### üìñ What to Teach\n\n**\"ORM = Write Python code instead of SQL queries!\"**\n\n---\n\n### 1Ô∏è‚É£ What is ORM? (10 minutes)\n\n**Without ORM (Raw SQL):**\n\n```python\nimport sqlite3\n\nconn = sqlite3.connect('app.db')\ncursor = conn.cursor()\n\n# Create user\ncursor.execute(\"INSERT INTO users (name, email) VALUES (?, ?)\", (\"Alice\", \"alice@email.com\"))\nconn.commit()\n\n# Get user\ncursor.execute(\"SELECT * FROM users WHERE email = ?\", (\"alice@email.com\",))\nuser = cursor.fetchone()\n```\n\n**With ORM (SQLAlchemy):**\n\n```python\nfrom sqlalchemy.orm import Session\n\n# Create user\nuser = User(name=\"Alice\", email=\"alice@email.com\")\nsession.add(user)\nsession.commit()\n\n# Get user\nuser = session.query(User).filter_by(email=\"alice@email.com\").first()\n```\n\n---\n\n### 2Ô∏è‚É£ SQLAlchemy Setup (15 minutes)\n\n**Install:**\n\n```bash\npip install sqlalchemy\n```\n\n**Basic Setup:**\n\n```python\nfrom sqlalchemy import create_engine, Column, Integer, String, DateTime\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\nfrom datetime import datetime\n\n# Create engine\nengine = create_engine('sqlite:///blog.db', echo=True)\n\n# Base class for models\nBase = declarative_base()\n\n# Define model\nclass User(Base):\n    __tablename__ = 'users'\n    \n    id = Column(Integer, primary_key=True)\n    username = Column(String(50), unique=True, nullable=False)\n    email = Column(String(100), unique=True, nullable=False)\n    created_at = Column(DateTime, default=datetime.utcnow)\n    \n    def __repr__(self):\n        return f\"<User(id={self.id}, username='{self.username}')>\"\n\n# Create tables\nBase.metadata.create_all(engine)\n\n# Create session\nSession = sessionmaker(bind=engine)\nsession = Session()\n```\n\n---\n\n### 3Ô∏è‚É£ CRUD Operations with ORM (20 minutes)\n\n**Create:**\n\n```python\n# Single user\nuser = User(username=\"alice\", email=\"alice@email.com\")\nsession.add(user)\nsession.commit()\n\n# Multiple users\nusers = [\n    User(username=\"bob\", email=\"bob@email.com\"),\n    User(username=\"charlie\", email=\"charlie@email.com\")\n]\nsession.add_all(users)\nsession.commit()\n```\n\n**Read (Query):**\n\n```python\n# Get all users\nusers = session.query(User).all()\n\n# Get first user\nuser = session.query(User).first()\n\n# Filter by column\nuser = session.query(User).filter_by(username=\"alice\").first()\n\n# Filter with conditions\nusers = session.query(User).filter(User.id > 5).all()\n\n# Order by\nusers = session.query(User).order_by(User.created_at.desc()).all()\n\n# Limit\nusers = session.query(User).limit(10).all()\n\n# Count\ncount = session.query(User).count()\n\n# Get by primary key\nuser = session.query(User).get(1)\n```\n\n**Update:**\n\n```python\n# Method 1: Get and modify\nuser = session.query(User).filter_by(username=\"alice\").first()\nuser.email = \"newemail@email.com\"\nsession.commit()\n\n# Method 2: Update query\nsession.query(User).filter_by(username=\"alice\").update({\"email\": \"newemail@email.com\"})\nsession.commit()\n```\n\n**Delete:**\n\n```python\n# Method 1: Get and delete\nuser = session.query(User).filter_by(username=\"alice\").first()\nsession.delete(user)\nsession.commit()\n\n# Method 2: Delete query\nsession.query(User).filter_by(username=\"alice\").delete()\nsession.commit()\n```\n\n---\n\n### 4Ô∏è‚É£ Relationships (15 minutes)\n\n**One-to-Many Relationship:**\n\n```python\nfrom sqlalchemy import ForeignKey\nfrom sqlalchemy.orm import relationship\n\nclass User(Base):\n    __tablename__ = 'users'\n    \n    id = Column(Integer, primary_key=True)\n    username = Column(String(50), unique=True)\n    \n    # Relationship\n    posts = relationship(\"Post\", back_populates=\"author\")\n\nclass Post(Base):\n    __tablename__ = 'posts'\n    \n    id = Column(Integer, primary_key=True)\n    title = Column(String(200))\n    content = Column(String)\n    author_id = Column(Integer, ForeignKey('users.id'))\n    \n    # Relationship\n    author = relationship(\"User\", back_populates=\"posts\")\n\n# Usage\nuser = User(username=\"alice\")\npost1 = Post(title=\"First Post\", content=\"Hello World\")\npost2 = Post(title=\"Second Post\", content=\"Another post\")\n\nuser.posts.append(post1)\nuser.posts.append(post2)\n\nsession.add(user)\nsession.commit()\n\n# Query\nuser = session.query(User).filter_by(username=\"alice\").first()\nfor post in user.posts:\n    print(post.title)\n```\n\n**Many-to-Many Relationship:**\n\n```python\nfrom sqlalchemy import Table\n\n# Association table\npost_tags = Table('post_tags', Base.metadata,\n    Column('post_id', Integer, ForeignKey('posts.id')),\n    Column('tag_id', Integer, ForeignKey('tags.id'))\n)\n\nclass Post(Base):\n    __tablename__ = 'posts'\n    \n    id = Column(Integer, primary_key=True)\n    title = Column(String(200))\n    \n    # Many-to-many relationship\n    tags = relationship(\"Tag\", secondary=post_tags, back_populates=\"posts\")\n\nclass Tag(Base):\n    __tablename__ = 'tags'\n    \n    id = Column(Integer, primary_key=True)\n    name = Column(String(50), unique=True)\n    \n    # Many-to-many relationship\n    posts = relationship(\"Post\", secondary=post_tags, back_populates=\"tags\")\n\n# Usage\npost = Post(title=\"Python Tutorial\")\ntag1 = Tag(name=\"Python\")\ntag2 = Tag(name=\"Tutorial\")\n\npost.tags.extend([tag1, tag2])\n\nsession.add(post)\nsession.commit()\n```\n\n---\n\n### üíª Live Activity: Complete Blog ORM\n\n**Create: hour15_blog_orm.py**\n\n```python\n\"\"\"\nComplete Blog System with SQLAlchemy ORM\n\"\"\"\n\nfrom sqlalchemy import create_engine, Column, Integer, String, Text, DateTime, ForeignKey, Table\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker, relationship\nfrom datetime import datetime\n\n# Setup\nengine = create_engine('sqlite:///blog_orm.db', echo=False)\nBase = declarative_base()\nSession = sessionmaker(bind=engine)\nsession = Session()\n\n# Association table for many-to-many\npost_tags = Table('post_tags', Base.metadata,\n    Column('post_id', Integer, ForeignKey('posts.id')),\n    Column('tag_id', Integer, ForeignKey('tags.id'))\n)\n\n# Models\nclass User(Base):\n    __tablename__ = 'users'\n    \n    id = Column(Integer, primary_key=True)\n    username = Column(String(50), unique=True, nullable=False)\n    email = Column(String(100), unique=True, nullable=False)\n    bio = Column(Text)\n    created_at = Column(DateTime, default=datetime.utcnow)\n    \n    posts = relationship(\"Post\", back_populates=\"author\", cascade=\"all, delete-orphan\")\n    comments = relationship(\"Comment\", back_populates=\"user\", cascade=\"all, delete-orphan\")\n    \n    def __repr__(self):\n        return f\"<User(username='{self.username}')>\"\n\nclass Post(Base):\n    __tablename__ = 'posts'\n    \n    id = Column(Integer, primary_key=True)\n    title = Column(String(200), nullable=False)\n    content = Column(Text, nullable=False)\n    likes = Column(Integer, default=0)\n    views = Column(Integer, default=0)\n    author_id = Column(Integer, ForeignKey('users.id'), nullable=False)\n    created_at = Column(DateTime, default=datetime.utcnow)\n    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n    \n    author = relationship(\"User\", back_populates=\"posts\")\n    comments = relationship(\"Comment\", back_populates=\"post\", cascade=\"all, delete-orphan\")\n    tags = relationship(\"Tag\", secondary=post_tags, back_populates=\"posts\")\n    \n    def __repr__(self):\n        return f\"<Post(title='{self.title}')>\"\n\nclass Comment(Base):\n    __tablename__ = 'comments'\n    \n    id = Column(Integer, primary_key=True)\n    content = Column(Text, nullable=False)\n    user_id = Column(Integer, ForeignKey('users.id'), nullable=False)\n    post_id = Column(Integer, ForeignKey('posts.id'), nullable=False)\n    created_at = Column(DateTime, default=datetime.utcnow)\n    \n    user = relationship(\"User\", back_populates=\"comments\")\n    post = relationship(\"Post\", back_populates=\"comments\")\n    \n    def __repr__(self):\n        return f\"<Comment(id={self.id})>\"\n\nclass Tag(Base):\n    __tablename__ = 'tags'\n    \n    id = Column(Integer, primary_key=True)\n    name = Column(String(50), unique=True, nullable=False)\n    \n    posts = relationship(\"Post\", secondary=post_tags, back_populates=\"tags\")\n    \n    def __repr__(self):\n        return f\"<Tag(name='{self.name}')>\"\n\n# Create tables\nBase.metadata.create_all(engine)\n\n# Helper functions\ndef create_user(username, email, bio=\"\"):\n    user = User(username=username, email=email, bio=bio)\n    session.add(user)\n    session.commit()\n    return user\n\ndef create_post(author_id, title, content, tag_names=None):\n    post = Post(author_id=author_id, title=title, content=content)\n    \n    if tag_names:\n        for tag_name in tag_names:\n            tag = session.query(Tag).filter_by(name=tag_name).first()\n            if not tag:\n                tag = Tag(name=tag_name)\n            post.tags.append(tag)\n    \n    session.add(post)\n    session.commit()\n    return post\n\ndef add_comment(user_id, post_id, content):\n    comment = Comment(user_id=user_id, post_id=post_id, content=content)\n    session.add(comment)\n    session.commit()\n    return comment\n\ndef get_user_posts(username):\n    user = session.query(User).filter_by(username=username).first()\n    return user.posts if user else []\n\ndef get_posts_by_tag(tag_name):\n    tag = session.query(Tag).filter_by(name=tag_name).first()\n    return tag.posts if tag else []\n\ndef get_post_with_comments(post_id):\n    post = session.query(Post).get(post_id)\n    return post\n\ndef like_post(post_id):\n    post = session.query(Post).get(post_id)\n    if post:\n        post.likes += 1\n        session.commit()\n\ndef view_post(post_id):\n    post = session.query(Post).get(post_id)\n    if post:\n        post.views += 1\n        session.commit()\n\n# Demo\nprint(\"=== BLOG ORM DEMO ===\\n\")\n\n# Create users\nprint(\"1. Creating users...\")\nalice = create_user(\"alice\", \"alice@email.com\", \"Python developer\")\nbob = create_user(\"bob\", \"bob@email.com\", \"Data scientist\")\nprint(f\"   Created: {alice}, {bob}\\n\")\n\n# Create posts\nprint(\"2. Creating posts...\")\npost1 = create_post(alice.id, \"Python Basics\", \"Learn Python fundamentals\", [\"Python\", \"Tutorial\"])\npost2 = create_post(alice.id, \"Advanced Python\", \"Deep dive into Python\", [\"Python\", \"Advanced\"])\npost3 = create_post(bob.id, \"Data Science 101\", \"Introduction to data science\", [\"Data Science\", \"Tutorial\"])\nprint(f\"   Created 3 posts\\n\")\n\n# Add comments\nprint(\"3. Adding comments...\")\nadd_comment(bob.id, post1.id, \"Great tutorial!\")\nadd_comment(alice.id, post3.id, \"Very informative!\")\nprint(\"   Added comments\\n\")\n\n# Like and view posts\nprint(\"4. Liking and viewing posts...\")\nlike_post(post1.id)\nlike_post(post1.id)\nview_post(post1.id)\nview_post(post1.id)\nview_post(post1.id)\nprint(\"   Post 1: 2 likes, 3 views\\n\")\n\n# Query examples\nprint(\"5. Querying data...\")\n\nprint(\"   Alice's posts:\")\nfor post in get_user_posts(\"alice\"):\n    print(f\"     - {post.title} ({post.likes} likes, {post.views} views)\")\n\nprint(\"\\n   Posts with 'Python' tag:\")\nfor post in get_posts_by_tag(\"Python\"):\n    print(f\"     - {post.title} by {post.author.username}\")\n\nprint(\"\\n   Post 1 with comments:\")\npost = get_post_with_comments(post1.id)\nprint(f\"     Title: {post.title}\")\nprint(f\"     Comments:\")\nfor comment in post.comments:\n    print(f\"       - {comment.user.username}: {comment.content}\")\n\n# Statistics\nprint(\"\\n6. Statistics:\")\ntotal_users = session.query(User).count()\ntotal_posts = session.query(Post).count()\ntotal_comments = session.query(Comment).count()\nprint(f\"   Users: {total_users}\")\nprint(f\"   Posts: {total_posts}\")\nprint(f\"   Comments: {total_comments}\")\n```\n\n---\n\n### üè† Homework: E-commerce Database\n\n```python\n# homework15_ecommerce_orm.py\n\n# TODO: Create an e-commerce database with SQLAlchemy:\n\n# 1. Models:\n# - User (id, username, email, address, phone)\n# - Product (id, name, description, price, stock, category_id)\n# - Category (id, name, description)\n# - Order (id, user_id, total, status, created_at)\n# - OrderItem (id, order_id, product_id, quantity, price)\n\n# 2. Relationships:\n# - User has many Orders\n# - Order has many OrderItems\n# - Product belongs to Category\n# - Product has many OrderItems\n\n# 3. Functions:\n# - create_user()\n# - add_product()\n# - create_order()\n# - add_to_cart()\n# - get_user_orders()\n# - get_order_total()\n\n# Test with sample data!\n```\n\n---\n\n### üìù Key Takeaways\n\n‚úÖ ORM = Object-Relational Mapping\n‚úÖ SQLAlchemy = Popular Python ORM\n‚úÖ Models = Python classes representing tables\n‚úÖ `session.query()` for retrieving data\n‚úÖ `relationship()` defines relationships\n‚úÖ Cascade operations automatically handle related data\n\n---\n\n<a name=\"hour-16\"></a>\n## üìÖ Hour 16: NoSQL with MongoDB\n\n### üéØ Learning Objectives\n- Understand NoSQL vs SQL\n- Use MongoDB with Python\n- Perform CRUD operations\n- Work with embedded documents\n\n### üìñ What to Teach\n\n**\"NoSQL = Flexible document storage, like JSON files in a database!\"**\n\n---\n\n### 1Ô∏è‚É£ SQL vs NoSQL (10 minutes)\n\n**SQL (Relational):**\n\n```\nusers table:\nid | username | email\n1  | alice    | alice@email.com\n\nposts table:\nid | title    | user_id\n1  | Hello    | 1\n```\n\n**NoSQL (Document):**\n\n```json\n{\n  \"_id\": \"507f1f77bcf86cd799439011\",\n  \"username\": \"alice\",\n  \"email\": \"alice@email.com\",\n  \"posts\": [\n    {\n      \"title\": \"Hello\",\n      \"content\": \"First post\",\n      \"created_at\": \"2025-12-15\"\n    }\n  ]\n}\n```\n\n**When to use NoSQL:**\n- Flexible schema\n- Rapid development\n- Hierarchical data\n- Horizontal scaling\n\n---\n\n### 2Ô∏è‚É£ MongoDB with Python (20 minutes)\n\n**Install PyMongo:**\n\n```bash\npip install pymongo\n```\n\n**Connect to MongoDB:**\n\n```python\nfrom pymongo import MongoClient\nfrom datetime import datetime\n\n# Connect\nclient = MongoClient('mongodb://localhost:27017/')\n\n# Database\ndb = client['blog_db']\n\n# Collection (like table in SQL)\nusers = db['users']\nposts = db['posts']\n```\n\n**Insert Documents:**\n\n```python\n# Insert one\nuser = {\n    \"username\": \"alice\",\n    \"email\": \"alice@email.com\",\n    \"created_at\": datetime.utcnow()\n}\nresult = users.insert_one(user)\nprint(f\"Inserted ID: {result.inserted_id}\")\n\n# Insert many\nnew_users = [\n    {\"username\": \"bob\", \"email\": \"bob@email.com\"},\n    {\"username\": \"charlie\", \"email\": \"charlie@email.com\"}\n]\nresult = users.insert_many(new_users)\nprint(f\"Inserted IDs: {result.inserted_ids}\")\n```\n\n**Find Documents:**\n\n```python\n# Find one\nuser = users.find_one({\"username\": \"alice\"})\nprint(user)\n\n# Find all\nall_users = users.find()\nfor user in all_users:\n    print(user)\n\n# Find with filter\nactive_users = users.find({\"status\": \"active\"})\n\n# Find with projection (select specific fields)\nusers_names = users.find({}, {\"username\": 1, \"email\": 1, \"_id\": 0})\n\n# Count\ncount = users.count_documents({})\nprint(f\"Total users: {count}\")\n```\n\n**Update Documents:**\n\n```python\n# Update one\nusers.update_one(\n    {\"username\": \"alice\"},\n    {\"$set\": {\"email\": \"newemail@email.com\"}}\n)\n\n# Update many\nusers.update_many(\n    {\"status\": \"inactive\"},\n    {\"$set\": {\"status\": \"active\"}}\n)\n\n# Increment value\nposts.update_one(\n    {\"_id\": post_id},\n    {\"$inc\": {\"likes\": 1}}\n)\n\n# Add to array\nusers.update_one(\n    {\"username\": \"alice\"},\n    {\"$push\": {\"hobbies\": \"reading\"}}\n)\n```\n\n**Delete Documents:**\n\n```python\n# Delete one\nusers.delete_one({\"username\": \"alice\"})\n\n# Delete many\nusers.delete_many({\"status\": \"deleted\"})\n```\n\n---\n\n### 3Ô∏è‚É£ Embedded Documents (15 minutes)\n\n**Embedding Posts in User:**\n\n```python\n# Insert user with embedded posts\nuser_with_posts = {\n    \"username\": \"alice\",\n    \"email\": \"alice@email.com\",\n    \"posts\": [\n        {\n            \"title\": \"First Post\",\n            \"content\": \"Hello World\",\n            \"likes\": 10,\n            \"created_at\": datetime.utcnow()\n        },\n        {\n            \"title\": \"Second Post\",\n            \"content\": \"Another post\",\n            \"likes\": 5,\n            \"created_at\": datetime.utcnow()\n        }\n    ]\n}\n\nusers.insert_one(user_with_posts)\n\n# Query embedded documents\nuser = users.find_one({\"posts.title\": \"First Post\"})\n\n# Update embedded document\nusers.update_one(\n    {\"username\": \"alice\", \"posts.title\": \"First Post\"},\n    {\"$inc\": {\"posts.$.likes\": 1}}\n)\n```\n\n---\n\n### 4Ô∏è‚É£ Indexing and Aggregation (15 minutes)\n\n**Create Indexes:**\n\n```python\n# Single field index\nusers.create_index(\"username\")\n\n# Unique index\nusers.create_index(\"email\", unique=True)\n\n# Compound index\nposts.create_index([(\"author\", 1), (\"created_at\", -1)])\n\n# Text index for search\nposts.create_index([(\"title\", \"text\"), (\"content\", \"text\")])\n\n# Text search\nresults = posts.find({\"$text\": {\"$search\": \"python tutorial\"}})\n```\n\n**Aggregation:**\n\n```python\n# Group by and count\npipeline = [\n    {\"$group\": {\"_id\": \"$author\", \"post_count\": {\"$sum\": 1}}}\n]\nresult = posts.aggregate(pipeline)\n\n# Match, group, sort\npipeline = [\n    {\"$match\": {\"likes\": {\"$gt\": 10}}},\n    {\"$group\": {\"_id\": \"$author\", \"total_likes\": {\"$sum\": \"$likes\"}}},\n    {\"$sort\": {\"total_likes\": -1}}\n]\nresult = posts.aggregate(pipeline)\n```\n\n---\n\n### üíª Live Activity: MongoDB Blog\n\n**Create: hour16_mongodb_blog.py**\n\n```python\n\"\"\"\nMongoDB Blog System\n\"\"\"\n\nfrom pymongo import MongoClient\nfrom datetime import datetime\nfrom bson import ObjectId\n\nclass MongoBlog:\n    def __init__(self):\n        self.client = MongoClient('mongodb://localhost:27017/')\n        self.db = self.client['blog_db']\n        self.users = self.db['users']\n        self.posts = self.db['posts']\n        self.comments = self.db['comments']\n        \n        # Create indexes\n        self.users.create_index(\"username\", unique=True)\n        self.users.create_index(\"email\", unique=True)\n        self.posts.create_index([(\"title\", \"text\"), (\"content\", \"text\")])\n    \n    def create_user(self, username, email, bio=\"\"):\n        user = {\n            \"username\": username,\n            \"email\": email,\n            \"bio\": bio,\n            \"created_at\": datetime.utcnow()\n        }\n        result = self.users.insert_one(user)\n        return result.inserted_id\n    \n    def create_post(self, author_id, title, content, tags=None):\n        post = {\n            \"author_id\": ObjectId(author_id),\n            \"title\": title,\n            \"content\": content,\n            \"tags\": tags or [],\n            \"likes\": 0,\n            \"views\": 0,\n            \"created_at\": datetime.utcnow(),\n            \"updated_at\": datetime.utcnow()\n        }\n        result = self.posts.insert_one(post)\n        return result.inserted_id\n    \n    def add_comment(self, post_id, user_id, content):\n        comment = {\n            \"post_id\": ObjectId(post_id),\n            \"user_id\": ObjectId(user_id),\n            \"content\": content,\n            \"created_at\": datetime.utcnow()\n        }\n        result = self.comments.insert_one(comment)\n        return result.inserted_id\n    \n    def like_post(self, post_id):\n        self.posts.update_one(\n            {\"_id\": ObjectId(post_id)},\n            {\"$inc\": {\"likes\": 1}}\n        )\n    \n    def view_post(self, post_id):\n        self.posts.update_one(\n            {\"_id\": ObjectId(post_id)},\n            {\"$inc\": {\"views\": 1}}\n        )\n    \n    def get_user_posts(self, username):\n        user = self.users.find_one({\"username\": username})\n        if not user:\n            return []\n        \n        posts = self.posts.find({\"author_id\": user[\"_id\"]})\n        return list(posts)\n    \n    def get_post_with_author(self, post_id):\n        post = self.posts.find_one({\"_id\": ObjectId(post_id)})\n        if not post:\n            return None\n        \n        author = self.users.find_one({\"_id\": post[\"author_id\"]})\n        post[\"author\"] = author\n        return post\n    \n    def search_posts(self, keyword):\n        posts = self.posts.find(\n            {\"$text\": {\"$search\": keyword}},\n            {\"score\": {\"$meta\": \"textScore\"}}\n        ).sort([(\"score\", {\"$meta\": \"textScore\"})])\n        \n        return list(posts)\n    \n    def get_popular_posts(self, limit=10):\n        posts = self.posts.find().sort(\"likes\", -1).limit(limit)\n        return list(posts)\n    \n    def get_statistics(self):\n        return {\n            \"total_users\": self.users.count_documents({}),\n            \"total_posts\": self.posts.count_documents({}),\n            \"total_comments\": self.comments.count_documents({})\n        }\n\n# Demo\nprint(\"=== MONGODB BLOG DEMO ===\\n\")\n\nblog = MongoBlog()\n\n# Create users\nprint(\"1. Creating users...\")\nalice_id = blog.create_user(\"alice\", \"alice@email.com\", \"Python developer\")\nbob_id = blog.create_user(\"bob\", \"bob@email.com\", \"Data scientist\")\nprint(f\"   Created users\\n\")\n\n# Create posts\nprint(\"2. Creating posts...\")\npost1_id = blog.create_post(alice_id, \"Python Basics\", \"Learn Python\", [\"Python\", \"Tutorial\"])\npost2_id = blog.create_post(alice_id, \"Advanced Python\", \"Deep dive\", [\"Python\", \"Advanced\"])\npost3_id = blog.create_post(bob_id, \"Data Science\", \"Introduction\", [\"Data Science\"])\nprint(f\"   Created posts\\n\")\n\n# Add comments\nprint(\"3. Adding comments...\")\nblog.add_comment(post1_id, bob_id, \"Great tutorial!\")\nprint(\"   Added comment\\n\")\n\n# Like and view\nprint(\"4. Liking and viewing...\")\nblog.like_post(post1_id)\nblog.like_post(post1_id)\nblog.view_post(post1_id)\nprint(\"   Post liked and viewed\\n\")\n\n# Query\nprint(\"5. Queries:\")\nprint(\"   Alice's posts:\")\nfor post in blog.get_user_posts(\"alice\"):\n    print(f\"     - {post['title']}\")\n\nprint(\"\\n   Search 'Python':\")\nfor post in blog.search_posts(\"Python\"):\n    print(f\"     - {post['title']}\")\n\n# Statistics\nprint(\"\\n6. Statistics:\")\nstats = blog.get_statistics()\nfor key, value in stats.items():\n    print(f\"   {key}: {value}\")\n```\n\n---\n\n### üè† Homework: MongoDB E-commerce\n\n```python\n# homework16_mongodb_ecommerce.py\n\n# TODO: Build e-commerce system with MongoDB:\n\n# Collections:\n# - users (username, email, address, orders)\n# - products (name, description, price, stock, reviews)\n# - orders (user_id, items, total, status, created_at)\n\n# Embedded documents:\n# - User has embedded orders array\n# - Product has embedded reviews array\n\n# Functions:\n# - create_user()\n# - add_product()\n# - add_review(product_id, user_id, rating, comment)\n# - create_order(user_id, items)\n# - get_product_avg_rating()\n# - get_top_rated_products()\n\n# Use aggregation to calculate statistics!\n```\n\n---\n\n### üìù Key Takeaways\n\n‚úÖ NoSQL = flexible document storage\n‚úÖ MongoDB stores JSON-like documents\n‚úÖ PyMongo = Python MongoDB driver\n‚úÖ Embedded documents = nested data\n‚úÖ Aggregation = complex queries\n‚úÖ Indexes = improve query performance\n\n---\n\n<a name=\"hour-17\"></a>\n## üìÖ Hour 17: RESTful API Concepts\n\n### üéØ Learning Objectives\n- Understand REST principles\n- Learn HTTP methods (GET, POST, PUT, DELETE)\n- Master status codes\n- Design RESTful endpoints\n- Understand JSON responses\n\n### üìñ What to Teach\n\n**\"REST API = Way for applications to talk to each other over internet!\"**\n\n---\n\n### 1Ô∏è‚É£ What is REST API? (10 minutes)\n\n**Real-Life Analogy:**\n\n\"API = Menu at a restaurant\n- You (client) look at menu (API documentation)\n- You order food (make API request)\n- Kitchen (server) prepares food\n- Waiter brings food (API response)\"\n\n**REST Principles:**\n\n```\n1. Client-Server: Separate frontend and backend\n2. Stateless: Each request has all needed info\n3. Cacheable: Responses can be cached\n4. Uniform Interface: Standard methods (GET, POST, etc.)\n5. Layered System: Can have intermediate servers\n```\n\n---\n\n### 2Ô∏è‚É£ HTTP Methods (15 minutes)\n\n**CRUD Operations:**\n\n```\nCREATE  ‚Üí POST    ‚Üí Add new resource\nREAD    ‚Üí GET     ‚Üí Get resource(s)\nUPDATE  ‚Üí PUT     ‚Üí Update entire resource\nUPDATE  ‚Üí PATCH   ‚Üí Update part of resource\nDELETE  ‚Üí DELETE  ‚Üí Remove resource\n```\n\n**Examples:**\n\n```python\n# GET - Retrieve data\nGET /api/users           # Get all users\nGET /api/users/1         # Get user with ID 1\nGET /api/users/1/posts   # Get posts by user 1\n\n# POST - Create new data\nPOST /api/users          # Create new user\n{\n    \"username\": \"alice\",\n    \"email\": \"alice@email.com\"\n}\n\n# PUT - Replace entire resource\nPUT /api/users/1         # Update user 1 completely\n{\n    \"username\": \"alice_updated\",\n    \"email\": \"newemail@email.com\",\n    \"bio\": \"Updated bio\"\n}\n\n# PATCH - Update specific fields\nPATCH /api/users/1       # Update specific fields\n{\n    \"email\": \"newemail@email.com\"\n}\n\n# DELETE - Remove resource\nDELETE /api/users/1      # Delete user 1\n```\n\n---\n\n### 3Ô∏è‚É£ HTTP Status Codes (15 minutes)\n\n**Status Code Categories:**\n\n```\n1xx: Informational\n2xx: Success ‚úÖ\n3xx: Redirection\n4xx: Client Error ‚ùå\n5xx: Server Error üí•\n```\n\n**Common Status Codes:**\n\n```python\n# Success (2xx)\n200 OK                  # Successful GET, PUT, PATCH\n201 Created             # Successful POST\n204 No Content          # Successful DELETE\n\n# Client Errors (4xx)\n400 Bad Request         # Invalid data sent\n401 Unauthorized        # Not authenticated\n403 Forbidden           # Not authorized\n404 Not Found           # Resource doesn't exist\n409 Conflict            # Duplicate/conflict\n\n# Server Errors (5xx)\n500 Internal Server Error   # Server crashed\n502 Bad Gateway            # Upstream server error\n503 Service Unavailable    # Server down\n```\n\n---\n\n### 4Ô∏è‚É£ REST API Design (15 minutes)\n\n**Good API Design:**\n\n```\n‚úÖ GOOD:\nGET    /api/users              # Get all users\nGET    /api/users/123          # Get user 123\nPOST   /api/users              # Create user\nPUT    /api/users/123          # Update user 123\nDELETE /api/users/123          # Delete user 123\n\nGET    /api/users/123/posts    # Get user's posts\nPOST   /api/users/123/posts    # Create post for user\n\n‚ùå BAD:\nGET    /api/getAllUsers\nGET    /api/user?id=123\nPOST   /api/createUser\nGET    /api/deleteUser/123     # Should use DELETE!\n```\n\n**API Versioning:**\n\n```\nOption 1: URL Path\n/api/v1/users\n/api/v2/users\n\nOption 2: Header\nGET /api/users\nAccept: application/vnd.myapi.v1+json\n\nOption 3: Query Parameter\n/api/users?version=1\n```\n\n**Query Parameters:**\n\n```python\n# Filtering\nGET /api/posts?author=alice&status=published\n\n# Sorting\nGET /api/posts?sort=created_at&order=desc\n\n# Pagination\nGET /api/posts?page=2&limit=10\n\n# Search\nGET /api/posts?search=python\n\n# Fields selection\nGET /api/users?fields=username,email\n```\n\n---\n\n### 5Ô∏è‚É£ JSON Response Format (5 minutes)\n\n**Standard Response:**\n\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"username\": \"alice\",\n    \"email\": \"alice@email.com\"\n  },\n  \"message\": \"User retrieved successfully\"\n}\n```\n\n**List Response with Pagination:**\n\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\"id\": 1, \"username\": \"alice\"},\n    {\"id\": 2, \"username\": \"bob\"}\n  ],\n  \"pagination\": {\n    \"page\": 1,\n    \"limit\": 10,\n    \"total\": 50,\n    \"pages\": 5\n  }\n}\n```\n\n**Error Response:**\n\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Invalid email format\",\n    \"details\": {\n      \"email\": \"Must be a valid email address\"\n    }\n  }\n}\n```\n\n---\n\n### üíª Live Activity: API Documentation\n\n**Create: hour17_api_design.md**\n\n```markdown\n# Blog API Documentation\n\n## Base URL\n```\nhttps://api.myblog.com/v1\n```\n\n## Authentication\nAll endpoints require authentication header:\n```\nAuthorization: Bearer YOUR_TOKEN_HERE\n```\n\n---\n\n## Endpoints\n\n### Users\n\n#### Get All Users\n```\nGET /users\n```\n\n**Query Parameters:**\n- `page` (integer): Page number (default: 1)\n- `limit` (integer): Items per page (default: 10)\n- `sort` (string): Sort field (default: created_at)\n\n**Response (200 OK):**\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": 1,\n      \"username\": \"alice\",\n      \"email\": \"alice@email.com\",\n      \"created_at\": \"2025-12-15T10:30:00Z\"\n    }\n  ],\n  \"pagination\": {\n    \"page\": 1,\n    \"limit\": 10,\n    \"total\": 50\n  }\n}\n```\n\n---\n\n#### Get User by ID\n```\nGET /users/:id\n```\n\n**Response (200 OK):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"username\": \"alice\",\n    \"email\": \"alice@email.com\",\n    \"bio\": \"Python developer\",\n    \"created_at\": \"2025-12-15T10:30:00Z\"\n  }\n}\n```\n\n**Response (404 Not Found):**\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"USER_NOT_FOUND\",\n    \"message\": \"User with ID 1 not found\"\n  }\n}\n```\n\n---\n\n#### Create User\n```\nPOST /users\n```\n\n**Request Body:**\n```json\n{\n  \"username\": \"alice\",\n  \"email\": \"alice@email.com\",\n  \"password\": \"SecurePass123\"\n}\n```\n\n**Response (201 Created):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"username\": \"alice\",\n    \"email\": \"alice@email.com\",\n    \"created_at\": \"2025-12-15T10:30:00Z\"\n  },\n  \"message\": \"User created successfully\"\n}\n```\n\n**Response (400 Bad Request):**\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Validation failed\",\n    \"details\": {\n      \"email\": \"Email already exists\",\n      \"password\": \"Password must be at least 8 characters\"\n    }\n  }\n}\n```\n\n---\n\n#### Update User\n```\nPUT /users/:id\n```\n\n**Request Body:**\n```json\n{\n  \"username\": \"alice_updated\",\n  \"email\": \"newemail@email.com\",\n  \"bio\": \"Senior Python Developer\"\n}\n```\n\n**Response (200 OK):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"username\": \"alice_updated\",\n    \"email\": \"newemail@email.com\",\n    \"bio\": \"Senior Python Developer\",\n    \"updated_at\": \"2025-12-15T11:00:00Z\"\n  },\n  \"message\": \"User updated successfully\"\n}\n```\n\n---\n\n#### Delete User\n```\nDELETE /users/:id\n```\n\n**Response (204 No Content)**\n\n**Response (404 Not Found):**\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"USER_NOT_FOUND\",\n    \"message\": \"User with ID 1 not found\"\n  }\n}\n```\n\n---\n\n### Posts\n\n#### Get All Posts\n```\nGET /posts\n```\n\n**Query Parameters:**\n- `author` (integer): Filter by author ID\n- `tag` (string): Filter by tag\n- `search` (string): Search in title/content\n\n**Response (200 OK):**\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": 1,\n      \"title\": \"Python Basics\",\n      \"content\": \"Learn Python...\",\n      \"author\": {\n        \"id\": 1,\n        \"username\": \"alice\"\n      },\n      \"tags\": [\"Python\", \"Tutorial\"],\n      \"likes\": 42,\n      \"created_at\": \"2025-12-15T10:30:00Z\"\n    }\n  ]\n}\n```\n\n---\n\n#### Create Post\n```\nPOST /posts\n```\n\n**Request Body:**\n```json\n{\n  \"title\": \"Python Basics\",\n  \"content\": \"Learn Python fundamentals...\",\n  \"tags\": [\"Python\", \"Tutorial\"]\n}\n```\n\n**Response (201 Created):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"title\": \"Python Basics\",\n    \"content\": \"Learn Python fundamentals...\",\n    \"author_id\": 1,\n    \"tags\": [\"Python\", \"Tutorial\"],\n    \"created_at\": \"2025-12-15T10:30:00Z\"\n  },\n  \"message\": \"Post created successfully\"\n}\n```\n\n---\n\n#### Like Post\n```\nPOST /posts/:id/like\n```\n\n**Response (200 OK):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"likes\": 43\n  },\n  \"message\": \"Post liked successfully\"\n}\n```\n\n---\n\n## Error Codes\n\n| Code | Description |\n|------|-------------|\n| `VALIDATION_ERROR` | Invalid input data |\n| `AUTHENTICATION_ERROR` | Invalid or missing token |\n| `AUTHORIZATION_ERROR` | Insufficient permissions |\n| `NOT_FOUND` | Resource not found |\n| `DUPLICATE_ERROR` | Resource already exists |\n| `SERVER_ERROR` | Internal server error |\n\n---\n\n## Rate Limiting\n\n- **Rate Limit:** 100 requests per minute\n- **Headers:**\n  - `X-RateLimit-Limit`: Total allowed\n  - `X-RateLimit-Remaining`: Remaining requests\n  - `X-RateLimit-Reset`: Reset timestamp\n\n**Response (429 Too Many Requests):**\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"RATE_LIMIT_EXCEEDED\",\n    \"message\": \"Too many requests. Try again in 60 seconds\"\n  }\n}\n```\n```\n\n---\n\n### üè† Homework: Design Your API\n\n```markdown\n# homework17_api_design.md\n\n# TODO: Design a complete REST API for an e-commerce system\n\n## Requirements:\n\n### Resources:\n1. Users (authentication, profile)\n2. Products (CRUD operations)\n3. Categories (product categories)\n4. Cart (shopping cart)\n5. Orders (purchase orders)\n6. Reviews (product reviews)\n\n### Design:\n- List all endpoints\n- Specify HTTP methods\n- Define request/response formats\n- Include error responses\n- Add pagination for lists\n- Include filtering/sorting\n- Define status codes\n\n### Example Format:\n```\nGET /api/products\nPOST /api/products\nGET /api/products/:id\nPUT /api/products/:id\nDELETE /api/products/:id\nPOST /api/products/:id/reviews\n```\n\nWrite complete API documentation!\n```\n\n---\n\n### üìù Key Takeaways\n\n‚úÖ REST = Representational State Transfer\n‚úÖ HTTP Methods: GET, POST, PUT, PATCH, DELETE\n‚úÖ Status Codes: 2xx success, 4xx client error, 5xx server error\n‚úÖ URL structure: `/api/resource/:id`\n‚úÖ JSON = standard response format\n‚úÖ Good API design = predictable and consistent\n\n---\n\n<a name=\"hour-18\"></a>\n## üìÖ Hour 18: Flask Part 1 - Basics\n\n### üéØ Learning Objectives\n- Set up Flask application\n- Create routes and endpoints\n- Handle request/response\n- Use templates (Jinja2)\n- Build a simple blog API\n\n### üìñ What to Teach\n\n**\"Flask = Lightweight web framework for Python!\"**\n\n---\n\n### 1Ô∏è‚É£ Flask Setup (10 minutes)\n\n**Install Flask:**\n\n```bash\npip install flask\n```\n\n**Basic Flask App:**\n\n```python\n# app.py\nfrom flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\ndef home():\n    return \"Hello, Flask!\"\n\nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\n**Run:**\n\n```bash\npython app.py\n# Visit: http://localhost:5000\n```\n\n---\n\n### 2Ô∏è‚É£ Routes and Methods (15 minutes)\n\n**Different HTTP Methods:**\n\n```python\nfrom flask import Flask, request, jsonify\n\napp = Flask(__name__)\n\n# GET request\n@app.route('/users', methods=['GET'])\ndef get_users():\n    users = [\n        {\"id\": 1, \"name\": \"Alice\"},\n        {\"id\": 2, \"name\": \"Bob\"}\n    ]\n    return jsonify(users)\n\n# POST request\n@app.route('/users', methods=['POST'])\ndef create_user():\n    data = request.json\n    # Process data\n    return jsonify({\"message\": \"User created\", \"data\": data}), 201\n\n# GET with URL parameter\n@app.route('/users/<int:user_id>', methods=['GET'])\ndef get_user(user_id):\n    user = {\"id\": user_id, \"name\": \"Alice\"}\n    return jsonify(user)\n\n# PUT request\n@app.route('/users/<int:user_id>', methods=['PUT'])\ndef update_user(user_id):\n    data = request.json\n    return jsonify({\"message\": f\"User {user_id} updated\", \"data\": data})\n\n# DELETE request\n@app.route('/users/<int:user_id>', methods=['DELETE'])\ndef delete_user(user_id):\n    return jsonify({\"message\": f\"User {user_id} deleted\"}), 204\n\nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\n---\n\n### 3Ô∏è‚É£ Request Handling (15 minutes)\n\n**Query Parameters:**\n\n```python\n# GET /search?q=python&page=1\n@app.route('/search')\ndef search():\n    query = request.args.get('q', '')\n    page = request.args.get('page', 1, type=int)\n    \n    return jsonify({\n        \"query\": query,\n        \"page\": page,\n        \"results\": []\n    })\n```\n\n**JSON Request Body:**\n\n```python\n@app.route('/login', methods=['POST'])\ndef login():\n    data = request.json\n    username = data.get('username')\n    password = data.get('password')\n    \n    # Validate\n    if not username or not password:\n        return jsonify({\"error\": \"Missing credentials\"}), 400\n    \n    # Check credentials (simplified)\n    if username == \"admin\" and password == \"password\":\n        return jsonify({\"message\": \"Login successful\"})\n    else:\n        return jsonify({\"error\": \"Invalid credentials\"}), 401\n```\n\n**Form Data:**\n\n```python\n@app.route('/upload', methods=['POST'])\ndef upload():\n    # Form data\n    title = request.form.get('title')\n    \n    # File upload\n    file = request.files.get('file')\n    if file:\n        file.save(f'uploads/{file.filename}')\n        return jsonify({\"message\": \"File uploaded\"})\n    \n    return jsonify({\"error\": \"No file provided\"}), 400\n```\n\n---\n\n### 4Ô∏è‚É£ Response Types (10 minutes)\n\n**JSON Response:**\n\n```python\nfrom flask import jsonify\n\n@app.route('/api/data')\ndef get_data():\n    data = {\"name\": \"Alice\", \"age\": 25}\n    return jsonify(data)\n```\n\n**Custom Status Code:**\n\n```python\n@app.route('/api/users', methods=['POST'])\ndef create_user():\n    return jsonify({\"message\": \"Created\"}), 201\n```\n\n**HTML Response:**\n\n```python\n@app.route('/page')\ndef page():\n    html = \"\"\"\n    <html>\n        <body>\n            <h1>Hello from Flask!</h1>\n        </body>\n    </html>\n    \"\"\"\n    return html\n```\n\n**Redirect:**\n\n```python\nfrom flask import redirect, url_for\n\n@app.route('/old-page')\ndef old_page():\n    return redirect(url_for('new_page'))\n\n@app.route('/new-page')\ndef new_page():\n    return \"This is the new page!\"\n```\n\n---\n\n### 5Ô∏è‚É£ Templates with Jinja2 (10 minutes)\n\n**Project Structure:**\n\n```\nflask_app/\n‚îú‚îÄ‚îÄ app.py\n‚îú‚îÄ‚îÄ templates/\n‚îÇ   ‚îú‚îÄ‚îÄ base.html\n‚îÇ   ‚îî‚îÄ‚îÄ index.html\n‚îî‚îÄ‚îÄ static/\n    ‚îú‚îÄ‚îÄ css/\n    ‚îî‚îÄ‚îÄ js/\n```\n\n**base.html:**\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>{% block title %}My App{% endblock %}</title>\n</head>\n<body>\n    <nav>\n        <a href=\"/\">Home</a>\n        <a href=\"/about\">About</a>\n    </nav>\n    \n    <main>\n        {% block content %}{% endblock %}\n    </main>\n    \n    <footer>\n        <p>&copy; 2025 My App</p>\n    </footer>\n</body>\n</html>\n```\n\n**index.html:**\n\n```html\n{% extends \"base.html\" %}\n\n{% block title %}Home - My App{% endblock %}\n\n{% block content %}\n<h1>Welcome, {{ username }}!</h1>\n\n<ul>\n    {% for item in items %}\n    <li>{{ item }}</li>\n    {% endfor %}\n</ul>\n\n{% if show_message %}\n<p>This is a message!</p>\n{% endif %}\n{% endblock %}\n```\n\n**Using Templates:**\n\n```python\nfrom flask import render_template\n\n@app.route('/')\ndef index():\n    return render_template('index.html', \n                         username='Alice',\n                         items=['Python', 'Flask', 'Jinja2'],\n                         show_message=True)\n```\n\n---\n\n### üíª Live Activity: Blog API\n\n**Create: hour18_blog_api.py**\n\n```python\n\"\"\"\nSimple Blog API with Flask\n\"\"\"\n\nfrom flask import Flask, request, jsonify\nfrom datetime import datetime\n\napp = Flask(__name__)\n\n# In-memory data storage\nusers = {}\nposts = {}\ncomments = {}\n\nuser_id_counter = 1\npost_id_counter = 1\ncomment_id_counter = 1\n\n# Helper function\ndef find_user_by_username(username):\n    for user in users.values():\n        if user['username'] == username:\n            return user\n    return None\n\n# Users endpoints\n@app.route('/api/users', methods=['GET'])\ndef get_users():\n    return jsonify({\n        \"success\": True,\n        \"data\": list(users.values())\n    })\n\n@app.route('/api/users/<int:user_id>', methods=['GET'])\ndef get_user(user_id):\n    user = users.get(user_id)\n    if not user:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"User not found\"\n        }), 404\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": user\n    })\n\n@app.route('/api/users', methods=['POST'])\ndef create_user():\n    global user_id_counter\n    \n    data = request.json\n    username = data.get('username')\n    email = data.get('email')\n    \n    # Validation\n    if not username or not email:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Username and email required\"\n        }), 400\n    \n    # Check duplicate\n    if find_user_by_username(username):\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Username already exists\"\n        }), 409\n    \n    # Create user\n    user = {\n        \"id\": user_id_counter,\n        \"username\": username,\n        \"email\": email,\n        \"bio\": data.get('bio', ''),\n        \"created_at\": datetime.utcnow().isoformat()\n    }\n    \n    users[user_id_counter] = user\n    user_id_counter += 1\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": user,\n        \"message\": \"User created successfully\"\n    }), 201\n\n# Posts endpoints\n@app.route('/api/posts', methods=['GET'])\ndef get_posts():\n    # Query parameters\n    author_id = request.args.get('author_id', type=int)\n    \n    filtered_posts = list(posts.values())\n    \n    if author_id:\n        filtered_posts = [p for p in filtered_posts if p['author_id'] == author_id]\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": filtered_posts\n    })\n\n@app.route('/api/posts/<int:post_id>', methods=['GET'])\ndef get_post(post_id):\n    post = posts.get(post_id)\n    if not post:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Post not found\"\n        }), 404\n    \n    # Add author info\n    author = users.get(post['author_id'])\n    post['author'] = author\n    \n    # Add comments\n    post_comments = [c for c in comments.values() if c['post_id'] == post_id]\n    post['comments'] = post_comments\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": post\n    })\n\n@app.route('/api/posts', methods=['POST'])\ndef create_post():\n    global post_id_counter\n    \n    data = request.json\n    author_id = data.get('author_id')\n    title = data.get('title')\n    content = data.get('content')\n    \n    # Validation\n    if not all([author_id, title, content]):\n        return jsonify({\n            \"success\": False,\n            \"error\": \"author_id, title, and content required\"\n        }), 400\n    \n    if author_id not in users:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Author not found\"\n        }), 404\n    \n    # Create post\n    post = {\n        \"id\": post_id_counter,\n        \"author_id\": author_id,\n        \"title\": title,\n        \"content\": content,\n        \"tags\": data.get('tags', []),\n        \"likes\": 0,\n        \"views\": 0,\n        \"created_at\": datetime.utcnow().isoformat()\n    }\n    \n    posts[post_id_counter] = post\n    post_id_counter += 1\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": post,\n        \"message\": \"Post created successfully\"\n    }), 201\n\n@app.route('/api/posts/<int:post_id>', methods=['PUT'])\ndef update_post(post_id):\n    post = posts.get(post_id)\n    if not post:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Post not found\"\n        }), 404\n    \n    data = request.json\n    post['title'] = data.get('title', post['title'])\n    post['content'] = data.get('content', post['content'])\n    post['tags'] = data.get('tags', post['tags'])\n    post['updated_at'] = datetime.utcnow().isoformat()\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": post,\n        \"message\": \"Post updated successfully\"\n    })\n\n@app.route('/api/posts/<int:post_id>', methods=['DELETE'])\ndef delete_post(post_id):\n    if post_id not in posts:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Post not found\"\n        }), 404\n    \n    del posts[post_id]\n    \n    return '', 204\n\n@app.route('/api/posts/<int:post_id>/like', methods=['POST'])\ndef like_post(post_id):\n    post = posts.get(post_id)\n    if not post:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Post not found\"\n        }), 404\n    \n    post['likes'] += 1\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": {\"id\": post_id, \"likes\": post['likes']},\n        \"message\": \"Post liked successfully\"\n    })\n\n# Comments endpoints\n@app.route('/api/comments', methods=['POST'])\ndef create_comment():\n    global comment_id_counter\n    \n    data = request.json\n    post_id = data.get('post_id')\n    user_id = data.get('user_id')\n    content = data.get('content')\n    \n    # Validation\n    if not all([post_id, user_id, content]):\n        return jsonify({\n            \"success\": False,\n            \"error\": \"post_id, user_id, and content required\"\n        }), 400\n    \n    if post_id not in posts:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Post not found\"\n        }), 404\n    \n    if user_id not in users:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"User not found\"\n        }), 404\n    \n    # Create comment\n    comment = {\n        \"id\": comment_id_counter,\n        \"post_id\": post_id,\n        \"user_id\": user_id,\n        \"content\": content,\n        \"created_at\": datetime.utcnow().isoformat()\n    }\n    \n    comments[comment_id_counter] = comment\n    comment_id_counter += 1\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": comment,\n        \"message\": \"Comment created successfully\"\n    }), 201\n\n# Statistics endpoint\n@app.route('/api/stats', methods=['GET'])\ndef get_stats():\n    return jsonify({\n        \"success\": True,\n        \"data\": {\n            \"total_users\": len(users),\n            \"total_posts\": len(posts),\n            \"total_comments\": len(comments)\n        }\n    })\n\nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\n**Test with curl or Postman:**\n\n```bash\n# Create user\ncurl -X POST http://localhost:5000/api/users \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\":\"alice\",\"email\":\"alice@email.com\"}'\n\n# Create post\ncurl -X POST http://localhost:5000/api/posts \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"author_id\":1,\"title\":\"Hello\",\"content\":\"First post\"}'\n\n# Get all posts\ncurl http://localhost:5000/api/posts\n```\n\n---\n\n### üè† Homework: Flask TODO API\n\n```python\n# homework18_todo_api.py\n\n# TODO: Create a TODO list API with Flask\n\n# Endpoints:\n# GET    /api/todos           - Get all todos\n# POST   /api/todos           - Create todo\n# GET    /api/todos/:id       - Get todo\n# PUT    /api/todos/:id       - Update todo\n# DELETE /api/todos/:id       - Delete todo\n# PATCH  /api/todos/:id/complete - Mark as complete\n\n# Todo structure:\n# {\n#   \"id\": 1,\n#   \"title\": \"Buy groceries\",\n#   \"description\": \"Milk, bread, eggs\",\n#   \"completed\": false,\n#   \"priority\": \"high\",  # low/medium/high\n#   \"due_date\": \"2025-12-20\",\n#   \"created_at\": \"2025-12-15T10:30:00Z\"\n# }\n\n# Add query parameters for filtering:\n# - ?completed=true\n# - ?priority=high\n# - ?sort=due_date\n\n# Test all endpoints!\n```\n\n---\n\n### üìù Key Takeaways\n\n‚úÖ Flask = lightweight Python web framework\n‚úÖ `@app.route()` defines endpoints\n‚úÖ `request.json` gets JSON data\n‚úÖ `jsonify()` returns JSON response\n‚úÖ Status codes indicate success/failure\n‚úÖ Templates with Jinja2 for HTML\n\n---\n\n<a name=\"hour-19\"></a>\n## üìÖ Hour 19: Flask Part 2 - Advanced Features\n\n### üéØ Learning Objectives\n- Use Flask Blueprints\n- Handle file uploads\n- Implement error handling\n- Add request validation\n- Use Flask extensions\n\n### üìñ What to Teach\n\n**\"Advanced Flask = building production-ready applications!\"**\n\n---\n\n### 1Ô∏è‚É£ Flask Blueprints (15 minutes)\n\n**Why Blueprints?**\n\n\"Blueprints = Organize large apps into smaller modules\"\n\n**Project Structure:**\n\n```\nflask_app/\n‚îú‚îÄ‚îÄ app.py\n‚îú‚îÄ‚îÄ config.py\n‚îú‚îÄ‚îÄ api/\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ users.py\n‚îÇ   ‚îú‚îÄ‚îÄ posts.py\n‚îÇ   ‚îî‚îÄ‚îÄ auth.py\n‚îî‚îÄ‚îÄ models/\n    ‚îú‚îÄ‚îÄ __init__.py\n    ‚îú‚îÄ‚îÄ user.py\n    ‚îî‚îÄ‚îÄ post.py\n```\n\n**api/users.py:**\n\n```python\nfrom flask import Blueprint, request, jsonify\n\nusers_bp = Blueprint('users', __name__, url_prefix='/api/users')\n\n# In-memory storage\nusers = {}\nuser_id_counter = 1\n\n@users_bp.route('', methods=['GET'])\ndef get_users():\n    return jsonify({\"success\": True, \"data\": list(users.values())})\n\n@users_bp.route('/<int:user_id>', methods=['GET'])\ndef get_user(user_id):\n    user = users.get(user_id)\n    if not user:\n        return jsonify({\"success\": False, \"error\": \"User not found\"}), 404\n    return jsonify({\"success\": True, \"data\": user})\n\n@users_bp.route('', methods=['POST'])\ndef create_user():\n    global user_id_counter\n    data = request.json\n    \n    user = {\n        \"id\": user_id_counter,\n        \"username\": data['username'],\n        \"email\": data['email']\n    }\n    \n    users[user_id_counter] = user\n    user_id_counter += 1\n    \n    return jsonify({\"success\": True, \"data\": user}), 201\n```\n\n**api/posts.py:**\n\n```python\nfrom flask import Blueprint, request, jsonify\n\nposts_bp = Blueprint('posts', __name__, url_prefix='/api/posts')\n\nposts = {}\npost_id_counter = 1\n\n@posts_bp.route('', methods=['GET'])\ndef get_posts():\n    return jsonify({\"success\": True, \"data\": list(posts.values())})\n\n@posts_bp.route('', methods=['POST'])\ndef create_post():\n    global post_id_counter\n    data = request.json\n    \n    post = {\n        \"id\": post_id_counter,\n        \"title\": data['title'],\n        \"content\": data['content'],\n        \"author_id\": data['author_id']\n    }\n    \n    posts[post_id_counter] = post\n    post_id_counter += 1\n    \n    return jsonify({\"success\": True, \"data\": post}), 201\n```\n\n**app.py:**\n\n```python\nfrom flask import Flask\nfrom api.users import users_bp\nfrom api.posts import posts_bp\n\napp = Flask(__name__)\n\n# Register blueprints\napp.register_blueprint(users_bp)\napp.register_blueprint(posts_bp)\n\n@app.route('/')\ndef home():\n    return {\"message\": \"Welcome to Blog API\"}\n\nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\n---\n\n### 2Ô∏è‚É£ Error Handling (15 minutes)\n\n**Global Error Handlers:**\n\n```python\nfrom flask import Flask, jsonify\n\napp = Flask(__name__)\n\n@app.errorhandler(404)\ndef not_found(error):\n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"NOT_FOUND\",\n            \"message\": \"Resource not found\"\n        }\n    }), 404\n\n@app.errorhandler(400)\ndef bad_request(error):\n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"BAD_REQUEST\",\n            \"message\": \"Invalid request data\"\n        }\n    }), 400\n\n@app.errorhandler(500)\ndef internal_error(error):\n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"INTERNAL_ERROR\",\n            \"message\": \"Something went wrong\"\n        }\n    }), 500\n\n@app.errorhandler(Exception)\ndef handle_exception(error):\n    # Log the error\n    app.logger.error(f\"Unhandled exception: {error}\")\n    \n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"SERVER_ERROR\",\n            \"message\": \"An unexpected error occurred\"\n        }\n    }), 500\n```\n\n**Custom Exceptions:**\n\n```python\nclass ValidationError(Exception):\n    def __init__(self, message, details=None):\n        self.message = message\n        self.details = details or {}\n\nclass NotFoundError(Exception):\n    def __init__(self, resource, resource_id):\n        self.message = f\"{resource} with ID {resource_id} not found\"\n\n@app.errorhandler(ValidationError)\ndef handle_validation_error(error):\n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"VALIDATION_ERROR\",\n            \"message\": error.message,\n            \"details\": error.details\n        }\n    }), 400\n\n@app.errorhandler(NotFoundError)\ndef handle_not_found_error(error):\n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"NOT_FOUND\",\n            \"message\": error.message\n        }\n    }), 404\n\n# Usage in routes\n@app.route('/api/users/<int:user_id>')\ndef get_user(user_id):\n    user = users.get(user_id)\n    if not user:\n        raise NotFoundError(\"User\", user_id)\n    return jsonify({\"success\": True, \"data\": user})\n```\n\n---\n\n### 3Ô∏è‚É£ Request Validation (15 minutes)\n\n**Manual Validation:**\n\n```python\nfrom flask import request, jsonify\n\ndef validate_user_data(data):\n    errors = {}\n    \n    # Username validation\n    if 'username' not in data:\n        errors['username'] = \"Username is required\"\n    elif len(data['username']) < 3:\n        errors['username'] = \"Username must be at least 3 characters\"\n    \n    # Email validation\n    if 'email' not in data:\n        errors['email'] = \"Email is required\"\n    elif '@' not in data['email']:\n        errors['email'] = \"Invalid email format\"\n    \n    # Password validation\n    if 'password' in data:\n        password = data['password']\n        if len(password) < 8:\n            errors['password'] = \"Password must be at least 8 characters\"\n        if not any(c.isupper() for c in password):\n            errors['password'] = \"Password must contain uppercase letter\"\n        if not any(c.isdigit() for c in password):\n            errors['password'] = \"Password must contain a number\"\n    \n    return errors\n\n@app.route('/api/users', methods=['POST'])\ndef create_user():\n    data = request.json\n    \n    # Validate\n    errors = validate_user_data(data)\n    if errors:\n        return jsonify({\n            \"success\": False,\n            \"error\": {\n                \"code\": \"VALIDATION_ERROR\",\n                \"message\": \"Validation failed\",\n                \"details\": errors\n            }\n        }), 400\n    \n    # Create user...\n    return jsonify({\"success\": True, \"message\": \"User created\"}), 201\n```\n\n**Using Flask-Pydantic (Better Way):**\n\n```bash\npip install flask-pydantic\n```\n\n```python\nfrom flask import Flask\nfrom flask_pydantic import validate\nfrom pydantic import BaseModel, EmailStr, validator\n\napp = Flask(__name__)\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n    password: str\n    \n    @validator('username')\n    def username_min_length(cls, v):\n        if len(v) < 3:\n            raise ValueError('Username must be at least 3 characters')\n        return v\n    \n    @validator('password')\n    def password_strength(cls, v):\n        if len(v) < 8:\n            raise ValueError('Password must be at least 8 characters')\n        if not any(c.isupper() for c in v):\n            raise ValueError('Password must contain uppercase letter')\n        if not any(c.isdigit() for c in v):\n            raise ValueError('Password must contain a number')\n        return v\n\n@app.route('/api/users', methods=['POST'])\n@validate()\ndef create_user(body: UserCreate):\n    # body is automatically validated!\n    return {\"success\": True, \"data\": body.dict()}\n```\n\n---\n\n### 4Ô∏è‚É£ File Upload (10 minutes)\n\n```python\nfrom flask import Flask, request, jsonify\nfrom werkzeug.utils import secure_filename\nimport os\n\napp = Flask(__name__)\napp.config['UPLOAD_FOLDER'] = 'uploads'\napp.config['MAX_CONTENT_LENGTH'] = 16 * 1024 * 1024  # 16MB max\n\nALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif', 'pdf'}\n\ndef allowed_file(filename):\n    return '.' in filename and \\\n           filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\n\n@app.route('/api/upload', methods=['POST'])\ndef upload_file():\n    # Check if file is present\n    if 'file' not in request.files:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"No file provided\"\n        }), 400\n    \n    file = request.files['file']\n    \n    # Check if filename is empty\n    if file.filename == '':\n        return jsonify({\n            \"success\": False,\n            \"error\": \"No file selected\"\n        }), 400\n    \n    # Validate file type\n    if not allowed_file(file.filename):\n        return jsonify({\n            \"success\": False,\n            \"error\": \"File type not allowed\"\n        }), 400\n    \n    # Save file\n    filename = secure_filename(file.filename)\n    filepath = os.path.join(app.config['UPLOAD_FOLDER'], filename)\n    file.save(filepath)\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": {\n            \"filename\": filename,\n            \"path\": filepath\n        },\n        \"message\": \"File uploaded successfully\"\n    }), 201\n\n@app.route('/api/upload-multiple', methods=['POST'])\ndef upload_multiple():\n    files = request.files.getlist('files')\n    \n    uploaded_files = []\n    \n    for file in files:\n        if file and allowed_file(file.filename):\n            filename = secure_filename(file.filename)\n            filepath = os.path.join(app.config['UPLOAD_FOLDER'], filename)\n            file.save(filepath)\n            uploaded_files.append(filename)\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": {\"files\": uploaded_files},\n        \"message\": f\"{len(uploaded_files)} files uploaded\"\n    }), 201\n```\n\n---\n\n### 5Ô∏è‚É£ CORS and Security (5 minutes)\n\n**Enable CORS:**\n\n```bash\npip install flask-cors\n```\n\n```python\nfrom flask import Flask\nfrom flask_cors import CORS\n\napp = Flask(__name__)\nCORS(app)  # Enable CORS for all routes\n\n# Or specific routes\n@app.route('/api/public')\n@cross_origin()\ndef public_api():\n    return {\"message\": \"Public API\"}\n```\n\n**Security Headers:**\n\n```python\n@app.after_request\ndef add_security_headers(response):\n    response.headers['X-Content-Type-Options'] = 'nosniff'\n    response.headers['X-Frame-Options'] = 'DENY'\n    response.headers['X-XSS-Protection'] = '1; mode=block'\n    response.headers['Strict-Transport-Security'] = 'max-age=31536000; includeSubDomains'\n    return response\n```\n\n---\n\n### üíª Live Activity: Production-Ready Blog API\n\n**Create: hour19_production_blog.py**\n\n```python\n\"\"\"\nProduction-Ready Blog API with Flask\nIncludes: Blueprints, Error Handling, Validation, File Upload\n\"\"\"\n\nfrom flask import Flask, request, jsonify\nfrom flask_cors import CORS\nfrom werkzeug.utils import secure_filename\nfrom pydantic import BaseModel, EmailStr, validator\nfrom datetime import datetime\nimport os\n\n# Initialize Flask\napp = Flask(__name__)\napp.config['UPLOAD_FOLDER'] = 'uploads'\napp.config['MAX_CONTENT_LENGTH'] = 16 * 1024 * 1024\nCORS(app)\n\n# Ensure upload folder exists\nos.makedirs(app.config['UPLOAD_FOLDER'], exist_ok=True)\n\n# In-memory storage\nusers = {}\nposts = {}\nuser_id_counter = 1\npost_id_counter = 1\n\n# Pydantic models for validation\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n    password: str\n    bio: str = \"\"\n    \n    @validator('username')\n    def username_validation(cls, v):\n        if len(v) < 3:\n            raise ValueError('Username must be at least 3 characters')\n        if not v.isalnum():\n            raise ValueError('Username must be alphanumeric')\n        return v\n    \n    @validator('password')\n    def password_validation(cls, v):\n        if len(v) < 8:\n            raise ValueError('Password must be at least 8 characters')\n        return v\n\nclass PostCreate(BaseModel):\n    title: str\n    content: str\n    author_id: int\n    tags: list = []\n    \n    @validator('title')\n    def title_validation(cls, v):\n        if len(v) < 5:\n            raise ValueError('Title must be at least 5 characters')\n        return v\n    \n    @validator('content')\n    def content_validation(cls, v):\n        if len(v) < 10:\n            raise ValueError('Content must be at least 10 characters')\n        return v\n\n# Custom exceptions\nclass ValidationError(Exception):\n    def __init__(self, message, details=None):\n        self.message = message\n        self.details = details or {}\n\nclass NotFoundError(Exception):\n    def __init__(self, resource, resource_id):\n        self.message = f\"{resource} with ID {resource_id} not found\"\n\nclass DuplicateError(Exception):\n    def __init__(self, field, value):\n        self.message = f\"{field} '{value}' already exists\"\n\n# Error handlers\n@app.errorhandler(ValidationError)\ndef handle_validation_error(error):\n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"VALIDATION_ERROR\",\n            \"message\": error.message,\n            \"details\": error.details\n        }\n    }), 400\n\n@app.errorhandler(NotFoundError)\ndef handle_not_found(error):\n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"NOT_FOUND\",\n            \"message\": error.message\n        }\n    }), 404\n\n@app.errorhandler(DuplicateError)\ndef handle_duplicate(error):\n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"DUPLICATE_ERROR\",\n            \"message\": error.message\n        }\n    }), 409\n\n@app.errorhandler(404)\ndef not_found(error):\n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"NOT_FOUND\",\n            \"message\": \"Endpoint not found\"\n        }\n    }), 404\n\n@app.errorhandler(500)\ndef internal_error(error):\n    app.logger.error(f\"Internal error: {error}\")\n    return jsonify({\n        \"success\": False,\n        \"error\": {\n            \"code\": \"INTERNAL_ERROR\",\n            \"message\": \"Something went wrong\"\n        }\n    }), 500\n\n# Helper functions\ndef find_user_by_username(username):\n    for user in users.values():\n        if user['username'] == username:\n            return user\n    return None\n\n# Routes\n@app.route('/')\ndef home():\n    return jsonify({\n        \"message\": \"Blog API v1.0\",\n        \"endpoints\": {\n            \"users\": \"/api/users\",\n            \"posts\": \"/api/posts\",\n            \"upload\": \"/api/upload\"\n        }\n    })\n\n# User routes\n@app.route('/api/users', methods=['POST'])\ndef create_user():\n    global user_id_counter\n    \n    try:\n        data = request.json\n        user_data = UserCreate(**data)\n    except Exception as e:\n        raise ValidationError(\"Invalid user data\", {\"details\": str(e)})\n    \n    # Check duplicate username\n    if find_user_by_username(user_data.username):\n        raise DuplicateError(\"Username\", user_data.username)\n    \n    # Create user\n    user = {\n        \"id\": user_id_counter,\n        \"username\": user_data.username,\n        \"email\": user_data.email,\n        \"bio\": user_data.bio,\n        \"avatar_url\": None,\n        \"created_at\": datetime.utcnow().isoformat()\n    }\n    \n    users[user_id_counter] = user\n    user_id_counter += 1\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": user,\n        \"message\": \"User created successfully\"\n    }), 201\n\n@app.route('/api/users/<int:user_id>', methods=['GET'])\ndef get_user(user_id):\n    user = users.get(user_id)\n    if not user:\n        raise NotFoundError(\"User\", user_id)\n    return jsonify({\"success\": True, \"data\": user})\n\n@app.route('/api/users/<int:user_id>/avatar', methods=['POST'])\ndef upload_avatar(user_id):\n    user = users.get(user_id)\n    if not user:\n        raise NotFoundError(\"User\", user_id)\n    \n    if 'avatar' not in request.files:\n        raise ValidationError(\"No avatar file provided\")\n    \n    file = request.files['avatar']\n    \n    if file.filename == '':\n        raise ValidationError(\"No file selected\")\n    \n    # Validate file type\n    allowed_extensions = {'png', 'jpg', 'jpeg', 'gif'}\n    if not ('.' in file.filename and file.filename.rsplit('.', 1)[1].lower() in allowed_extensions):\n        raise ValidationError(\"Invalid file type. Allowed: png, jpg, jpeg, gif\")\n    \n    # Save file\n    filename = f\"avatar_{user_id}_{secure_filename(file.filename)}\"\n    filepath = os.path.join(app.config['UPLOAD_FOLDER'], filename)\n    file.save(filepath)\n    \n    # Update user\n    user['avatar_url'] = f\"/uploads/{filename}\"\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": {\"avatar_url\": user['avatar_url']},\n        \"message\": \"Avatar uploaded successfully\"\n    })\n\n# Post routes\n@app.route('/api/posts', methods=['POST'])\ndef create_post():\n    global post_id_counter\n    \n    try:\n        data = request.json\n        post_data = PostCreate(**data)\n    except Exception as e:\n        raise ValidationError(\"Invalid post data\", {\"details\": str(e)})\n    \n    # Verify author exists\n    if post_data.author_id not in users:\n        raise NotFoundError(\"Author\", post_data.author_id)\n    \n    # Create post\n    post = {\n        \"id\": post_id_counter,\n        \"title\": post_data.title,\n        \"content\": post_data.content,\n        \"author_id\": post_data.author_id,\n        \"tags\": post_data.tags,\n        \"likes\": 0,\n        \"views\": 0,\n        \"created_at\": datetime.utcnow().isoformat()\n    }\n    \n    posts[post_id_counter] = post\n    post_id_counter += 1\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": post,\n        \"message\": \"Post created successfully\"\n    }), 201\n\n@app.route('/api/posts', methods=['GET'])\ndef get_posts():\n    # Query parameters\n    author_id = request.args.get('author_id', type=int)\n    tag = request.args.get('tag')\n    \n    filtered_posts = list(posts.values())\n    \n    if author_id:\n        filtered_posts = [p for p in filtered_posts if p['author_id'] == author_id]\n    \n    if tag:\n        filtered_posts = [p for p in filtered_posts if tag in p['tags']]\n    \n    return jsonify({\"success\": True, \"data\": filtered_posts})\n\n@app.route('/api/posts/<int:post_id>', methods=['GET'])\ndef get_post(post_id):\n    post = posts.get(post_id)\n    if not post:\n        raise NotFoundError(\"Post\", post_id)\n    \n    # Increment views\n    post['views'] += 1\n    \n    # Add author info\n    author = users.get(post['author_id'])\n    post['author'] = author\n    \n    return jsonify({\"success\": True, \"data\": post})\n\n# Statistics\n@app.route('/api/stats', methods=['GET'])\ndef get_stats():\n    total_likes = sum(p['likes'] for p in posts.values())\n    total_views = sum(p['views'] for p in posts.values())\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": {\n            \"total_users\": len(users),\n            \"total_posts\": len(posts),\n            \"total_likes\": total_likes,\n            \"total_views\": total_views\n        }\n    })\n\nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\n---\n\n### üè† Homework: Complete E-commerce API\n\n```python\n# homework19_ecommerce_api.py\n\n# TODO: Build complete e-commerce API with:\n\n# 1. Blueprints:\n# - api/products.py\n# - api/cart.py\n# - api/orders.py\n# - api/auth.py\n\n# 2. Features:\n# - Product CRUD with image upload\n# - Shopping cart management\n# - Order placement\n# - User authentication\n# - Error handling\n# - Request validation (use Pydantic)\n# - CORS enabled\n\n# 3. Models:\n# - Product (name, price, stock, images)\n# - Cart (user_id, items)\n# - Order (user_id, items, total, status)\n\n# Test all endpoints with Postman!\n```\n\n---\n\n### üìù Key Takeaways\n\n‚úÖ Blueprints organize large apps\n‚úÖ Error handlers for consistent responses\n‚úÖ Pydantic for request validation\n‚úÖ File upload with security checks\n‚úÖ CORS for cross-origin requests\n‚úÖ Production-ready = validation + error handling + security\n\n---\n\n<a name=\"hour-20\"></a>\n## üìÖ Hour 20: Authentication & Authorization\n\n### üéØ Learning Objectives\n- Implement JWT authentication\n- Hash passwords with bcrypt\n- Create signup/login endpoints\n- Protect routes with decorators\n- Implement role-based access\n\n### üìñ What to Teach\n\n**\"Authentication = Who are you? Authorization = What can you do?\"**\n\n---\n\n### 1Ô∏è‚É£ Password Hashing (10 minutes)\n\n**Install bcrypt:**\n\n```bash\npip install bcrypt\n```\n\n**Hashing Passwords:**\n\n```python\nimport bcrypt\n\ndef hash_password(password):\n    \"\"\"Hash a password\"\"\"\n    # Generate salt and hash\n    salt = bcrypt.gensalt()\n    hashed = bcrypt.hashpw(password.encode('utf-8'), salt)\n    return hashed.decode('utf-8')\n\ndef verify_password(password, hashed):\n    \"\"\"Verify a password against hash\"\"\"\n    return bcrypt.checkpw(password.encode('utf-8'), hashed.encode('utf-8'))\n\n# Usage\npassword = \"MySecurePass123\"\nhashed = hash_password(password)\nprint(f\"Hashed: {hashed}\")\n\n# Verify\nis_valid = verify_password(\"MySecurePass123\", hashed)\nprint(f\"Valid: {is_valid}\")  # True\n\nis_valid = verify_password(\"WrongPassword\", hashed)\nprint(f\"Valid: {is_valid}\")  # False\n```\n\n---\n\n### 2Ô∏è‚É£ JWT Tokens (15 minutes)\n\n**Install PyJWT:**\n\n```bash\npip install pyjwt\n```\n\n**Creating and Verifying JWTs:**\n\n```python\nimport jwt\nfrom datetime import datetime, timedelta\n\nSECRET_KEY = \"your-secret-key-keep-this-safe\"\n\ndef create_token(user_id, username):\n    \"\"\"Create JWT token\"\"\"\n    payload = {\n        \"user_id\": user_id,\n        \"username\": username,\n        \"exp\": datetime.utcnow() + timedelta(hours=24)  # Expires in 24 hours\n    }\n    \n    token = jwt.encode(payload, SECRET_KEY, algorithm=\"HS256\")\n    return token\n\ndef verify_token(token):\n    \"\"\"Verify and decode JWT token\"\"\"\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n        return payload\n    except jwt.ExpiredSignatureError:\n        return None  # Token expired\n    except jwt.InvalidTokenError:\n        return None  # Invalid token\n\n# Usage\ntoken = create_token(1, \"alice\")\nprint(f\"Token: {token}\")\n\n# Verify\npayload = verify_token(token)\nprint(f\"Payload: {payload}\")\n```\n\n---\n\n### 3Ô∏è‚É£ Authentication Routes (15 minutes)\n\n```python\nfrom flask import Flask, request, jsonify\nimport bcrypt\nimport jwt\nfrom datetime import datetime, timedelta\nfrom functools import wraps\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'your-secret-key'\n\n# In-memory storage\nusers = {}\nuser_id_counter = 1\n\n# Helper functions\ndef hash_password(password):\n    salt = bcrypt.gensalt()\n    return bcrypt.hashpw(password.encode('utf-8'), salt).decode('utf-8')\n\ndef verify_password(password, hashed):\n    return bcrypt.checkpw(password.encode('utf-8'), hashed.encode('utf-8'))\n\ndef create_token(user_id, username, role='user'):\n    payload = {\n        \"user_id\": user_id,\n        \"username\": username,\n        \"role\": role,\n        \"exp\": datetime.utcnow() + timedelta(hours=24)\n    }\n    return jwt.encode(payload, app.config['SECRET_KEY'], algorithm=\"HS256\")\n\n# Signup route\n@app.route('/api/auth/signup', methods=['POST'])\ndef signup():\n    global user_id_counter\n    \n    data = request.json\n    username = data.get('username')\n    email = data.get('email')\n    password = data.get('password')\n    \n    # Validation\n    if not all([username, email, password]):\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Username, email, and password required\"\n        }), 400\n    \n    # Check duplicate username\n    for user in users.values():\n        if user['username'] == username:\n            return jsonify({\n                \"success\": False,\n                \"error\": \"Username already exists\"\n            }), 409\n    \n    # Create user\n    user = {\n        \"id\": user_id_counter,\n        \"username\": username,\n        \"email\": email,\n        \"password_hash\": hash_password(password),\n        \"role\": \"user\",\n        \"created_at\": datetime.utcnow().isoformat()\n    }\n    \n    users[user_id_counter] = user\n    user_id_counter += 1\n    \n    # Generate token\n    token = create_token(user['id'], user['username'], user['role'])\n    \n    # Return user without password\n    user_response = {k: v for k, v in user.items() if k != 'password_hash'}\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": {\n            \"user\": user_response,\n            \"token\": token\n        },\n        \"message\": \"Signup successful\"\n    }), 201\n\n# Login route\n@app.route('/api/auth/login', methods=['POST'])\ndef login():\n    data = request.json\n    username = data.get('username')\n    password = data.get('password')\n    \n    # Validation\n    if not username or not password:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Username and password required\"\n        }), 400\n    \n    # Find user\n    user = None\n    for u in users.values():\n        if u['username'] == username:\n            user = u\n            break\n    \n    if not user:\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Invalid credentials\"\n        }), 401\n    \n    # Verify password\n    if not verify_password(password, user['password_hash']):\n        return jsonify({\n            \"success\": False,\n            \"error\": \"Invalid credentials\"\n        }), 401\n    \n    # Generate token\n    token = create_token(user['id'], user['username'], user['role'])\n    \n    # Return user without password\n    user_response = {k: v for k, v in user.items() if k != 'password_hash'}\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": {\n            \"user\": user_response,\n            \"token\": token\n        },\n        \"message\": \"Login successful\"\n    })\n```\n\n---\n\n### 4Ô∏è‚É£ Protected Routes (15 minutes)\n\n**Authentication Decorator:**\n\n```python\nfrom functools import wraps\n\ndef token_required(f):\n    @wraps(f)\n    def decorated(*args, **kwargs):\n        token = None\n        \n        # Get token from header\n        if 'Authorization' in request.headers:\n            auth_header = request.headers['Authorization']\n            try:\n                token = auth_header.split(\" \")[1]  # \"Bearer <token>\"\n            except IndexError:\n                return jsonify({\n                    \"success\": False,\n                    \"error\": \"Invalid token format\"\n                }), 401\n        \n        if not token:\n            return jsonify({\n                \"success\": False,\n                \"error\": \"Token is missing\"\n            }), 401\n        \n        try:\n            # Verify token\n            payload = jwt.decode(token, app.config['SECRET_KEY'], algorithms=[\"HS256\"])\n            current_user = users.get(payload['user_id'])\n            \n            if not current_user:\n                return jsonify({\n                    \"success\": False,\n                    \"error\": \"User not found\"\n                }), 401\n            \n        except jwt.ExpiredSignatureError:\n            return jsonify({\n                \"success\": False,\n                \"error\": \"Token has expired\"\n            }), 401\n        except jwt.InvalidTokenError:\n            return jsonify({\n                \"success\": False,\n                \"error\": \"Invalid token\"\n            }), 401\n        \n        # Pass current_user to route\n        return f(current_user, *args, **kwargs)\n    \n    return decorated\n\n# Protected route\n@app.route('/api/profile', methods=['GET'])\n@token_required\ndef get_profile(current_user):\n    user_response = {k: v for k, v in current_user.items() if k != 'password_hash'}\n    return jsonify({\n        \"success\": True,\n        \"data\": user_response\n    })\n\n@app.route('/api/profile', methods=['PUT'])\n@token_required\ndef update_profile(current_user):\n    data = request.json\n    \n    # Update user\n    if 'email' in data:\n        current_user['email'] = data['email']\n    if 'bio' in data:\n        current_user['bio'] = data.get('bio', '')\n    \n    user_response = {k: v for k, v in current_user.items() if k != 'password_hash'}\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": user_response,\n        \"message\": \"Profile updated\"\n    })\n```\n\n---\n\n### 5Ô∏è‚É£ Role-Based Access (5 minutes)\n\n```python\ndef role_required(*allowed_roles):\n    def decorator(f):\n        @wraps(f)\n        def decorated(current_user, *args, **kwargs):\n            if current_user['role'] not in allowed_roles:\n                return jsonify({\n                    \"success\": False,\n                    \"error\": \"You don't have permission to access this resource\"\n                }), 403\n            return f(current_user, *args, **kwargs)\n        return decorated\n    return decorator\n\n# Admin-only route\n@app.route('/api/admin/users', methods=['GET'])\n@token_required\n@role_required('admin')\ndef get_all_users(current_user):\n    user_list = [\n        {k: v for k, v in user.items() if k != 'password_hash'}\n        for user in users.values()\n    ]\n    return jsonify({\n        \"success\": True,\n        \"data\": user_list\n    })\n\n# Moderator or Admin\n@app.route('/api/posts/<int:post_id>', methods=['DELETE'])\n@token_required\n@role_required('admin', 'moderator')\ndef delete_post(current_user, post_id):\n    # Delete post logic\n    return jsonify({\n        \"success\": True,\n        \"message\": \"Post deleted\"\n    })\n```\n\n---\n\n### üíª Live Activity: Complete Auth System\n\n**Create: hour20_auth_system.py**\n\n```python\n\"\"\"\nComplete Authentication System\nSignup, Login, Protected Routes, Role-Based Access\n\"\"\"\n\nfrom flask import Flask, request, jsonify\nfrom flask_cors import CORS\nimport bcrypt\nimport jwt\nfrom datetime import datetime, timedelta\nfrom functools import wraps\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'your-secret-key-change-in-production'\nCORS(app)\n\n# Storage\nusers = {}\nposts = {}\nuser_id_counter = 1\npost_id_counter = 1\n\n# Helper functions\ndef hash_password(password):\n    salt = bcrypt.gensalt()\n    return bcrypt.hashpw(password.encode('utf-8'), salt).decode('utf-8')\n\ndef verify_password(password, hashed):\n    return bcrypt.checkpw(password.encode('utf-8'), hashed.encode('utf-8'))\n\ndef create_token(user_id, username, role):\n    payload = {\n        \"user_id\": user_id,\n        \"username\": username,\n        \"role\": role,\n        \"iat\": datetime.utcnow(),\n        \"exp\": datetime.utcnow() + timedelta(hours=24)\n    }\n    return jwt.encode(payload, app.config['SECRET_KEY'], algorithm=\"HS256\")\n\n# Decorators\ndef token_required(f):\n    @wraps(f)\n    def decorated(*args, **kwargs):\n        token = None\n        \n        if 'Authorization' in request.headers:\n            try:\n                token = request.headers['Authorization'].split(\" \")[1]\n            except IndexError:\n                return jsonify({\"success\": False, \"error\": \"Invalid token format\"}), 401\n        \n        if not token:\n            return jsonify({\"success\": False, \"error\": \"Token is missing\"}), 401\n        \n        try:\n            payload = jwt.decode(token, app.config['SECRET_KEY'], algorithms=[\"HS256\"])\n            current_user = users.get(payload['user_id'])\n            \n            if not current_user:\n                return jsonify({\"success\": False, \"error\": \"User not found\"}), 401\n            \n        except jwt.ExpiredSignatureError:\n            return jsonify({\"success\": False, \"error\": \"Token has expired\"}), 401\n        except jwt.InvalidTokenError:\n            return jsonify({\"success\": False, \"error\": \"Invalid token\"}), 401\n        \n        return f(current_user, *args, **kwargs)\n    \n    return decorated\n\ndef role_required(*allowed_roles):\n    def decorator(f):\n        @wraps(f)\n        def decorated(current_user, *args, **kwargs):\n            if current_user['role'] not in allowed_roles:\n                return jsonify({\n                    \"success\": False,\n                    \"error\": \"Insufficient permissions\"\n                }), 403\n            return f(current_user, *args, **kwargs)\n        return decorated\n    return decorator\n\n# Auth routes\n@app.route('/api/auth/signup', methods=['POST'])\ndef signup():\n    global user_id_counter\n    \n    data = request.json\n    username = data.get('username')\n    email = data.get('email')\n    password = data.get('password')\n    \n    if not all([username, email, password]):\n        return jsonify({\"success\": False, \"error\": \"All fields required\"}), 400\n    \n    # Check duplicate\n    for user in users.values():\n        if user['username'] == username:\n            return jsonify({\"success\": False, \"error\": \"Username exists\"}), 409\n    \n    # Create user\n    user = {\n        \"id\": user_id_counter,\n        \"username\": username,\n        \"email\": email,\n        \"password_hash\": hash_password(password),\n        \"role\": \"user\",\n        \"created_at\": datetime.utcnow().isoformat()\n    }\n    \n    users[user_id_counter] = user\n    user_id_counter += 1\n    \n    token = create_token(user['id'], user['username'], user['role'])\n    \n    user_response = {k: v for k, v in user.items() if k != 'password_hash'}\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": {\"user\": user_response, \"token\": token},\n        \"message\": \"Signup successful\"\n    }), 201\n\n@app.route('/api/auth/login', methods=['POST'])\ndef login():\n    data = request.json\n    username = data.get('username')\n    password = data.get('password')\n    \n    if not username or not password:\n        return jsonify({\"success\": False, \"error\": \"Credentials required\"}), 400\n    \n    user = None\n    for u in users.values():\n        if u['username'] == username:\n            user = u\n            break\n    \n    if not user or not verify_password(password, user['password_hash']):\n        return jsonify({\"success\": False, \"error\": \"Invalid credentials\"}), 401\n    \n    token = create_token(user['id'], user['username'], user['role'])\n    \n    user_response = {k: v for k, v in user.items() if k != 'password_hash'}\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": {\"user\": user_response, \"token\": token},\n        \"message\": \"Login successful\"\n    })\n\n# Protected routes\n@app.route('/api/profile', methods=['GET'])\n@token_required\ndef get_profile(current_user):\n    user_response = {k: v for k, v in current_user.items() if k != 'password_hash'}\n    return jsonify({\"success\": True, \"data\": user_response})\n\n@app.route('/api/posts', methods=['POST'])\n@token_required\ndef create_post(current_user):\n    global post_id_counter\n    \n    data = request.json\n    title = data.get('title')\n    content = data.get('content')\n    \n    if not title or not content:\n        return jsonify({\"success\": False, \"error\": \"Title and content required\"}), 400\n    \n    post = {\n        \"id\": post_id_counter,\n        \"title\": title,\n        \"content\": content,\n        \"author_id\": current_user['id'],\n        \"author_username\": current_user['username'],\n        \"created_at\": datetime.utcnow().isoformat()\n    }\n    \n    posts[post_id_counter] = post\n    post_id_counter += 1\n    \n    return jsonify({\n        \"success\": True,\n        \"data\": post,\n        \"message\": \"Post created\"\n    }), 201\n\n@app.route('/api/posts/<int:post_id>', methods=['DELETE'])\n@token_required\ndef delete_post(current_user, post_id):\n    post = posts.get(post_id)\n    \n    if not post:\n        return jsonify({\"success\": False, \"error\": \"Post not found\"}), 404\n    \n    # Check ownership or admin\n    if post['author_id'] != current_user['id'] and current_user['role'] != 'admin':\n        return jsonify({\"success\": False, \"error\": \"Not authorized\"}), 403\n    \n    del posts[post_id]\n    return jsonify({\"success\": True, \"message\": \"Post deleted\"})\n\n# Admin-only routes\n@app.route('/api/admin/users', methods=['GET'])\n@token_required\n@role_required('admin')\ndef get_all_users(current_user):\n    user_list = [\n        {k: v for k, v in user.items() if k != 'password_hash'}\n        for user in users.values()\n    ]\n    return jsonify({\"success\": True, \"data\": user_list})\n\n@app.route('/api/admin/users/<int:user_id>/role', methods=['PATCH'])\n@token_required\n@role_required('admin')\ndef update_user_role(current_user, user_id):\n    user = users.get(user_id)\n    \n    if not user:\n        return jsonify({\"success\": False, \"error\": \"User not found\"}), 404\n    \n    data = request.json\n    new_role = data.get('role')\n    \n    if new_role not in ['user', 'moderator', 'admin']:\n        return jsonify({\"success\": False, \"error\": \"Invalid role\"}), 400\n    \n    user['role'] = new_role\n    \n    return jsonify({\n        \"success\": True,\n        \"message\": f\"User role updated to {new_role}\"\n    })\n\nif __name__ == '__main__':\n    # Create default admin user\n    admin_password = hash_password(\"admin123\")\n    users[user_id_counter] = {\n        \"id\": user_id_counter,\n        \"username\": \"admin\",\n        \"email\": \"admin@blog.com\",\n        \"password_hash\": admin_password,\n        \"role\": \"admin\",\n        \"created_at\": datetime.utcnow().isoformat()\n    }\n    user_id_counter += 1\n    \n    print(\"Default admin created: username='admin', password='admin123'\")\n    app.run(debug=True)\n```\n\n---\n\n### üè† Homework: Complete Auth System\n\n```python\n# homework20_complete_auth.py\n\n# TODO: Enhance the authentication system with:\n\n# 1. Refresh Tokens\n# - Short-lived access token (15 minutes)\n# - Long-lived refresh token (7 days)\n# - /api/auth/refresh endpoint\n\n# 2. Password Reset\n# - /api/auth/forgot-password (send reset token)\n# - /api/auth/reset-password (reset with token)\n\n# 3. Email Verification\n# - Send verification email on signup\n# - /api/auth/verify-email endpoint\n\n# 4. Account Management\n# - Change password (requires old password)\n# - Delete account\n# - Account lockout after failed attempts\n\n# 5. Advanced Security\n# - Rate limiting\n# - Token blacklist\n# - Session management\n\n# Implement and test all features!\n```\n\n---\n\n### üìù Key Takeaways\n\n‚úÖ bcrypt for password hashing\n‚úÖ JWT for stateless authentication\n‚úÖ Bearer token in Authorization header\n‚úÖ `@token_required` decorator for protected routes\n‚úÖ `@role_required` for authorization\n‚úÖ Never store passwords in plain text!\n\n---\n\n## üéâ Part 2 Complete!\n\n**You've learned:**\n- Hours 11-12: OOP (inheritance, polymorphism, magic methods)\n- Hour 13: Virtual environments & dependency management\n- Hours 14-16: Databases (SQL, SQLAlchemy, MongoDB)\n- Hour 17: REST API design principles\n- Hours 18-19: Flask (routes, blueprints, validation, file upload)\n- Hour 20: Authentication & authorization (JWT, bcrypt, protected routes)\n\n**Next:** Part 3 - Frontend Development (React, state management, full-stack integration)\n\n\n\n\n\n"}