{"id":"testing-tdd","title":"ğŸ§ª Testing & TDD Zero to Hero","content":"# Testing & TDD: Zero to Hero Guide\n## Complete Software Testing & Test-Driven Development Mastery\n\n---\n\n## ğŸ“š Table of Contents\n\n1. [Introduction to Testing](#introduction)\n2. [Why Testing Matters](#why-testing)\n3. [Types of Testing](#types)\n4. [Test-Driven Development (TDD)](#tdd)\n5. [Unit Testing](#unit-testing)\n6. [Integration Testing](#integration)\n7. [End-to-End Testing](#e2e)\n8. [Testing Frameworks](#frameworks)\n9. [Mocking & Stubbing](#mocking)\n10. [Test Coverage](#coverage)\n11. [Testing Best Practices](#best-practices)\n12. [Testing React Apps](#react-testing)\n13. [Testing APIs](#api-testing)\n14. [Performance Testing](#performance)\n15. [Security Testing](#security-testing)\n16. [CI/CD Integration](#cicd)\n17. [Real-World Examples](#examples)\n18. [Interview Preparation](#interview-prep)\n\n---\n\n## ğŸ¯ Introduction to Testing {#introduction}\n\n### What is Software Testing?\n\n```\nTesting = Verifying that software works as expected\n\nWithout Testing:\nWrite code â†’ Deploy â†’ Users find bugs ğŸ˜±\n                    â†’ Production crashes\n                    â†’ Lost revenue\n\nWith Testing:\nWrite code â†’ Test â†’ Fix bugs â†’ Deploy â†’ Happy users âœ…\n                  â†’ Confident releases\n                  â†’ Reliable software\n```\n\n### Testing Pyramid:\n\n```\n            â•±â•²\n           â•±  â•²\n          â•± E2E â•²         â† Few (1-10%)\n         â•±â”€â”€â”€â”€â”€â”€â•²           - Slow (minutes)\n        â•±  Integ-â•²          - Expensive\n       â•±  ration â•²       â† Some (20-30%)\n      â•±â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•²         - Medium speed\n     â•±    Unit    â•²      â† Many (60-70%)\n    â•±â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•²       - Fast (milliseconds)\n                            - Cheap\n\nDistribution:\nUnit Tests:        70% (Fast, focused)\nIntegration Tests: 20% (Medium speed, multiple units)\nE2E Tests:         10% (Slow, full user flows)\n\nWhy this shape?\n- Unit tests are fast, easy to maintain\n- E2E tests are slow, brittle\n- Balance speed with confidence\n```\n\n---\n\n## ğŸ’¡ Why Testing Matters {#why-testing}\n\n### Benefits:\n\n```markdown\nâœ… **Catch Bugs Early**\n   - Fix bugs during development (cheap)\n   - Not in production (expensive!)\n\nâœ… **Confidence in Changes**\n   - Refactor fearlessly\n   - Add features safely\n   - Tests protect against regressions\n\nâœ… **Documentation**\n   - Tests show how code should work\n   - Living documentation that never gets outdated\n\nâœ… **Better Design**\n   - Testable code = good code\n   - Forces modular, decoupled design\n\nâœ… **Faster Development**\n   - Seems slow at first\n   - Saves time in long run\n   - No manual testing needed\n\nâœ… **Sleep Better** ğŸ˜´\n   - Deploy on Fridays\n   - No production anxiety\n   - Trust your code\n```\n\n### Cost of Bugs:\n\n```\nBug Found in Development:    $100\nBug Found in QA:              $1,000\nBug Found in Production:      $10,000\nBug Causes Data Loss:         $1,000,000+\n\nExample: Knight Capital (2012)\n- Untested deployment\n- $440 million loss in 45 minutes\n- Company bankrupt\n\nTesting is NOT optional!\n```\n\n---\n\n## ğŸ” Types of Testing {#types}\n\n### 1. Unit Testing:\n\n```\nTest individual units (functions, methods) in isolation\n\nExample:\nfunction add(a, b) {\n  return a + b;\n}\n\ntest('adds 1 + 2 to equal 3', () => {\n  expect(add(1, 2)).toBe(3);\n});\n\nCharacteristics:\nâœ… Fast (< 100ms)\nâœ… Isolated\nâœ… Focused on one thing\nâœ… Easy to debug\n```\n\n### 2. Integration Testing:\n\n```\nTest multiple units working together\n\nExample:\nfunction getUserWithPosts(userId) {\n  const user = database.getUser(userId);      // Unit 1\n  const posts = database.getPosts(userId);    // Unit 2\n  return { ...user, posts };                  // Integration\n}\n\ntest('gets user with posts', async () => {\n  const result = await getUserWithPosts(1);\n  expect(result.posts).toBeDefined();\n});\n\nCharacteristics:\n- Medium speed\n- Tests interactions\n- Database/API involved\n```\n\n### 3. End-to-End (E2E) Testing:\n\n```\nTest entire application from user perspective\n\nExample (Login flow):\n1. Open browser\n2. Navigate to /login\n3. Enter email\n4. Enter password\n5. Click \"Login\"\n6. Verify dashboard loads\n\nCharacteristics:\n- Slow (seconds/minutes)\n- Full stack tested\n- Most realistic\n- Brittle (breaks easily)\n```\n\n### 4. Acceptance Testing:\n\n```\nVerify system meets business requirements\n\nGiven user is logged out\nWhen user enters valid credentials\nThen user sees dashboard\nAnd user can access all features\n```\n\n### 5. Regression Testing:\n\n```\nEnsure existing features still work after changes\n\nRun all tests after:\n- New feature added\n- Bug fixed\n- Refactoring done\n```\n\n---\n\n## ğŸ”´ğŸŸ¢ Test-Driven Development (TDD) {#tdd}\n\n### TDD Cycle (Red-Green-Refactor):\n\n```\n1. RED: Write failing test\n   â†“\n2. GREEN: Write minimum code to pass\n   â†“\n3. REFACTOR: Improve code quality\n   â†“\nRepeat!\n\nVisual:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ RED Phase                           â”‚\nâ”‚ test('adds numbers', () => {        â”‚\nâ”‚   expect(add(1, 2)).toBe(3);        â”‚\nâ”‚ });                                 â”‚\nâ”‚ âŒ Test fails (add not defined)     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n           â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ GREEN Phase                         â”‚\nâ”‚ function add(a, b) {                â”‚\nâ”‚   return a + b;                     â”‚\nâ”‚ }                                   â”‚\nâ”‚ âœ… Test passes!                     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n           â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ REFACTOR Phase                      â”‚\nâ”‚ const add = (a, b) => a + b;        â”‚\nâ”‚ âœ… Test still passes!               â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### TDD Example (Complete):\n\n```javascript\n// Step 1: RED - Write test first\ndescribe('Password Validator', () => {\n  test('rejects passwords shorter than 8 characters', () => {\n    expect(validatePassword('short')).toBe(false);\n  });\n});\n\n// âŒ Fails: validatePassword not defined\n\n// Step 2: GREEN - Minimum code to pass\nfunction validatePassword(password) {\n  return password.length >= 8;\n}\n\n// âœ… Passes!\n\n// Step 3: Add more tests\ntest('rejects passwords without numbers', () => {\n  expect(validatePassword('nodigits')).toBe(false);\n});\n\n// âŒ Fails\n\n// Step 4: Update code\nfunction validatePassword(password) {\n  if (password.length < 8) return false;\n  if (!/\\d/.test(password)) return false;\n  return true;\n}\n\n// âœ… Passes!\n\n// Step 5: REFACTOR\nfunction validatePassword(password) {\n  const hasMinLength = password.length >= 8;\n  const hasNumber = /\\d/.test(password);\n  const hasUpperCase = /[A-Z]/.test(password);\n  const hasSpecialChar = /[!@#$%^&*]/.test(password);\n  \n  return hasMinLength && hasNumber && hasUpperCase && hasSpecialChar;\n}\n\n// âœ… Clean, testable code!\n```\n\n### TDD Benefits:\n\n```markdown\nâœ… Forces you to think about requirements\nâœ… Prevents over-engineering\nâœ… Built-in test suite\nâœ… Rapid feedback loop\nâœ… Better design (testable = good)\nâœ… Documentation included\n```\n\n---\n\n## âœ… Unit Testing {#unit-testing}\n\n### Jest (JavaScript):\n\n```bash\n# Install Jest\nnpm install --save-dev jest\n\n# package.json\n{\n  \"scripts\": {\n    \"test\": \"jest\",\n    \"test:watch\": \"jest --watch\",\n    \"test:coverage\": \"jest --coverage\"\n  }\n}\n```\n\n### Basic Tests:\n\n```javascript\n// math.js\nexport function add(a, b) {\n  return a + b;\n}\n\nexport function subtract(a, b) {\n  return a - b;\n}\n\nexport function multiply(a, b) {\n  return a * b;\n}\n\nexport function divide(a, b) {\n  if (b === 0) throw new Error('Division by zero');\n  return a / b;\n}\n\n// math.test.js\nimport { add, subtract, multiply, divide } from './math';\n\ndescribe('Math functions', () => {\n  // Basic test\n  test('adds 1 + 2 to equal 3', () => {\n    expect(add(1, 2)).toBe(3);\n  });\n  \n  // Test with different inputs\n  test('adds negative numbers', () => {\n    expect(add(-1, -2)).toBe(-3);\n  });\n  \n  test('subtracts numbers', () => {\n    expect(subtract(5, 3)).toBe(2);\n  });\n  \n  test('multiplies numbers', () => {\n    expect(multiply(3, 4)).toBe(12);\n  });\n  \n  test('divides numbers', () => {\n    expect(divide(10, 2)).toBe(5);\n  });\n  \n  // Test error cases\n  test('throws error on division by zero', () => {\n    expect(() => divide(10, 0)).toThrow('Division by zero');\n  });\n});\n\n// Run tests: npm test\n```\n\n### Jest Matchers:\n\n```javascript\n// Equality\nexpect(value).toBe(4);                    // Exact equality (===)\nexpect(object).toEqual({ a: 1, b: 2 });   // Deep equality\n\n// Truthiness\nexpect(value).toBeTruthy();\nexpect(value).toBeFalsy();\nexpect(value).toBeNull();\nexpect(value).toBeUndefined();\nexpect(value).toBeDefined();\n\n// Numbers\nexpect(value).toBeGreaterThan(3);\nexpect(value).toBeGreaterThanOrEqual(3.5);\nexpect(value).toBeLessThan(5);\nexpect(value).toBeCloseTo(0.3);           // Floating point\n\n// Strings\nexpect('team').toMatch(/I/);              // Regex\nexpect('string').toContain('tri');\n\n// Arrays\nexpect(['apple', 'banana']).toContain('apple');\nexpect(array).toHaveLength(3);\n\n// Objects\nexpect(obj).toHaveProperty('key');\nexpect(obj).toMatchObject({ a: 1 });\n\n// Exceptions\nexpect(() => func()).toThrow();\nexpect(() => func()).toThrow(Error);\nexpect(() => func()).toThrow('error message');\n\n// Async\nawait expect(promise).resolves.toBe(value);\nawait expect(promise).rejects.toThrow();\n```\n\n### Testing Classes:\n\n```javascript\n// user.js\nexport class User {\n  constructor(name, email) {\n    this.name = name;\n    this.email = email;\n    this.posts = [];\n  }\n  \n  addPost(post) {\n    this.posts.push(post);\n  }\n  \n  getPostCount() {\n    return this.posts.length;\n  }\n  \n  hasEmail() {\n    return this.email !== null && this.email !== '';\n  }\n}\n\n// user.test.js\nimport { User } from './user';\n\ndescribe('User class', () => {\n  let user;\n  \n  // Setup before each test\n  beforeEach(() => {\n    user = new User('John', 'john@example.com');\n  });\n  \n  test('creates user with name and email', () => {\n    expect(user.name).toBe('John');\n    expect(user.email).toBe('john@example.com');\n  });\n  \n  test('starts with zero posts', () => {\n    expect(user.getPostCount()).toBe(0);\n  });\n  \n  test('adds posts', () => {\n    user.addPost({ title: 'Post 1' });\n    user.addPost({ title: 'Post 2' });\n    expect(user.getPostCount()).toBe(2);\n  });\n  \n  test('validates email existence', () => {\n    expect(user.hasEmail()).toBe(true);\n    \n    const userWithoutEmail = new User('Jane', '');\n    expect(userWithoutEmail.hasEmail()).toBe(false);\n  });\n});\n```\n\n### Pytest (Python):\n\n```bash\n# Install pytest\npip install pytest\n\n# Run tests\npytest\npytest -v              # Verbose\npytest --cov           # Coverage\npytest tests/          # Specific directory\n```\n\n```python\n# calculator.py\ndef add(a, b):\n    return a + b\n\ndef subtract(a, b):\n    return a - b\n\ndef multiply(a, b):\n    return a * b\n\ndef divide(a, b):\n    if b == 0:\n        raise ValueError(\"Division by zero\")\n    return a / b\n\n# test_calculator.py\nimport pytest\nfrom calculator import add, subtract, multiply, divide\n\ndef test_add():\n    assert add(1, 2) == 3\n    assert add(-1, 1) == 0\n    assert add(0, 0) == 0\n\ndef test_subtract():\n    assert subtract(5, 3) == 2\n    assert subtract(0, 0) == 0\n\ndef test_multiply():\n    assert multiply(3, 4) == 12\n    assert multiply(-2, 3) == -6\n\ndef test_divide():\n    assert divide(10, 2) == 5\n    assert divide(9, 3) == 3\n\ndef test_divide_by_zero():\n    with pytest.raises(ValueError, match=\"Division by zero\"):\n        divide(10, 0)\n\n# Parametrized tests\n@pytest.mark.parametrize(\"a,b,expected\", [\n    (1, 2, 3),\n    (0, 0, 0),\n    (-1, 1, 0),\n    (100, 200, 300),\n])\ndef test_add_parametrized(a, b, expected):\n    assert add(a, b) == expected\n\n# Fixtures (setup/teardown)\n@pytest.fixture\ndef sample_data():\n    return [1, 2, 3, 4, 5]\n\ndef test_with_fixture(sample_data):\n    assert sum(sample_data) == 15\n```\n\n---\n\n## ğŸ”— Integration Testing {#integration}\n\n### Testing with Database:\n\n```javascript\n// userService.js\nimport db from './database';\n\nexport class UserService {\n  async createUser(name, email) {\n    const user = await db.users.create({ name, email });\n    return user;\n  }\n  \n  async getUser(id) {\n    const user = await db.users.findById(id);\n    if (!user) throw new Error('User not found');\n    return user;\n  }\n  \n  async getUserWithPosts(id) {\n    const user = await this.getUser(id);\n    const posts = await db.posts.findByUserId(id);\n    return { ...user, posts };\n  }\n}\n\n// userService.test.js\nimport { UserService } from './userService';\nimport db from './database';\n\ndescribe('UserService Integration Tests', () => {\n  let userService;\n  \n  // Setup before all tests\n  beforeAll(async () => {\n    await db.connect();\n    userService = new UserService();\n  });\n  \n  // Cleanup after each test\n  afterEach(async () => {\n    await db.users.deleteAll();\n    await db.posts.deleteAll();\n  });\n  \n  // Disconnect after all tests\n  afterAll(async () => {\n    await db.disconnect();\n  });\n  \n  test('creates and retrieves user', async () => {\n    // Create user\n    const created = await userService.createUser('John', 'john@test.com');\n    expect(created.id).toBeDefined();\n    \n    // Retrieve user\n    const retrieved = await userService.getUser(created.id);\n    expect(retrieved.name).toBe('John');\n    expect(retrieved.email).toBe('john@test.com');\n  });\n  \n  test('gets user with posts', async () => {\n    // Create user\n    const user = await userService.createUser('Jane', 'jane@test.com');\n    \n    // Create posts\n    await db.posts.create({ userId: user.id, title: 'Post 1' });\n    await db.posts.create({ userId: user.id, title: 'Post 2' });\n    \n    // Get user with posts\n    const result = await userService.getUserWithPosts(user.id);\n    expect(result.posts).toHaveLength(2);\n    expect(result.posts[0].title).toBe('Post 1');\n  });\n  \n  test('throws error for non-existent user', async () => {\n    await expect(userService.getUser(999)).rejects.toThrow('User not found');\n  });\n});\n```\n\n### API Integration Testing (Supertest):\n\n```javascript\n// Install: npm install --save-dev supertest\n\n// app.js\nimport express from 'express';\nconst app = express();\n\napp.use(express.json());\n\nlet users = [\n  { id: 1, name: 'John', email: 'john@test.com' }\n];\n\napp.get('/api/users', (req, res) => {\n  res.json(users);\n});\n\napp.post('/api/users', (req, res) => {\n  const user = {\n    id: users.length + 1,\n    ...req.body\n  };\n  users.push(user);\n  res.status(201).json(user);\n});\n\napp.get('/api/users/:id', (req, res) => {\n  const user = users.find(u => u.id === parseInt(req.params.id));\n  if (!user) return res.status(404).json({ error: 'Not found' });\n  res.json(user);\n});\n\nexport default app;\n\n// app.test.js\nimport request from 'supertest';\nimport app from './app';\n\ndescribe('API Integration Tests', () => {\n  describe('GET /api/users', () => {\n    it('should return list of users', async () => {\n      const response = await request(app)\n        .get('/api/users')\n        .expect(200)\n        .expect('Content-Type', /json/);\n      \n      expect(Array.isArray(response.body)).toBe(true);\n      expect(response.body.length).toBeGreaterThan(0);\n    });\n  });\n  \n  describe('POST /api/users', () => {\n    it('should create new user', async () => {\n      const newUser = {\n        name: 'Alice',\n        email: 'alice@test.com'\n      };\n      \n      const response = await request(app)\n        .post('/api/users')\n        .send(newUser)\n        .expect(201);\n      \n      expect(response.body).toHaveProperty('id');\n      expect(response.body.name).toBe('Alice');\n    });\n    \n    it('should require name and email', async () => {\n      await request(app)\n        .post('/api/users')\n        .send({ name: 'Bob' })  // Missing email\n        .expect(400);\n    });\n  });\n  \n  describe('GET /api/users/:id', () => {\n    it('should return specific user', async () => {\n      const response = await request(app)\n        .get('/api/users/1')\n        .expect(200);\n      \n      expect(response.body.id).toBe(1);\n      expect(response.body.name).toBeDefined();\n    });\n    \n    it('should return 404 for non-existent user', async () => {\n      await request(app)\n        .get('/api/users/999')\n        .expect(404);\n    });\n  });\n});\n```\n\n---\n\n## ğŸ­ End-to-End Testing {#e2e}\n\n### Cypress:\n\n```bash\n# Install Cypress\nnpm install --save-dev cypress\n\n# Open Cypress\nnpx cypress open\n```\n\n```javascript\n// cypress/e2e/login.cy.js\ndescribe('Login Flow', () => {\n  beforeEach(() => {\n    cy.visit('http://localhost:3000/login');\n  });\n  \n  it('successfully logs in', () => {\n    // Enter credentials\n    cy.get('[data-testid=\"email-input\"]')\n      .type('user@example.com');\n    \n    cy.get('[data-testid=\"password-input\"]')\n      .type('password123');\n    \n    // Click login button\n    cy.get('[data-testid=\"login-button\"]').click();\n    \n    // Verify redirect to dashboard\n    cy.url().should('include', '/dashboard');\n    \n    // Verify welcome message\n    cy.contains('Welcome back!').should('be.visible');\n  });\n  \n  it('shows error for invalid credentials', () => {\n    cy.get('[data-testid=\"email-input\"]')\n      .type('wrong@example.com');\n    \n    cy.get('[data-testid=\"password-input\"]')\n      .type('wrongpass');\n    \n    cy.get('[data-testid=\"login-button\"]').click();\n    \n    // Verify error message\n    cy.contains('Invalid credentials').should('be.visible');\n    \n    // Verify still on login page\n    cy.url().should('include', '/login');\n  });\n  \n  it('validates required fields', () => {\n    cy.get('[data-testid=\"login-button\"]').click();\n    \n    cy.contains('Email is required').should('be.visible');\n    cy.contains('Password is required').should('be.visible');\n  });\n});\n\n// cypress/e2e/shopping.cy.js\ndescribe('Shopping Cart', () => {\n  beforeEach(() => {\n    // Login first\n    cy.visit('/login');\n    cy.get('[data-testid=\"email-input\"]').type('user@example.com');\n    cy.get('[data-testid=\"password-input\"]').type('password123');\n    cy.get('[data-testid=\"login-button\"]').click();\n    cy.url().should('include', '/dashboard');\n  });\n  \n  it('adds items to cart', () => {\n    // Go to products\n    cy.visit('/products');\n    \n    // Add first product\n    cy.get('[data-testid=\"product-card\"]').first()\n      .find('[data-testid=\"add-to-cart\"]').click();\n    \n    // Verify cart badge\n    cy.get('[data-testid=\"cart-badge\"]').should('contain', '1');\n    \n    // Add second product\n    cy.get('[data-testid=\"product-card\"]').eq(1)\n      .find('[data-testid=\"add-to-cart\"]').click();\n    \n    cy.get('[data-testid=\"cart-badge\"]').should('contain', '2');\n  });\n  \n  it('completes checkout', () => {\n    // Add product\n    cy.visit('/products');\n    cy.get('[data-testid=\"add-to-cart\"]').first().click();\n    \n    // Go to cart\n    cy.get('[data-testid=\"cart-icon\"]').click();\n    \n    // Verify cart contents\n    cy.get('[data-testid=\"cart-item\"]').should('have.length', 1);\n    \n    // Proceed to checkout\n    cy.get('[data-testid=\"checkout-button\"]').click();\n    \n    // Fill shipping info\n    cy.get('[name=\"address\"]').type('123 Main St');\n    cy.get('[name=\"city\"]').type('New York');\n    cy.get('[name=\"zip\"]').type('10001');\n    \n    // Place order\n    cy.get('[data-testid=\"place-order\"]').click();\n    \n    // Verify success\n    cy.contains('Order placed successfully').should('be.visible');\n    cy.url().should('include', '/order-confirmation');\n  });\n});\n```\n\n---\n\n## ğŸ¯ Mocking & Stubbing {#mocking}\n\n### Mocking Functions:\n\n```javascript\n// Mocking with Jest\n\n// emailService.js\nexport function sendEmail(to, subject, body) {\n  // Actual email sending logic\n  // We don't want to send real emails in tests!\n}\n\n// userService.js\nimport { sendEmail } from './emailService';\n\nexport function registerUser(name, email) {\n  // Create user...\n  const user = { id: 1, name, email };\n  \n  // Send welcome email\n  sendEmail(email, 'Welcome!', 'Thanks for registering');\n  \n  return user;\n}\n\n// userService.test.js\nimport { registerUser } from './userService';\nimport * as emailService from './emailService';\n\n// Mock the entire module\njest.mock('./emailService');\n\ndescribe('registerUser', () => {\n  it('sends welcome email', () => {\n    const user = registerUser('John', 'john@test.com');\n    \n    // Verify email was called\n    expect(emailService.sendEmail).toHaveBeenCalledWith(\n      'john@test.com',\n      'Welcome!',\n      'Thanks for registering'\n    );\n    \n    // Verify it was called once\n    expect(emailService.sendEmail).toHaveBeenCalledTimes(1);\n  });\n});\n\n// Manual mocking\ndescribe('registerUser with manual mock', () => {\n  it('sends welcome email', () => {\n    // Create mock function\n    const mockSendEmail = jest.fn();\n    emailService.sendEmail = mockSendEmail;\n    \n    registerUser('John', 'john@test.com');\n    \n    expect(mockSendEmail).toHaveBeenCalled();\n  });\n});\n```\n\n### Mocking API Calls:\n\n```javascript\n// userService.js\nimport axios from 'axios';\n\nexport async function getUser(id) {\n  const response = await axios.get(`/api/users/${id}`);\n  return response.data;\n}\n\n// userService.test.js\nimport axios from 'axios';\nimport { getUser } from './userService';\n\njest.mock('axios');\n\ndescribe('getUser', () => {\n  it('fetches user from API', async () => {\n    // Mock the API response\n    const mockUser = { id: 1, name: 'John' };\n    axios.get.mockResolvedValue({ data: mockUser });\n    \n    const user = await getUser(1);\n    \n    expect(user).toEqual(mockUser);\n    expect(axios.get).toHaveBeenCalledWith('/api/users/1');\n  });\n  \n  it('handles API errors', async () => {\n    // Mock API error\n    axios.get.mockRejectedValue(new Error('Network error'));\n    \n    await expect(getUser(1)).rejects.toThrow('Network error');\n  });\n});\n```\n\n### Spies:\n\n```javascript\n// Spy on existing function without mocking\ndescribe('Math.random', () => {\n  it('is called', () => {\n    const spy = jest.spyOn(Math, 'random').mockReturnValue(0.5);\n    \n    const result = Math.random();\n    \n    expect(spy).toHaveBeenCalled();\n    expect(result).toBe(0.5);\n    \n    spy.mockRestore();  // Restore original function\n  });\n});\n```\n\n---\n\n## ğŸ“Š Test Coverage {#coverage}\n\n### Measuring Coverage:\n\n```bash\n# Jest coverage\nnpm test -- --coverage\n\n# Output:\n----------|---------|----------|---------|---------|\nFile      | % Stmts | % Branch | % Funcs | % Lines |\n----------|---------|----------|---------|---------|\nAll files |   85.71 |    75.00 |   88.88 |   85.71 |\n math.js  |   90.00 |    80.00 |   100.0 |   90.00 |\n user.js  |   80.00 |    70.00 |   80.00 |   80.00 |\n----------|---------|----------|---------|---------|\n\nCoverage Types:\n- Statement Coverage: % of statements executed\n- Branch Coverage: % of if/else branches tested\n- Function Coverage: % of functions called\n- Line Coverage: % of lines executed\n```\n\n### Coverage Goals:\n\n```\nRecommended Coverage:\nâœ… Critical code (payments, auth): 100%\nâœ… Business logic: 80-90%\nâœ… UI components: 60-70%\nâœ… Overall: 80%+\n\nDon't obsess over 100%!\n- Focus on critical paths\n- Test important logic\n- Don't test trivial code\n```\n\n---\n\n## âœ… Testing Best Practices {#best-practices}\n\n### AAA Pattern (Arrange-Act-Assert):\n\n```javascript\ntest('adds user to database', () => {\n  // ARRANGE: Set up test data\n  const user = { name: 'John', email: 'john@test.com' };\n  \n  // ACT: Execute the code\n  const result = addUser(user);\n  \n  // ASSERT: Verify the result\n  expect(result.id).toBeDefined();\n  expect(result.name).toBe('John');\n});\n```\n\n### Test Naming:\n\n```javascript\n// âœ… Good: Descriptive names\ntest('returns 404 when user not found', () => {});\ntest('sends email after successful registration', () => {});\ntest('validates email format', () => {});\n\n// âŒ Bad: Vague names\ntest('test1', () => {});\ntest('works', () => {});\ntest('user', () => {});\n```\n\n### One Assertion Per Test:\n\n```javascript\n// âŒ Bad: Multiple assertions\ntest('user operations', () => {\n  const user = createUser();\n  expect(user.id).toBeDefined();\n  \n  const updated = updateUser(user.id, { name: 'Jane' });\n  expect(updated.name).toBe('Jane');\n  \n  deleteUser(user.id);\n  expect(getUser(user.id)).toBeNull();\n});\n\n// âœ… Good: Separate tests\ntest('creates user with ID', () => {\n  const user = createUser();\n  expect(user.id).toBeDefined();\n});\n\ntest('updates user name', () => {\n  const user = createUser();\n  const updated = updateUser(user.id, { name: 'Jane' });\n  expect(updated.name).toBe('Jane');\n});\n\ntest('deletes user', () => {\n  const user = createUser();\n  deleteUser(user.id);\n  expect(getUser(user.id)).toBeNull();\n});\n```\n\n---\n\n## ğŸ‰ Congratulations!\n\nYou've completed the **Testing & TDD: Zero to Hero** guide!\n\n**What's Next?**\n1. Practice TDD daily\n2. Aim for 80%+ test coverage\n3. Write tests for existing code\n4. Learn advanced testing patterns\n5. Integrate testing into CI/CD\n\n---\n\n*Testing & TDD: Zero to Hero Guide - Complete Edition*\n*Version 1.0 | Created January 2026*\n*Total: 3,000+ lines of testing mastery!*\n\n**Happy Testing! âœ…**\n"}