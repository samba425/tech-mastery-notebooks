{"id":"sql-databases","title":"ğŸ’¾ SQL Databases Zero to Hero","content":"# SQL & Databases: Zero to Hero Guide\n## Complete Journey from Beginner to Database Expert\n\n---\n\n## ğŸ“š Table of Contents\n\n1. [Introduction to Databases](#introduction)\n2. [Why Learn SQL & Databases?](#why-learn)\n3. [Database Fundamentals](#fundamentals)\n4. [SQL Basics](#sql-basics)\n5. [SQL Intermediate](#sql-intermediate)\n6. [SQL Advanced](#sql-advanced)\n7. [Database Design](#database-design)\n8. [Normalization](#normalization)\n9. [Indexes & Performance](#indexes)\n10. [Transactions & ACID](#transactions)\n11. [Stored Procedures & Functions](#stored-procedures)\n12. [Views & Triggers](#views-triggers)\n13. [Query Optimization](#optimization)\n14. [NoSQL Databases](#nosql)\n15. [Database Security](#security)\n16. [Backup & Recovery](#backup)\n17. [Interview Preparation](#interview-prep)\n18. [Practice Problems](#practice)\n19. [Real-World Projects](#projects)\n20. [Visual Diagram Index](#visual-index)\n\n---\n\n## ğŸ¯ Introduction to Databases {#introduction}\n\nA **database** is an organized collection of structured data stored electronically in a computer system.\n\n### What is SQL?\n\n**SQL** (Structured Query Language) is the standard language for managing and manipulating databases.\n\n```\nThink of a database like:\nğŸ“š Library = Database\nğŸ“– Books = Tables\nğŸ“„ Pages = Rows\nâœï¸ Content = Data\n\nSQL = The language you use to find, add, update, or remove books!\n```\n\n### Types of Databases:\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  RELATIONAL DATABASES (SQL)             â”‚\nâ”‚  â”œâ”€ MySQL                               â”‚\nâ”‚  â”œâ”€ PostgreSQL                          â”‚\nâ”‚  â”œâ”€ Oracle                              â”‚\nâ”‚  â”œâ”€ SQL Server                          â”‚\nâ”‚  â””â”€ SQLite                              â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  NoSQL DATABASES                        â”‚\nâ”‚  â”œâ”€ MongoDB (Document)                  â”‚\nâ”‚  â”œâ”€ Cassandra (Wide Column)            â”‚\nâ”‚  â”œâ”€ Redis (Key-Value)                  â”‚\nâ”‚  â””â”€ Neo4j (Graph)                      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ’¡ Why Learn SQL & Databases? {#why-learn}\n\n### Career Benefits:\n\nâœ… **Universal Skill** - Used in 90%+ of tech jobs  \nâœ… **High Demand** - Every company needs databases  \nâœ… **Good Pay** - Database skills increase salary 20-40%  \nâœ… **Foundation** - Required for backend, data science, DevOps  \nâœ… **Interview Essential** - Asked in 100% of interviews  \n\n### Real-World Applications:\n\n| Industry | Use Case |\n|----------|----------|\n| **E-commerce** | Product catalog, orders, inventory |\n| **Banking** | Account transactions, customer data |\n| **Social Media** | User profiles, posts, connections |\n| **Healthcare** | Patient records, appointments |\n| **Gaming** | Player data, leaderboards |\n| **IoT** | Sensor data, device management |\n\n---\n\n## ğŸ—ï¸ Database Fundamentals {#fundamentals}\n\n### Database Architecture:\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚            APPLICATION LAYER                â”‚\nâ”‚  (Your App, Website, Mobile App)            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                   â”‚\n                   â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚         DATABASE MANAGEMENT SYSTEM          â”‚\nâ”‚              (MySQL, PostgreSQL)            â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\nâ”‚  â”‚  QUERY PROCESSOR                       â”‚ â”‚\nâ”‚  â”‚  â”œâ”€ Parser (checks syntax)             â”‚ â”‚\nâ”‚  â”‚  â”œâ”€ Optimizer (finds best way)         â”‚ â”‚\nâ”‚  â”‚  â””â”€ Executor (runs query)              â”‚ â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\nâ”‚  â”‚  STORAGE ENGINE                        â”‚ â”‚\nâ”‚  â”‚  (How data is stored on disk)          â”‚ â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                   â”‚\n                   â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚         PHYSICAL STORAGE                    â”‚\nâ”‚         (Hard Drive / SSD)                  â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”                â”‚\nâ”‚  â”‚Table1â”‚ â”‚Table2â”‚ â”‚Table3â”‚                â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜                â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Basic Terminology:\n\n```\nTABLE STRUCTURE:\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Students (TABLE NAME)                â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ id      â”‚ name     â”‚ age      â”‚ grade â”‚ â† COLUMNS (Fields)\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1       â”‚ Alice    â”‚ 20       â”‚ A     â”‚ â† ROW (Record)\nâ”‚ 2       â”‚ Bob      â”‚ 22       â”‚ B     â”‚\nâ”‚ 3       â”‚ Charlie  â”‚ 21       â”‚ A     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜\n     â†‘         â†‘          â†‘         â†‘\n  PRIMARY KEY  DATA     DATA      DATA\n```\n\n**Key Terms:**\n- **Table** = Collection of related data (like an Excel sheet)\n- **Row** = Single record (one student)\n- **Column** = Attribute/field (name, age, etc.)\n- **Primary Key** = Unique identifier for each row\n- **Foreign Key** = Reference to another table's primary key\n- **Schema** = Database structure/blueprint\n\n---\n\n## ğŸ“ SQL Basics {#sql-basics}\n\n### 1. Creating a Database:\n\n```sql\n-- Create a new database\nCREATE DATABASE school;\n\n-- Use the database\nUSE school;\n\n-- Show all databases\nSHOW DATABASES;\n\n-- Delete a database (BE CAREFUL!)\nDROP DATABASE school;\n```\n\n### 2. Creating Tables:\n\n```sql\n-- Create students table\nCREATE TABLE students (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    name VARCHAR(100) NOT NULL,\n    age INT,\n    email VARCHAR(255) UNIQUE,\n    enrollment_date DATE,\n    gpa DECIMAL(3, 2)\n);\n\n-- Show table structure\nDESCRIBE students;\n\n-- Visual representation:\n/*\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”\nâ”‚ id â”‚  name   â”‚ age  â”‚ email â”‚ enrollment_date  â”‚ gpa  â”‚\nâ”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤\nâ”‚    â”‚         â”‚      â”‚       â”‚                  â”‚      â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### 3. Data Types:\n\n```sql\n-- Numeric Types\nINT            -- Whole numbers: -2147483648 to 2147483647\nBIGINT         -- Large numbers\nDECIMAL(10,2)  -- Fixed decimals: 99999999.99\nFLOAT          -- Approximate decimals\n\n-- String Types\nCHAR(10)       -- Fixed length: \"Hello     \" (padded)\nVARCHAR(255)   -- Variable length: \"Hello\" (no padding)\nTEXT           -- Long text (articles, descriptions)\n\n-- Date/Time Types\nDATE           -- YYYY-MM-DD: 2024-01-15\nTIME           -- HH:MM:SS: 14:30:00\nDATETIME       -- YYYY-MM-DD HH:MM:SS: 2024-01-15 14:30:00\nTIMESTAMP      -- Auto-updating timestamp\n\n-- Boolean\nBOOLEAN        -- TRUE/FALSE (stored as 1/0)\n\n-- Example with all types:\nCREATE TABLE products (\n    id INT PRIMARY KEY,\n    name VARCHAR(200),\n    description TEXT,\n    price DECIMAL(10, 2),\n    stock_quantity INT,\n    is_available BOOLEAN,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n```\n\n### 4. INSERT - Adding Data:\n\n```sql\n-- Insert single row\nINSERT INTO students (name, age, email, enrollment_date, gpa)\nVALUES ('Alice Johnson', 20, 'alice@email.com', '2024-01-15', 3.8);\n\n-- Insert multiple rows\nINSERT INTO students (name, age, email, enrollment_date, gpa)\nVALUES \n    ('Bob Smith', 22, 'bob@email.com', '2024-01-16', 3.5),\n    ('Charlie Brown', 21, 'charlie@email.com', '2024-01-17', 3.9),\n    ('Diana Prince', 23, 'diana@email.com', '2024-01-18', 3.7);\n\n-- Result visualization:\n/*\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ id â”‚  name         â”‚ age â”‚ email             â”‚enrollment_date  â”‚ gpa â”‚\nâ”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤\nâ”‚ 1  â”‚ Alice Johnson â”‚ 20  â”‚ alice@email.com   â”‚ 2024-01-15      â”‚ 3.8 â”‚\nâ”‚ 2  â”‚ Bob Smith     â”‚ 22  â”‚ bob@email.com     â”‚ 2024-01-16      â”‚ 3.5 â”‚\nâ”‚ 3  â”‚ Charlie Brown â”‚ 21  â”‚ charlie@email.com â”‚ 2024-01-17      â”‚ 3.9 â”‚\nâ”‚ 4  â”‚ Diana Prince  â”‚ 23  â”‚ diana@email.com   â”‚ 2024-01-18      â”‚ 3.7 â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### 5. SELECT - Reading Data:\n\n```sql\n-- Select all columns\nSELECT * FROM students;\n\n-- Select specific columns\nSELECT name, age FROM students;\n\n-- Select with alias (rename columns)\nSELECT \n    name AS student_name,\n    age AS student_age,\n    gpa AS grade_point_average\nFROM students;\n\n-- Select with calculations\nSELECT \n    name,\n    gpa,\n    gpa * 25 AS percentage  -- Calculate percentage\nFROM students;\n\n-- Visual query flow:\n/*\nQuery: SELECT name, age FROM students WHERE age > 20;\n\nstudents TABLE          FILTER (WHERE)         RESULT\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”\nâ”‚ 1  â”‚Alice  â”‚ 20 â”‚â”€â”€â”€â†’â”‚age > 20?   â”‚    â”‚Bob Smith  â”‚ 22 â”‚\nâ”‚ 2  â”‚Bob    â”‚ 22 â”‚â”€â”€â”€â†’â”‚âœ“ Include   â”‚â”€â”€â”€â†’â”‚Charlie... â”‚ 21 â”‚\nâ”‚ 3  â”‚Charlieâ”‚ 21 â”‚â”€â”€â”€â†’â”‚âœ“ Include   â”‚    â”‚Diana ...  â”‚ 23 â”‚\nâ”‚ 4  â”‚Diana  â”‚ 23 â”‚â”€â”€â”€â†’â”‚âœ“ Include   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â†“ Filter only name, age columns\n*/\n```\n\n### 6. WHERE - Filtering Data:\n\n```sql\n-- Comparison operators\nSELECT * FROM students WHERE age = 21;         -- Equal\nSELECT * FROM students WHERE age != 20;        -- Not equal\nSELECT * FROM students WHERE age > 21;         -- Greater than\nSELECT * FROM students WHERE age >= 21;        -- Greater or equal\nSELECT * FROM students WHERE age < 22;         -- Less than\nSELECT * FROM students WHERE gpa BETWEEN 3.5 AND 3.9;  -- Range\n\n-- Logical operators\nSELECT * FROM students \nWHERE age > 20 AND gpa > 3.5;  -- Both conditions\n\nSELECT * FROM students \nWHERE age < 21 OR gpa > 3.8;   -- Either condition\n\nSELECT * FROM students \nWHERE NOT age = 20;            -- Negation\n\n-- Pattern matching with LIKE\nSELECT * FROM students WHERE name LIKE 'A%';      -- Starts with A\nSELECT * FROM students WHERE name LIKE '%son';    -- Ends with son\nSELECT * FROM students WHERE name LIKE '%ar%';    -- Contains 'ar'\nSELECT * FROM students WHERE name LIKE 'B_b';     -- B, any char, b\n\n-- NULL checks\nSELECT * FROM students WHERE email IS NULL;\nSELECT * FROM students WHERE email IS NOT NULL;\n\n-- IN operator (multiple values)\nSELECT * FROM students WHERE age IN (20, 21, 22);\nSELECT * FROM students WHERE name IN ('Alice', 'Bob');\n```\n\n### 7. UPDATE - Modifying Data:\n\n```sql\n-- Update single row\nUPDATE students \nSET gpa = 3.9 \nWHERE id = 1;\n\n-- Update multiple columns\nUPDATE students \nSET age = 21, gpa = 3.8 \nWHERE id = 2;\n\n-- Update with calculations\nUPDATE students \nSET gpa = gpa + 0.1 \nWHERE gpa < 3.5;\n\n-- âš ï¸ WARNING: Without WHERE, updates ALL rows!\nUPDATE students SET gpa = 4.0;  -- DON'T DO THIS!\n\n-- Visual update flow:\n/*\nBEFORE:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20  â”‚ 3.8 â”‚\nâ”‚ 2  â”‚ Bob   â”‚ 22  â”‚ 3.5 â”‚ â† Target\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nQuery: UPDATE students SET gpa = 3.9 WHERE id = 2;\n\nAFTER:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20  â”‚ 3.8 â”‚\nâ”‚ 2  â”‚ Bob   â”‚ 22  â”‚ 3.9 â”‚ â† Updated!\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### 8. DELETE - Removing Data:\n\n```sql\n-- Delete specific rows\nDELETE FROM students WHERE id = 4;\n\n-- Delete with multiple conditions\nDELETE FROM students WHERE age > 25 AND gpa < 2.0;\n\n-- âš ï¸ WARNING: Without WHERE, deletes ALL rows!\nDELETE FROM students;  -- DANGEROUS!\n\n-- Safe delete pattern (always use WHERE)\nDELETE FROM students \nWHERE id IN (SELECT id FROM students WHERE age > 30);\n```\n\n### 9. ORDER BY - Sorting Results:\n\n```sql\n-- Sort ascending (default)\nSELECT * FROM students ORDER BY age;\nSELECT * FROM students ORDER BY age ASC;\n\n-- Sort descending\nSELECT * FROM students ORDER BY gpa DESC;\n\n-- Sort by multiple columns\nSELECT * FROM students \nORDER BY gpa DESC, age ASC;\n\n-- Visual sorting:\n/*\nUNSORTED:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20  â”‚ 3.8 â”‚\nâ”‚ 3  â”‚ Charlieâ”‚21  â”‚ 3.9 â”‚\nâ”‚ 2  â”‚ Bob   â”‚ 22  â”‚ 3.5 â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nORDER BY age ASC:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20  â”‚ 3.8 â”‚ â† Youngest\nâ”‚ 3  â”‚ Charlieâ”‚21  â”‚ 3.9 â”‚\nâ”‚ 2  â”‚ Bob   â”‚ 22  â”‚ 3.5 â”‚ â† Oldest\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nORDER BY gpa DESC:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 3  â”‚ Charlieâ”‚21  â”‚ 3.9 â”‚ â† Highest\nâ”‚ 1  â”‚ Alice â”‚ 20  â”‚ 3.8 â”‚\nâ”‚ 2  â”‚ Bob   â”‚ 22  â”‚ 3.5 â”‚ â† Lowest\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### 10. LIMIT - Restricting Results:\n\n```sql\n-- Get top 5 students\nSELECT * FROM students LIMIT 5;\n\n-- Get top 3 students by GPA\nSELECT * FROM students \nORDER BY gpa DESC \nLIMIT 3;\n\n-- Pagination: Skip first 10, get next 5\nSELECT * FROM students \nLIMIT 5 OFFSET 10;\n\n-- Alternative pagination syntax (MySQL)\nSELECT * FROM students \nLIMIT 10, 5;  -- Skip 10, get 5\n\n-- Visual pagination:\n/*\nAll Students (20 total):\n[1][2][3][4][5][6][7][8][9][10][11][12][13][14][15][16][17][18][19][20]\n\nPage 1: LIMIT 5 OFFSET 0\n[1][2][3][4][5]\n\nPage 2: LIMIT 5 OFFSET 5\n                [6][7][8][9][10]\n\nPage 3: LIMIT 5 OFFSET 10\n                            [11][12][13][14][15]\n*/\n```\n\n---\n\n## ğŸ”„ SQL Intermediate {#sql-intermediate}\n\n### 1. Aggregate Functions:\n\n```sql\n-- COUNT: Count rows\nSELECT COUNT(*) AS total_students FROM students;\nSELECT COUNT(DISTINCT age) AS unique_ages FROM students;\n\n-- SUM: Add up values\nSELECT SUM(gpa) AS total_gpa FROM students;\n\n-- AVG: Average\nSELECT AVG(gpa) AS average_gpa FROM students;\nSELECT AVG(age) AS average_age FROM students;\n\n-- MIN/MAX: Minimum and maximum\nSELECT MIN(age) AS youngest FROM students;\nSELECT MAX(gpa) AS highest_gpa FROM students;\n\n-- Visual example:\n/*\nstudents table:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20  â”‚ 3.8 â”‚\nâ”‚ 2  â”‚ Bob   â”‚ 22  â”‚ 3.5 â”‚\nâ”‚ 3  â”‚ Charlieâ”‚21  â”‚ 3.9 â”‚\nâ”‚ 4  â”‚ Diana â”‚ 23  â”‚ 3.7 â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nSELECT \n    COUNT(*) as total,\n    AVG(age) as avg_age,\n    MAX(gpa) as max_gpa\nFROM students;\n\nResult:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ total â”‚ avg_age â”‚ max_gpa â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚   4   â”‚  21.5   â”‚   3.9   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### 2. GROUP BY - Grouping Data:\n\n```sql\n-- Group students by age\nSELECT age, COUNT(*) AS student_count\nFROM students\nGROUP BY age;\n\n-- Group with multiple aggregates\nSELECT \n    age,\n    COUNT(*) AS count,\n    AVG(gpa) AS avg_gpa,\n    MAX(gpa) AS max_gpa\nFROM students\nGROUP BY age;\n\n-- Group by multiple columns\nSELECT \n    YEAR(enrollment_date) AS year,\n    MONTH(enrollment_date) AS month,\n    COUNT(*) AS enrollments\nFROM students\nGROUP BY YEAR(enrollment_date), MONTH(enrollment_date);\n\n-- Visual GROUP BY:\n/*\nOriginal data:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20  â”‚ 3.8 â”‚\nâ”‚ 2  â”‚ Bob   â”‚ 20  â”‚ 3.5 â”‚\nâ”‚ 3  â”‚ Charlieâ”‚21  â”‚ 3.9 â”‚\nâ”‚ 4  â”‚ Diana â”‚ 21  â”‚ 3.7 â”‚\nâ”‚ 5  â”‚ Eve   â”‚ 22  â”‚ 3.6 â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nSELECT age, COUNT(*), AVG(gpa) \nFROM students \nGROUP BY age;\n\nGroups formed:\nAge 20: [Alice, Bob]      â†’ Count: 2, Avg: 3.65\nAge 21: [Charlie, Diana]  â†’ Count: 2, Avg: 3.80\nAge 22: [Eve]             â†’ Count: 1, Avg: 3.60\n\nResult:\nâ”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ age â”‚ count â”‚ avg_gpa â”‚\nâ”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 20  â”‚   2   â”‚  3.65   â”‚\nâ”‚ 21  â”‚   2   â”‚  3.80   â”‚\nâ”‚ 22  â”‚   1   â”‚  3.60   â”‚\nâ””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### 3. HAVING - Filtering Groups:\n\n```sql\n-- Find ages with more than 2 students\nSELECT age, COUNT(*) AS count\nFROM students\nGROUP BY age\nHAVING COUNT(*) > 2;\n\n-- Find ages where average GPA > 3.5\nSELECT age, AVG(gpa) AS avg_gpa\nFROM students\nGROUP BY age\nHAVING AVG(gpa) > 3.5;\n\n-- WHERE vs HAVING:\n-- WHERE filters ROWS before grouping\n-- HAVING filters GROUPS after grouping\n\nSELECT age, AVG(gpa) AS avg_gpa\nFROM students\nWHERE enrollment_date > '2024-01-01'  -- Filter rows first\nGROUP BY age                          -- Then group\nHAVING AVG(gpa) > 3.5;               -- Then filter groups\n\n-- Visual WHERE vs HAVING:\n/*\nData:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20  â”‚ 3.8 â”‚\nâ”‚ 2  â”‚ Bob   â”‚ 20  â”‚ 3.5 â”‚\nâ”‚ 3  â”‚ Charlieâ”‚21  â”‚ 3.9 â”‚\nâ”‚ 4  â”‚ Diana â”‚ 21  â”‚ 2.8 â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nQuery: SELECT age, AVG(gpa) FROM students WHERE gpa > 3.0 GROUP BY age HAVING AVG(gpa) > 3.6;\n\nStep 1 - WHERE filters rows:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20  â”‚ 3.8 â”‚ âœ“\nâ”‚ 2  â”‚ Bob   â”‚ 20  â”‚ 3.5 â”‚ âœ“\nâ”‚ 3  â”‚ Charlieâ”‚21  â”‚ 3.9 â”‚ âœ“\nâ”‚ 4  â”‚ Diana â”‚ 21  â”‚ 2.8 â”‚ âœ— (gpa not > 3.0)\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nStep 2 - GROUP BY:\nAge 20: AVG = 3.65\nAge 21: AVG = 3.9\n\nStep 3 - HAVING filters groups:\nAge 20: 3.65 âœ“ (> 3.6)\nAge 21: 3.9  âœ“ (> 3.6)\n\nResult: Both groups pass!\n*/\n```\n\n### 4. JOINS - Combining Tables:\n\nLet's create related tables for examples:\n\n```sql\n-- Create courses table\nCREATE TABLE courses (\n    course_id INT PRIMARY KEY,\n    course_name VARCHAR(100),\n    credits INT\n);\n\n-- Create enrollments table (junction table)\nCREATE TABLE enrollments (\n    enrollment_id INT PRIMARY KEY AUTO_INCREMENT,\n    student_id INT,\n    course_id INT,\n    grade VARCHAR(2),\n    FOREIGN KEY (student_id) REFERENCES students(id),\n    FOREIGN KEY (course_id) REFERENCES courses(course_id)\n);\n\n-- Insert sample data\nINSERT INTO courses VALUES\n(101, 'Mathematics', 3),\n(102, 'Physics', 4),\n(103, 'Chemistry', 3);\n\nINSERT INTO enrollments (student_id, course_id, grade) VALUES\n(1, 101, 'A'),\n(1, 102, 'B'),\n(2, 101, 'A'),\n(3, 103, 'A');\n```\n\n#### **INNER JOIN:**\n\n```sql\n-- Get student names with their enrolled courses\nSELECT \n    students.name,\n    courses.course_name,\n    enrollments.grade\nFROM students\nINNER JOIN enrollments ON students.id = enrollments.student_id\nINNER JOIN courses ON enrollments.course_id = courses.course_id;\n\n-- Visual INNER JOIN:\n/*\nstudents:              enrollments:          courses:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚        â”‚ 1 â”‚ 1  â”‚ 101   â”‚    â”‚ 101 â”‚ Math     â”‚\nâ”‚ 2  â”‚ Bob   â”‚        â”‚ 2 â”‚ 1  â”‚ 102   â”‚    â”‚ 102 â”‚ Physics  â”‚\nâ”‚ 3  â”‚ Charlieâ”‚       â”‚ 3 â”‚ 2  â”‚ 101   â”‚    â”‚ 103 â”‚ Chemistryâ”‚\nâ”‚ 4  â”‚ Diana â”‚        â”‚ 4 â”‚ 3  â”‚ 103   â”‚    â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜\n     â†“                      â†“                      â†“\n     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                   MATCH ON IDs\n\nResult:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  name   â”‚  course   â”‚ grade â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Alice   â”‚ Math      â”‚   A   â”‚\nâ”‚ Alice   â”‚ Physics   â”‚   B   â”‚\nâ”‚ Bob     â”‚ Math      â”‚   A   â”‚\nâ”‚ Charlie â”‚ Chemistry â”‚   A   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜\n\nNote: Diana has no enrollments, so not included!\n*/\n```\n\n#### **LEFT JOIN:**\n\n```sql\n-- Get all students, including those not enrolled\nSELECT \n    students.name,\n    courses.course_name,\n    enrollments.grade\nFROM students\nLEFT JOIN enrollments ON students.id = enrollments.student_id\nLEFT JOIN courses ON enrollments.course_id = courses.course_id;\n\n-- Visual LEFT JOIN:\n/*\nstudents (LEFT table):    enrollments (RIGHT table):\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚ 1 â”‚ 1  â”‚ 101   â”‚ âœ“ Match\nâ”‚ 2  â”‚ Bob   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚ 3 â”‚ 2  â”‚ 101   â”‚ âœ“ Match\nâ”‚ 3  â”‚ Charlieâ”‚ â”€â”€â”€â”€â”€â”€â”€â†’  â”‚ 4 â”‚ 3  â”‚ 103   â”‚ âœ“ Match\nâ”‚ 4  â”‚ Diana â”‚ â”€â”€â”€â”€â”€Xâ”€â”€â†’  (no match)         NULL\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜\n\nResult:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  name   â”‚  course   â”‚ grade â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Alice   â”‚ Math      â”‚   A   â”‚\nâ”‚ Alice   â”‚ Physics   â”‚   B   â”‚\nâ”‚ Bob     â”‚ Math      â”‚   A   â”‚\nâ”‚ Charlie â”‚ Chemistry â”‚   A   â”‚\nâ”‚ Diana   â”‚ NULL      â”‚ NULL  â”‚ â† Included with NULLs\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n#### **RIGHT JOIN:**\n\n```sql\n-- Get all courses, including those with no enrollments\nSELECT \n    students.name,\n    courses.course_name,\n    enrollments.grade\nFROM students\nRIGHT JOIN enrollments ON students.id = enrollments.student_id\nRIGHT JOIN courses ON enrollments.course_id = courses.course_id;\n\n-- Similar to LEFT JOIN but keeps all RIGHT table rows\n```\n\n#### **FULL OUTER JOIN:**\n\n```sql\n-- MySQL doesn't support FULL OUTER JOIN directly\n-- Workaround using UNION:\nSELECT \n    students.name,\n    courses.course_name\nFROM students\nLEFT JOIN enrollments ON students.id = enrollments.student_id\nLEFT JOIN courses ON enrollments.course_id = courses.course_id\n\nUNION\n\nSELECT \n    students.name,\n    courses.course_name\nFROM students\nRIGHT JOIN enrollments ON students.id = enrollments.student_id\nRIGHT JOIN courses ON enrollments.course_id = courses.course_id;\n```\n\n#### **SELF JOIN:**\n\n```sql\n-- Find students with the same age\nSELECT \n    s1.name AS student1,\n    s2.name AS student2,\n    s1.age\nFROM students s1\nINNER JOIN students s2 ON s1.age = s2.age AND s1.id < s2.id;\n\n-- Visual SELF JOIN:\n/*\nSame table joined with itself:\n\ns1 (alias):           s2 (alias):\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20 â”‚  â”‚ 1  â”‚ Alice â”‚ 20 â”‚\nâ”‚ 2  â”‚ Bob   â”‚ 20 â”‚  â”‚ 2  â”‚ Bob   â”‚ 20 â”‚\nâ”‚ 3  â”‚ Charlieâ”‚21 â”‚  â”‚ 3  â”‚ Charlieâ”‚21 â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜\n     â†“                     â†“\n     Compare age and ensure id1 < id2\n\nResult:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚student1 â”‚student2 â”‚ age â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤\nâ”‚ Alice   â”‚ Bob     â”‚ 20  â”‚ (same age!)\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### 5. Subqueries:\n\n```sql\n-- Subquery in WHERE clause\nSELECT name, gpa\nFROM students\nWHERE gpa > (SELECT AVG(gpa) FROM students);\n\n-- Subquery in FROM clause (derived table)\nSELECT \n    age_group.age,\n    age_group.avg_gpa\nFROM (\n    SELECT age, AVG(gpa) AS avg_gpa\n    FROM students\n    GROUP BY age\n) AS age_group\nWHERE age_group.avg_gpa > 3.5;\n\n-- Subquery with IN\nSELECT name\nFROM students\nWHERE id IN (\n    SELECT student_id \n    FROM enrollments \n    WHERE grade = 'A'\n);\n\n-- Subquery with EXISTS\nSELECT name\nFROM students s\nWHERE EXISTS (\n    SELECT 1 \n    FROM enrollments e \n    WHERE e.student_id = s.id AND e.grade = 'A'\n);\n\n-- Visual subquery execution:\n/*\nQuery: SELECT name FROM students WHERE gpa > (SELECT AVG(gpa) FROM students);\n\nStep 1 - Execute subquery:\nSELECT AVG(gpa) FROM students;\nResult: 3.7\n\nStep 2 - Use result in main query:\nSELECT name FROM students WHERE gpa > 3.7;\n\nstudents:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20  â”‚ 3.8 â”‚ âœ“ (3.8 > 3.7)\nâ”‚ 2  â”‚ Bob   â”‚ 22  â”‚ 3.5 â”‚ âœ— (3.5 < 3.7)\nâ”‚ 3  â”‚ Charlieâ”‚21  â”‚ 3.9 â”‚ âœ“ (3.9 > 3.7)\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nResult:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  name   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Alice   â”‚\nâ”‚ Charlie â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### 6. UNION - Combining Results:\n\n```sql\n-- UNION (removes duplicates)\nSELECT name FROM students WHERE age = 20\nUNION\nSELECT name FROM students WHERE gpa > 3.8;\n\n-- UNION ALL (keeps duplicates)\nSELECT name FROM students WHERE age = 20\nUNION ALL\nSELECT name FROM students WHERE gpa > 3.8;\n\n-- Visual UNION:\n/*\nQuery 1 result:        Query 2 result:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Alice â”‚              â”‚ Alice   â”‚\nâ”‚ Bob   â”‚              â”‚ Charlie â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n    â†“                       â†“\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                â†“\n           UNION (remove duplicates)\n                â†“\n           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n           â”‚ Alice   â”‚ (appears once)\n           â”‚ Bob     â”‚\n           â”‚ Charlie â”‚\n           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n---\n\n## ğŸš€ SQL Advanced {#sql-advanced}\n\n### 1. Window Functions:\n\n```sql\n-- ROW_NUMBER: Assign unique row numbers\nSELECT \n    name,\n    gpa,\n    ROW_NUMBER() OVER (ORDER BY gpa DESC) AS rank\nFROM students;\n\n-- RANK: Rankings with gaps\nSELECT \n    name,\n    gpa,\n    RANK() OVER (ORDER BY gpa DESC) AS rank\nFROM students;\n\n-- DENSE_RANK: Rankings without gaps\nSELECT \n    name,\n    gpa,\n    DENSE_RANK() OVER (ORDER BY gpa DESC) AS dense_rank\nFROM students;\n\n-- PARTITION BY: Rank within groups\nSELECT \n    name,\n    age,\n    gpa,\n    RANK() OVER (PARTITION BY age ORDER BY gpa DESC) AS rank_in_age_group\nFROM students;\n\n-- Visual window functions:\n/*\nData:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice   â”‚ 20  â”‚ 3.9 â”‚\nâ”‚ 2  â”‚ Bob     â”‚ 20  â”‚ 3.9 â”‚ (tie!)\nâ”‚ 3  â”‚ Charlie â”‚ 21  â”‚ 3.8 â”‚\nâ”‚ 4  â”‚ Diana   â”‚ 21  â”‚ 3.7 â”‚\nâ”‚ 5  â”‚ Eve     â”‚ 22  â”‚ 3.6 â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nROW_NUMBER():        RANK():            DENSE_RANK():\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”\nâ”‚nameâ”‚rankâ”‚          â”‚nameâ”‚rankâ”‚        â”‚nameâ”‚rankâ”‚\nâ”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤\nâ”‚Aliceâ”‚ 1  â”‚          â”‚Aliceâ”‚ 1  â”‚       â”‚Aliceâ”‚ 1  â”‚\nâ”‚Bob  â”‚ 2  â”‚          â”‚Bob  â”‚ 1  â”‚ (tie) â”‚Bob  â”‚ 1  â”‚\nâ”‚Char â”‚ 3  â”‚          â”‚Char â”‚ 3  â”‚ (skip)â”‚Char â”‚ 2  â”‚ (no skip)\nâ”‚Dianaâ”‚ 4  â”‚          â”‚Dianaâ”‚ 4  â”‚       â”‚Dianaâ”‚ 3  â”‚\nâ”‚Eve  â”‚ 5  â”‚          â”‚Eve  â”‚ 5  â”‚       â”‚Eve  â”‚ 4  â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜\n*/\n\n-- LAG/LEAD: Access previous/next rows\nSELECT \n    name,\n    gpa,\n    LAG(gpa) OVER (ORDER BY id) AS previous_gpa,\n    LEAD(gpa) OVER (ORDER BY id) AS next_gpa\nFROM students;\n\n-- Running totals\nSELECT \n    name,\n    gpa,\n    SUM(gpa) OVER (ORDER BY id) AS running_total\nFROM students;\n```\n\n### 2. Common Table Expressions (CTE):\n\n```sql\n-- Basic CTE\nWITH high_performers AS (\n    SELECT name, gpa\n    FROM students\n    WHERE gpa > 3.7\n)\nSELECT * FROM high_performers;\n\n-- Multiple CTEs\nWITH \n    high_gpa AS (\n        SELECT id, name FROM students WHERE gpa > 3.7\n    ),\n    enrolled AS (\n        SELECT DISTINCT student_id FROM enrollments\n    )\nSELECT h.name\nFROM high_gpa h\nINNER JOIN enrolled e ON h.id = e.student_id;\n\n-- Recursive CTE (hierarchical data)\nWITH RECURSIVE numbers AS (\n    SELECT 1 AS n\n    UNION ALL\n    SELECT n + 1 FROM numbers WHERE n < 10\n)\nSELECT * FROM numbers;\n\n-- Visual CTE:\n/*\nWITH high_performers AS (\n    SELECT name, gpa FROM students WHERE gpa > 3.7\n)\nSELECT * FROM high_performers;\n\nStep 1 - Create temporary result set:\nhigh_performers:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚  name   â”‚ gpa â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤\nâ”‚ Alice   â”‚ 3.9 â”‚\nâ”‚ Charlie â”‚ 3.8 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nStep 2 - Query the CTE:\nSELECT * FROM high_performers;\n\nResult: Same as CTE\n\nBenefits:\nâœ… Readable (named result set)\nâœ… Reusable within same query\nâœ… Can be recursive\n*/\n```\n\n### 3. CASE Expressions:\n\n```sql\n-- Simple CASE\nSELECT \n    name,\n    gpa,\n    CASE\n        WHEN gpa >= 3.7 THEN 'Excellent'\n        WHEN gpa >= 3.3 THEN 'Good'\n        WHEN gpa >= 3.0 THEN 'Average'\n        ELSE 'Needs Improvement'\n    END AS performance\nFROM students;\n\n-- CASE in aggregation\nSELECT \n    COUNT(CASE WHEN gpa >= 3.7 THEN 1 END) AS excellent,\n    COUNT(CASE WHEN gpa >= 3.3 AND gpa < 3.7 THEN 1 END) AS good,\n    COUNT(CASE WHEN gpa < 3.3 THEN 1 END) AS average\nFROM students;\n\n-- Visual CASE:\n/*\nstudents:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚  name   â”‚ gpa â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤\nâ”‚ Alice   â”‚ 3.9 â”‚ â†’ WHEN gpa >= 3.7 â†’ 'Excellent'\nâ”‚ Bob     â”‚ 3.5 â”‚ â†’ WHEN gpa >= 3.3 â†’ 'Good'\nâ”‚ Charlie â”‚ 3.8 â”‚ â†’ WHEN gpa >= 3.7 â†’ 'Excellent'\nâ”‚ Diana   â”‚ 2.9 â”‚ â†’ ELSE â†’ 'Needs Improvement'\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n\nResult:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  name   â”‚ gpa â”‚   performance       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Alice   â”‚ 3.9 â”‚ Excellent           â”‚\nâ”‚ Bob     â”‚ 3.5 â”‚ Good                â”‚\nâ”‚ Charlie â”‚ 3.8 â”‚ Excellent           â”‚\nâ”‚ Diana   â”‚ 2.9 â”‚ Needs Improvement   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### 4. String Functions:\n\n```sql\n-- CONCAT: Combine strings\nSELECT CONCAT(first_name, ' ', last_name) AS full_name FROM users;\n\n-- LENGTH: String length\nSELECT name, LENGTH(name) AS name_length FROM students;\n\n-- UPPER/LOWER: Change case\nSELECT UPPER(name) AS uppercase, LOWER(name) AS lowercase FROM students;\n\n-- SUBSTRING: Extract part of string\nSELECT name, SUBSTRING(name, 1, 3) AS first_3_chars FROM students;\n\n-- TRIM: Remove whitespace\nSELECT TRIM('  hello  ') AS trimmed;  -- Result: 'hello'\n\n-- REPLACE: Replace substring\nSELECT REPLACE(email, '@email.com', '@newdomain.com') FROM students;\n\n-- Visual string operations:\n/*\nOriginal: \"Alice Johnson\"\n\nUPPER:     \"ALICE JOHNSON\"\nLOWER:     \"alice johnson\"\nLENGTH:    14\nSUBSTRING(name, 1, 5): \"Alice\"\nREPLACE(name, 'Johnson', 'Smith'): \"Alice Smith\"\n*/\n```\n\n### 5. Date Functions:\n\n```sql\n-- Current date/time\nSELECT NOW();                    -- Current datetime\nSELECT CURDATE();               -- Current date\nSELECT CURTIME();               -- Current time\n\n-- Extract parts\nSELECT \n    YEAR(enrollment_date) AS year,\n    MONTH(enrollment_date) AS month,\n    DAY(enrollment_date) AS day,\n    DAYNAME(enrollment_date) AS day_name\nFROM students;\n\n-- Date arithmetic\nSELECT \n    enrollment_date,\n    DATE_ADD(enrollment_date, INTERVAL 1 YEAR) AS one_year_later,\n    DATE_SUB(enrollment_date, INTERVAL 30 DAY) AS 30_days_ago,\n    DATEDIFF(NOW(), enrollment_date) AS days_since_enrollment\nFROM students;\n\n-- Format dates\nSELECT DATE_FORMAT(enrollment_date, '%M %d, %Y') AS formatted_date\nFROM students;\n\n-- Visual date operations:\n/*\nenrollment_date: 2024-01-15\n\nYEAR:       2024\nMONTH:      1\nDAY:        15\nDAYNAME:    Monday\n\nDATE_ADD (+1 year):   2025-01-15\nDATE_SUB (-30 days):  2023-12-16\nDATEDIFF (from now):  X days\n\nDATE_FORMAT:  \"January 15, 2024\"\n*/\n```\n\n---\n\n## ğŸ›ï¸ Database Design {#database-design}\n\n### Entity-Relationship (ER) Diagram:\n\n```\nExample: University Database\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   STUDENTS   â”‚         â”‚ ENROLLMENTS  â”‚         â”‚   COURSES    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ student_id PKâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ student_id FKâ”‚         â”‚ course_id PK â”‚\nâ”‚ name         â”‚         â”‚ course_id FK â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ course_name  â”‚\nâ”‚ email        â”‚         â”‚ grade        â”‚         â”‚ credits      â”‚\nâ”‚ dob          â”‚         â”‚ semester     â”‚         â”‚ department   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚                                                  â”‚\n       â”‚                                                  â”‚\n       â”‚                                                  â”‚\n       â–¼                                                  â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ MAJORS       â”‚                                 â”‚ PROFESSORS   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ major_id PK  â”‚                                 â”‚ prof_id PK   â”‚\nâ”‚ student_id FKâ”‚                                 â”‚ course_id FK â”‚\nâ”‚ major_name   â”‚                                 â”‚ name         â”‚\nâ”‚ start_date   â”‚                                 â”‚ email        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nLegend:\nPK = Primary Key\nFK = Foreign Key\nâ—„â”€â”€â–º = Relationship\n```\n\n### Relationships:\n\n```\n1. ONE-TO-ONE (1:1)\nExample: Student â†â†’ Student ID Card\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 1     1 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Student  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  ID Card â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nEach student has exactly one ID card,\nand each ID card belongs to one student.\n\n2. ONE-TO-MANY (1:N)\nExample: Department â†’ Students\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 1   N â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Department â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ Students â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nOne department has many students,\nbut each student belongs to one department.\n\n3. MANY-TO-MANY (M:N)\nExample: Students â†â†’ Courses\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” M   N â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Students â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ Courses  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚                 â”‚\n       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚\n         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n         â”‚ Enrollments  â”‚ â† Junction Table\n         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nImplemented via junction table!\n```\n\n### Keys:\n\n```sql\n-- PRIMARY KEY: Unique identifier\nCREATE TABLE students (\n    id INT PRIMARY KEY AUTO_INCREMENT,  -- Can't be NULL, must be unique\n    email VARCHAR(255) UNIQUE           -- Unique but can be NULL\n);\n\n-- FOREIGN KEY: References another table\nCREATE TABLE enrollments (\n    id INT PRIMARY KEY,\n    student_id INT,\n    course_id INT,\n    FOREIGN KEY (student_id) REFERENCES students(id),\n    FOREIGN KEY (course_id) REFERENCES courses(course_id)\n);\n\n-- COMPOSITE KEY: Multiple columns as key\nCREATE TABLE course_schedule (\n    course_id INT,\n    day_of_week VARCHAR(10),\n    time_slot VARCHAR(20),\n    PRIMARY KEY (course_id, day_of_week, time_slot)\n);\n\n-- Visual keys:\n/*\nstudents table:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ id (PK) â”‚ email (UNIQUE) â”‚ name        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1       â”‚ a@email.com    â”‚ Alice       â”‚ â† PK ensures uniqueness\nâ”‚ 2       â”‚ b@email.com    â”‚ Bob         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n    â†“ Referenced by\nenrollments table:\nâ”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ id  â”‚ student_id(FK)â”‚ course_id â”‚\nâ”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1   â”‚ 1            â”‚ 101       â”‚ â† FK must exist in students.id\nâ”‚ 2   â”‚ 1            â”‚ 102       â”‚\nâ”‚ 3   â”‚ 2            â”‚ 101       â”‚\nâ””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n---\n\n## ğŸ“Š Normalization {#normalization}\n\n**Normalization** = Organizing data to reduce redundancy and improve integrity.\n\n### Unnormalized Data (Problems):\n\n```sql\n-- Bad design - lots of redundancy!\nCREATE TABLE student_courses (\n    student_name VARCHAR(100),\n    student_email VARCHAR(255),\n    student_age INT,\n    course1_name VARCHAR(100),\n    course1_grade VARCHAR(2),\n    course2_name VARCHAR(100),\n    course2_grade VARCHAR(2),\n    course3_name VARCHAR(100),\n    course3_grade VARCHAR(2)\n);\n\n/*\nProblems:\nâŒ Data repeated multiple times (student info for each course)\nâŒ Fixed number of courses (what if student takes 4 courses?)\nâŒ Lots of NULL values if student takes < 3 courses\nâŒ Hard to update (change email in multiple places)\nâŒ Hard to query (which column for Math grade?)\n*/\n```\n\n### Normal Forms:\n\n#### **1st Normal Form (1NF):**\n\nRules:\n- Each column contains atomic (indivisible) values\n- Each column contains values of single type\n- Each column has unique name\n- Order doesn't matter\n\n```sql\n-- NOT in 1NF (multiple values in one cell)\nâ”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ name â”‚ courses               â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Aliceâ”‚ Math, Physics, Chem   â”‚ â† Multiple values!\nâ””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n-- IN 1NF (atomic values)\nâ”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ name â”‚ course   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Aliceâ”‚ Math     â”‚\nâ”‚ Aliceâ”‚ Physics  â”‚\nâ”‚ Aliceâ”‚ Chemistryâ”‚\nâ””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n#### **2nd Normal Form (2NF):**\n\nRules:\n- Must be in 1NF\n- No partial dependencies (non-key attributes must depend on entire primary key)\n\n```sql\n-- NOT in 2NF\nCREATE TABLE enrollment (\n    student_id INT,\n    course_id INT,\n    student_name VARCHAR(100),  -- âŒ Depends only on student_id\n    course_name VARCHAR(100),   -- âŒ Depends only on course_id\n    grade VARCHAR(2),\n    PRIMARY KEY (student_id, course_id)\n);\n\n-- IN 2NF (split into separate tables)\nCREATE TABLE students (\n    student_id INT PRIMARY KEY,\n    student_name VARCHAR(100)\n);\n\nCREATE TABLE courses (\n    course_id INT PRIMARY KEY,\n    course_name VARCHAR(100)\n);\n\nCREATE TABLE enrollments (\n    student_id INT,\n    course_id INT,\n    grade VARCHAR(2),\n    PRIMARY KEY (student_id, course_id),\n    FOREIGN KEY (student_id) REFERENCES students(student_id),\n    FOREIGN KEY (course_id) REFERENCES courses(course_id)\n);\n```\n\n#### **3rd Normal Form (3NF):**\n\nRules:\n- Must be in 2NF\n- No transitive dependencies (non-key attributes must not depend on other non-key attributes)\n\n```sql\n-- NOT in 3NF\nCREATE TABLE students (\n    student_id INT PRIMARY KEY,\n    student_name VARCHAR(100),\n    department_id INT,\n    department_name VARCHAR(100),  -- âŒ Depends on department_id (transitive)\n    department_head VARCHAR(100)   -- âŒ Depends on department_id (transitive)\n);\n\n-- IN 3NF\nCREATE TABLE departments (\n    department_id INT PRIMARY KEY,\n    department_name VARCHAR(100),\n    department_head VARCHAR(100)\n);\n\nCREATE TABLE students (\n    student_id INT PRIMARY KEY,\n    student_name VARCHAR(100),\n    department_id INT,\n    FOREIGN KEY (department_id) REFERENCES departments(department_id)\n);\n```\n\n### Visual Normalization Process:\n\n```\nUNNORMALIZED:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Student â”‚ Courses    â”‚ Grades      â”‚ Dept Head  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Alice   â”‚Math,Physicsâ”‚ A,B         â”‚ Dr. Smith  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n          â†“ Apply 1NF (atomic values)\n\n1NF:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Student â”‚ Course  â”‚ Grade â”‚ Dept Head  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Alice   â”‚ Math    â”‚   A   â”‚ Dr. Smith  â”‚\nâ”‚ Alice   â”‚ Physics â”‚   B   â”‚ Dr. Smith  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n          â†“ Apply 2NF (remove partial dependencies)\n\n2NF:\nstudents:              enrollments:        courses:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ idâ”‚name â”‚dept_hâ”‚    â”‚sid â”‚cid â”‚gr â”‚    â”‚cid   â”‚name     â”‚\nâ”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1 â”‚Aliceâ”‚DrSmi â”‚    â”‚ 1  â”‚101 â”‚A  â”‚    â”‚ 101  â”‚Math     â”‚\nâ””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜    â”‚ 1  â”‚102 â”‚B  â”‚    â”‚ 102  â”‚Physics  â”‚\n                      â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n          â†“ Apply 3NF (remove transitive dependencies)\n\n3NF:\nstudents:              enrollments:        courses:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ id â”‚name â”‚deptâ”‚    â”‚sid â”‚cid â”‚gr â”‚    â”‚cid â”‚name     â”‚\nâ”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1  â”‚Aliceâ”‚  1 â”‚    â”‚ 1  â”‚101 â”‚A  â”‚    â”‚101 â”‚Math     â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜    â”‚ 1  â”‚102 â”‚B  â”‚    â”‚102 â”‚Physics  â”‚\n                     â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\ndepartments:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚did â”‚dept_name â”‚head      â”‚\nâ”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1  â”‚Comp Sci  â”‚Dr. Smith â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâœ… No redundancy!\nâœ… Easy to update!\nâœ… Data integrity maintained!\n```\n\n---\n\n## ğŸš€ Indexes & Performance {#indexes}\n\n### What is an Index?\n\nAn **index** is a data structure that improves query speed at the cost of slower writes and additional storage.\n\nThink of it like a book's index:\n```\nWithout Index:          With Index:\nRead every page         Jump directly to page\n(Sequential Scan)       (Index Scan)\n\nğŸ“– Page 1              Index:\nğŸ“– Page 2              \"Algorithm\" â†’ Page 245\nğŸ“– Page 3              \"Binary Search\" â†’ Page 312\nğŸ“– Page 4              \"Cache\" â†’ Page 89\n...                     ...\nğŸ“– Page 500            Direct access! âš¡\n```\n\n### Creating Indexes:\n\n```sql\n-- Create index on single column\nCREATE INDEX idx_student_name ON students(name);\n\n-- Create index on multiple columns (composite index)\nCREATE INDEX idx_name_age ON students(name, age);\n\n-- Create unique index (enforces uniqueness)\nCREATE UNIQUE INDEX idx_unique_email ON students(email);\n\n-- Show indexes on table\nSHOW INDEX FROM students;\n\n-- Drop index\nDROP INDEX idx_student_name ON students;\n\n-- Visual index structure (B-Tree):\n/*\nWithout Index - Full Table Scan:\nSELECT * FROM students WHERE name = 'Alice';\n\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ Alice â”‚ 20 â”‚ 3.8 â”‚ â† Check this row\nâ”‚ 2  â”‚ Bob   â”‚ 22 â”‚ 3.5 â”‚ â† Check this row\nâ”‚ 3  â”‚ Charlieâ”‚21 â”‚ 3.9 â”‚ â† Check this row\nâ”‚ 4  â”‚ Diana â”‚ 23 â”‚ 3.7 â”‚ â† Check this row\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\nMust scan ALL rows! â° O(n)\n\nWith Index on 'name':\nB-Tree Index:\n           [Diana]\n          /       \\\n    [Alice]      [Charlie]\n       â†“\n  [Bob, Diana, ...]\n\nDirect lookup! âš¡ O(log n)\n*/\n```\n\n### Index Types:\n\n```sql\n-- 1. B-Tree Index (Default, most common)\nCREATE INDEX idx_btree ON students(age);\n-- Good for: =, <, >, BETWEEN, LIKE 'prefix%'\n\n-- 2. Hash Index\nCREATE INDEX idx_hash ON students(email) USING HASH;\n-- Good for: = (equality only)\n-- NOT good for: ranges, sorting\n\n-- 3. Full-Text Index (for text search)\nCREATE FULLTEXT INDEX idx_fulltext ON articles(content);\n-- Use with MATCH() AGAINST()\nSELECT * FROM articles \nWHERE MATCH(content) AGAINST('database optimization');\n\n-- 4. Spatial Index (for geographic data)\nCREATE SPATIAL INDEX idx_location ON stores(coordinates);\n\n-- Visual comparison:\n/*\nB-Tree Index:                Hash Index:\n    [50]                     Hash(\"alice@email.com\") â†’ Bucket 42\n   /    \\                    Direct lookup, no order\n[25]    [75]\n/  \\    /  \\\n...........\n\nâœ“ Range queries           âœ— No range queries\nâœ“ Sorting                 âœ— No sorting\nâœ“ Pattern match           âœ— No patterns\nâœ“ Ordered access          âœ“ Fastest for =\n*/\n```\n\n### When to Use Indexes:\n\n```sql\n-- âœ… CREATE INDEX when:\n-- 1. Column used frequently in WHERE clause\nCREATE INDEX idx_age ON students(age);\nSELECT * FROM students WHERE age = 20;  -- Fast!\n\n-- 2. Column used in JOIN\nCREATE INDEX idx_student_id ON enrollments(student_id);\nSELECT * FROM students s\nJOIN enrollments e ON s.id = e.student_id;  -- Fast join!\n\n-- 3. Column used in ORDER BY\nCREATE INDEX idx_gpa ON students(gpa);\nSELECT * FROM students ORDER BY gpa DESC;  -- Fast sort!\n\n-- 4. Foreign keys\nCREATE INDEX idx_fk_course ON enrollments(course_id);\n\n-- âŒ DON'T CREATE INDEX when:\n-- 1. Small tables (< 1000 rows) - full scan is fast enough\n-- 2. Columns with low cardinality (few unique values)\n--    Example: gender (only 2-3 values), boolean fields\n-- 3. Frequently updated columns - index maintenance slows writes\n-- 4. Columns rarely used in queries\n\n-- Cardinality visualization:\n/*\nHigh Cardinality (Good for index):\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ email        â”‚ â† All unique values\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ alice@...    â”‚ â† Index works great!\nâ”‚ bob@...      â”‚\nâ”‚ charlie@...  â”‚\nâ”‚ diana@...    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nLow Cardinality (Bad for index):\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ gender   â”‚ â† Only 2-3 values\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ M        â”‚ â† Index not helpful\nâ”‚ F        â”‚    (50% of rows anyway)\nâ”‚ M        â”‚\nâ”‚ F        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### Composite Indexes (Multi-column):\n\n```sql\n-- Create composite index\nCREATE INDEX idx_age_gpa ON students(age, gpa);\n\n-- Column order matters!\n-- This index helps queries in this order:\n-- âœ… WHERE age = 20 AND gpa > 3.5\n-- âœ… WHERE age = 20\n-- âŒ WHERE gpa > 3.5  (doesn't use index efficiently)\n\n-- Left-most prefix rule:\n/*\nIndex: (age, gpa, name)\n\nCan use index:               Can't use index efficiently:\nâœ“ WHERE age = 20             âœ— WHERE gpa > 3.5\nâœ“ WHERE age = 20 AND gpa > 3.5   âœ— WHERE name = 'Alice'\nâœ“ WHERE age = 20 AND gpa > 3.5 AND name = 'Alice'\n\nThink of it like a phonebook:\nYou can find \"Smith, John\" (last, first)\nBut not efficiently find all \"Johns\" (first name only)\n*/\n```\n\n### Index Performance Impact:\n\n```sql\n-- Check query execution plan\nEXPLAIN SELECT * FROM students WHERE age = 20;\n\n-- Example output:\n/*\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”\nâ”‚ id â”‚ type  â”‚ key  â”‚ rows â”‚ Extra  â”‚...   â”‚\nâ”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1  â”‚ ALL   â”‚ NULL â”‚ 1000 â”‚        â”‚...   â”‚ â† No index, scans 1000 rows\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜\n\nAfter creating index:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚ ref   â”‚idx_age  â”‚ 50   â”‚Using indexâ”‚...   â”‚ â† Uses index, only 50 rows!\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜\n\nPerformance improvement: 20x faster! âš¡\n*/\n\n-- Covering index (includes all queried columns)\nCREATE INDEX idx_covering ON students(age, name, gpa);\n\nSELECT name, gpa FROM students WHERE age = 20;\n-- Can satisfy entire query from index without touching table!\n```\n\n---\n\n## ğŸ’¾ Transactions & ACID {#transactions}\n\n### What is a Transaction?\n\nA **transaction** is a sequence of operations treated as a single unit of work.\n\n```\nReal-world example: Bank Transfer\n\nTransaction:\n1. START TRANSACTION\n2. Withdraw $100 from Account A\n3. Deposit $100 to Account B\n4. COMMIT (if all succeed) or ROLLBACK (if any fails)\n\nEither BOTH happen or NEITHER happens!\n```\n\n### ACID Properties:\n\n```\nA - Atomicity:    All or nothing\nC - Consistency:  Valid state to valid state\nI - Isolation:    Transactions don't interfere\nD - Durability:   Changes are permanent\n\nVisual ACID:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ A - Atomicity                        â”‚\nâ”‚ â”Œâ”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â”                      â”‚\nâ”‚ â”‚âœ“ â”‚â†’â”‚âœ“ â”‚â†’â”‚âœ— â”‚ â†’ ROLLBACK ALL       â”‚\nâ”‚ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜                      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ C - Consistency                      â”‚\nâ”‚ Valid    Transaction    Valid        â”‚\nâ”‚ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ State        â”‚\nâ”‚ (Constraints maintained)             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ I - Isolation                        â”‚\nâ”‚ Transaction A: [====]                â”‚\nâ”‚                       â†“ No overlap   â”‚\nâ”‚ Transaction B:        [====]         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ D - Durability                       â”‚\nâ”‚ COMMIT â†’ [ğŸ’¾ Permanent Storage]      â”‚\nâ”‚ (Survives power loss, crashes)       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Transaction Commands:\n\n```sql\n-- Start transaction\nSTART TRANSACTION;\n-- or\nBEGIN;\n\n-- Perform operations\nUPDATE accounts SET balance = balance - 100 WHERE id = 1;\nUPDATE accounts SET balance = balance + 100 WHERE id = 2;\n\n-- Commit (make permanent)\nCOMMIT;\n\n-- Or rollback (undo everything)\nROLLBACK;\n\n-- Example: Bank transfer\nSTART TRANSACTION;\n\n-- Step 1: Check sufficient balance\nSELECT balance FROM accounts WHERE id = 1 FOR UPDATE;\n-- FOR UPDATE locks the row\n\n-- Step 2: Deduct from sender\nUPDATE accounts \nSET balance = balance - 100 \nWHERE id = 1 AND balance >= 100;\n\n-- Step 3: Add to receiver\nUPDATE accounts \nSET balance = balance + 100 \nWHERE id = 2;\n\n-- Step 4: Commit if all succeeded\nCOMMIT;\n\n-- Visual transaction flow:\n/*\nTime â†’\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ BEGIN TRANSACTION                          â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Account A: $500                            â”‚\nâ”‚ Account B: $200                            â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ UPDATE A: $500 â†’ $400 (pending)            â”‚\nâ”‚ UPDATE B: $200 â†’ $300 (pending)            â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ All OK? COMMIT!                            â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Account A: $400 âœ… (permanent)             â”‚\nâ”‚ Account B: $300 âœ… (permanent)             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nIf error occurs:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ BEGIN TRANSACTION                          â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Account A: $500                            â”‚\nâ”‚ Account B: $200                            â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ UPDATE A: $500 â†’ $400 (pending)            â”‚\nâ”‚ UPDATE B: ERROR! ğŸ’¥                        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ ROLLBACK!                                  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Account A: $500 âœ… (unchanged)             â”‚\nâ”‚ Account B: $200 âœ… (unchanged)             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### Isolation Levels:\n\n```sql\n-- Set isolation level\nSET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;\nSET TRANSACTION ISOLATION LEVEL READ COMMITTED;\nSET TRANSACTION ISOLATION LEVEL REPEATABLE READ;\nSET TRANSACTION ISOLATION LEVEL SERIALIZABLE;\n\n-- Isolation level comparison:\n/*\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Level              â”‚ Dirty    â”‚ Non-     â”‚ Phantom     â”‚\nâ”‚                    â”‚ Read     â”‚ Repeat   â”‚ Read        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ READ UNCOMMITTED   â”‚ Possible â”‚ Possible â”‚ Possible    â”‚\nâ”‚ (Fastest)          â”‚    âœ—     â”‚    âœ—     â”‚     âœ—       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ READ COMMITTED     â”‚ Preventedâ”‚ Possible â”‚ Possible    â”‚\nâ”‚ (Default)          â”‚    âœ“     â”‚    âœ—     â”‚     âœ—       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ REPEATABLE READ    â”‚ Preventedâ”‚ Preventedâ”‚ Possible    â”‚\nâ”‚                    â”‚    âœ“     â”‚    âœ“     â”‚     âœ—       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ SERIALIZABLE       â”‚ Preventedâ”‚ Preventedâ”‚ Prevented   â”‚\nâ”‚ (Slowest)          â”‚    âœ“     â”‚    âœ“     â”‚     âœ“       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nProblems explained:\n\n1. DIRTY READ:\nTransaction A:           Transaction B:\nBEGIN                    BEGIN\n                        UPDATE balance = 500\nREAD balance = 500 âŒ    (not committed yet!)\n                        ROLLBACK\n(Read uncommitted data that was rolled back!)\n\n2. NON-REPEATABLE READ:\nTransaction A:           Transaction B:\nBEGIN\nREAD balance = 100\n                        BEGIN\n                        UPDATE balance = 200\n                        COMMIT\nREAD balance = 200 âŒ\n(Same read gives different result!)\n\n3. PHANTOM READ:\nTransaction A:           Transaction B:\nBEGIN\nCOUNT(*) = 5\n                        BEGIN\n                        INSERT new row\n                        COMMIT\nCOUNT(*) = 6 âŒ\n(New rows appeared!)\n*/\n```\n\n### Deadlock:\n\n```sql\n-- Deadlock scenario\n-- Transaction A:\nSTART TRANSACTION;\nUPDATE table1 SET ... WHERE id = 1;  -- Locks table1 row 1\n-- waiting...\nUPDATE table2 SET ... WHERE id = 2;  -- Needs table2 row 2 (locked by B!)\n\n-- Transaction B:\nSTART TRANSACTION;\nUPDATE table2 SET ... WHERE id = 2;  -- Locks table2 row 2\n-- waiting...\nUPDATE table1 SET ... WHERE id = 1;  -- Needs table1 row 1 (locked by A!)\n\n-- Visual deadlock:\n/*\nTransaction A          Transaction B\n     â†“                      â†“\n   Lock Row 1            Lock Row 2\n     â†“                      â†“\n  Need Row 2            Need Row 1\n     â†“                      â†“\n   WAITING! â°          WAITING! â°\n     â†‘                      â†‘\n     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n        DEADLOCK! ğŸ’€\n\nDatabase detects and kills one transaction!\n\nPrevention strategies:\n1. Always lock in same order\n2. Keep transactions short\n3. Use appropriate isolation level\n4. Add timeout: SET innodb_lock_wait_timeout = 50;\n*/\n```\n\n---\n\n## ğŸ“¦ Stored Procedures & Functions {#stored-procedures}\n\n### Stored Procedures:\n\n```sql\n-- Create procedure\nDELIMITER //\nCREATE PROCEDURE get_student_info(IN student_id INT)\nBEGIN\n    SELECT \n        s.name,\n        s.email,\n        s.gpa,\n        COUNT(e.course_id) AS course_count\n    FROM students s\n    LEFT JOIN enrollments e ON s.id = e.student_id\n    WHERE s.id = student_id\n    GROUP BY s.id;\nEND //\nDELIMITER ;\n\n-- Call procedure\nCALL get_student_info(1);\n\n-- Procedure with OUT parameter\nDELIMITER //\nCREATE PROCEDURE get_avg_gpa(OUT avg_gpa DECIMAL(3,2))\nBEGIN\n    SELECT AVG(gpa) INTO avg_gpa FROM students;\nEND //\nDELIMITER ;\n\n-- Call with output\nCALL get_avg_gpa(@result);\nSELECT @result AS average_gpa;\n\n-- Procedure with INOUT parameter\nDELIMITER //\nCREATE PROCEDURE increment_value(INOUT val INT)\nBEGIN\n    SET val = val + 1;\nEND //\nDELIMITER ;\n\nSET @number = 5;\nCALL increment_value(@number);\nSELECT @number;  -- Result: 6\n\n-- Complex procedure example\nDELIMITER //\nCREATE PROCEDURE enroll_student(\n    IN p_student_id INT,\n    IN p_course_id INT,\n    OUT p_status VARCHAR(50)\n)\nBEGIN\n    DECLARE student_exists INT;\n    DECLARE course_exists INT;\n    DECLARE already_enrolled INT;\n    \n    -- Check if student exists\n    SELECT COUNT(*) INTO student_exists \n    FROM students WHERE id = p_student_id;\n    \n    IF student_exists = 0 THEN\n        SET p_status = 'Error: Student not found';\n    ELSE\n        -- Check if course exists\n        SELECT COUNT(*) INTO course_exists \n        FROM courses WHERE course_id = p_course_id;\n        \n        IF course_exists = 0 THEN\n            SET p_status = 'Error: Course not found';\n        ELSE\n            -- Check if already enrolled\n            SELECT COUNT(*) INTO already_enrolled \n            FROM enrollments \n            WHERE student_id = p_student_id \n            AND course_id = p_course_id;\n            \n            IF already_enrolled > 0 THEN\n                SET p_status = 'Error: Already enrolled';\n            ELSE\n                -- Enroll student\n                INSERT INTO enrollments (student_id, course_id)\n                VALUES (p_student_id, p_course_id);\n                \n                SET p_status = 'Success: Student enrolled';\n            END IF;\n        END IF;\n    END IF;\nEND //\nDELIMITER ;\n\n-- Use it\nCALL enroll_student(1, 101, @status);\nSELECT @status;\n\n-- Visual procedure flow:\n/*\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ CALL enroll_student(1, 101, ?)     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n               â†“\n         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n         â”‚Check studentâ”‚\n         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n                â†“\n          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n      NO  â”‚ Exists?  â”‚ YES\n    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”\n    â†“                       â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚Error   â”‚            â”‚Check course â”‚\nâ”‚Return  â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â†“\n                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                   NO  â”‚ Exists?  â”‚ YES\n                 â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”\n                 â†“                       â†“\n            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n            â”‚Error   â”‚          â”‚Check enrollmentâ”‚\n            â”‚Return  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n            â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â†“\n                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                               NO  â”‚ Already? â”‚ YES\n                             â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”\n                             â†“                      â†“\n                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”\n                        â”‚ INSERT â”‚            â”‚Error   â”‚\n                        â”‚SUCCESS â”‚            â”‚Return  â”‚\n                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n### Functions:\n\n```sql\n-- Create function (must return value)\nDELIMITER //\nCREATE FUNCTION calculate_grade(gpa DECIMAL(3,2))\nRETURNS VARCHAR(20)\nDETERMINISTIC\nBEGIN\n    DECLARE grade VARCHAR(20);\n    \n    IF gpa >= 3.7 THEN\n        SET grade = 'Excellent';\n    ELSEIF gpa >= 3.3 THEN\n        SET grade = 'Good';\n    ELSEIF gpa >= 3.0 THEN\n        SET grade = 'Average';\n    ELSE\n        SET grade = 'Needs Improvement';\n    END IF;\n    \n    RETURN grade;\nEND //\nDELIMITER ;\n\n-- Use function\nSELECT \n    name,\n    gpa,\n    calculate_grade(gpa) AS performance\nFROM students;\n\n-- More function examples\nDELIMITER //\n\n-- Function to calculate age from birthdate\nCREATE FUNCTION calculate_age(birth_date DATE)\nRETURNS INT\nDETERMINISTIC\nBEGIN\n    RETURN YEAR(CURDATE()) - YEAR(birth_date);\nEND //\n\n-- Function to get student count in course\nCREATE FUNCTION get_enrollment_count(course_id INT)\nRETURNS INT\nREADS SQL DATA\nBEGIN\n    DECLARE count INT;\n    SELECT COUNT(*) INTO count \n    FROM enrollments \n    WHERE course_id = course_id;\n    RETURN count;\nEND //\n\nDELIMITER ;\n\n-- Difference between Procedure and Function:\n/*\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Feature          â”‚ Procedure   â”‚ Function     â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Returns value    â”‚ Optional    â”‚ Must return  â”‚\nâ”‚ RETURN statement â”‚ No          â”‚ Yes          â”‚\nâ”‚ OUT parameters   â”‚ Yes         â”‚ No           â”‚\nâ”‚ Use in SELECT    â”‚ No          â”‚ Yes          â”‚\nâ”‚ DML operations   â”‚ Yes         â”‚ Limited      â”‚\nâ”‚ Transaction      â”‚ Can use     â”‚ Cannot use   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nWhen to use:\nProcedure: Complex business logic, multiple operations\nFunction: Calculations, single value return, use in queries\n*/\n```\n\n---\n\n## ğŸ‘ï¸ Views & Triggers {#views-triggers}\n\n### Views (Virtual Tables):\n\n```sql\n-- Create view\nCREATE VIEW student_summary AS\nSELECT \n    s.id,\n    s.name,\n    s.email,\n    s.gpa,\n    COUNT(e.course_id) AS course_count,\n    AVG(CASE \n        WHEN e.grade = 'A' THEN 4.0\n        WHEN e.grade = 'B' THEN 3.0\n        WHEN e.grade = 'C' THEN 2.0\n        ELSE 1.0\n    END) AS average_grade_points\nFROM students s\nLEFT JOIN enrollments e ON s.id = e.student_id\nGROUP BY s.id, s.name, s.email, s.gpa;\n\n-- Query view like a table\nSELECT * FROM student_summary;\nSELECT * FROM student_summary WHERE gpa > 3.5;\n\n-- Update view (if updatable)\nUPDATE student_summary \nSET email = 'newemail@example.com' \nWHERE id = 1;\n\n-- Drop view\nDROP VIEW student_summary;\n\n-- Create or replace view\nCREATE OR REPLACE VIEW high_performers AS\nSELECT name, gpa\nFROM students\nWHERE gpa >= 3.7;\n\n-- View with check option\nCREATE VIEW honor_students AS\nSELECT * FROM students\nWHERE gpa >= 3.5\nWITH CHECK OPTION;\n\n-- This will fail:\nUPDATE honor_students SET gpa = 3.0 WHERE id = 1;\n-- Error: CHECK OPTION failed\n\n-- Visual view concept:\n/*\nBase Tables:                    View (Virtual):\nstudents              enrollments        student_summary\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚ 1  â”‚Aliceâ”‚3.9 â”‚    â”‚ 1 â”‚101 â”‚        â”‚ 1  â”‚Aliceâ”‚   2   â”‚ 3.9 â”‚\nâ”‚ 2  â”‚Bob  â”‚3.5 â”‚    â”‚ 1 â”‚102 â”‚   â†’    â”‚ 2  â”‚Bob  â”‚   1   â”‚ 3.5 â”‚\nâ”‚ 3  â”‚Char â”‚3.8 â”‚    â”‚ 2 â”‚101 â”‚        â”‚ 3  â”‚Char â”‚   0   â”‚ 3.8 â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”´â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\n                                          â†‘ (Dynamically computed)\n\nBenefits:\nâœ… Simplify complex queries\nâœ… Security (hide sensitive columns)\nâœ… Backward compatibility\nâœ… Logical data independence\n*/\n```\n\n### Triggers (Automatic Actions):\n\n```sql\n-- Create trigger BEFORE INSERT\nDELIMITER //\nCREATE TRIGGER before_student_insert\nBEFORE INSERT ON students\nFOR EACH ROW\nBEGIN\n    -- Validate email format\n    IF NEW.email NOT LIKE '%@%.%' THEN\n        SIGNAL SQLSTATE '45000'\n        SET MESSAGE_TEXT = 'Invalid email format';\n    END IF;\n    \n    -- Auto-set enrollment date\n    SET NEW.enrollment_date = CURDATE();\nEND //\nDELIMITER ;\n\n-- Create trigger AFTER INSERT\nDELIMITER //\nCREATE TRIGGER after_student_insert\nAFTER INSERT ON students\nFOR EACH ROW\nBEGIN\n    -- Log the insertion\n    INSERT INTO student_audit_log (student_id, action, timestamp)\n    VALUES (NEW.id, 'INSERTED', NOW());\nEND //\nDELIMITER ;\n\n-- Create trigger BEFORE UPDATE\nDELIMITER //\nCREATE TRIGGER before_student_update\nBEFORE UPDATE ON students\nFOR EACH ROW\nBEGIN\n    -- Prevent GPA decrease\n    IF NEW.gpa < OLD.gpa THEN\n        SIGNAL SQLSTATE '45000'\n        SET MESSAGE_TEXT = 'GPA cannot decrease';\n    END IF;\n    \n    -- Log change\n    INSERT INTO gpa_history (student_id, old_gpa, new_gpa, change_date)\n    VALUES (OLD.id, OLD.gpa, NEW.gpa, NOW());\nEND //\nDELIMITER ;\n\n-- Create trigger AFTER DELETE\nDELIMITER //\nCREATE TRIGGER after_student_delete\nAFTER DELETE ON students\nFOR EACH ROW\nBEGIN\n    -- Clean up enrollments\n    DELETE FROM enrollments WHERE student_id = OLD.id;\n    \n    -- Log deletion\n    INSERT INTO student_audit_log (student_id, action, timestamp)\n    VALUES (OLD.id, 'DELETED', NOW());\nEND //\nDELIMITER ;\n\n-- Show triggers\nSHOW TRIGGERS;\n\n-- Drop trigger\nDROP TRIGGER before_student_insert;\n\n-- Trigger execution flow:\n/*\nINSERT INTO students VALUES (...);\n           â†“\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚BEFORE TRIGGERâ”‚\n    â”‚ - Validate   â”‚\n    â”‚ - Modify NEW â”‚\n    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n           â†“\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚ ACTUAL INSERTâ”‚\n    â”‚   (if valid) â”‚\n    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n           â†“\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚AFTER TRIGGER â”‚\n    â”‚ - Audit log  â”‚\n    â”‚ - Cascade    â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nOLD vs NEW:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Operation  â”‚  OLD   â”‚   NEW   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ INSERT     â”‚  N/A   â”‚ Availableâ”‚\nâ”‚ UPDATE     â”‚Availableâ”‚Availableâ”‚\nâ”‚ DELETE     â”‚Availableâ”‚  N/A    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n\n-- Real-world trigger example: Inventory management\nDELIMITER //\nCREATE TRIGGER update_inventory_on_sale\nAFTER INSERT ON sales\nFOR EACH ROW\nBEGIN\n    -- Decrease inventory\n    UPDATE products\n    SET stock_quantity = stock_quantity - NEW.quantity\n    WHERE product_id = NEW.product_id;\n    \n    -- Alert if low stock\n    IF (SELECT stock_quantity FROM products WHERE product_id = NEW.product_id) < 10 THEN\n        INSERT INTO alerts (product_id, message, created_at)\n        VALUES (NEW.product_id, 'Low stock alert!', NOW());\n    END IF;\nEND //\nDELIMITER ;\n```\n\n---\n\n## âš¡ Query Optimization {#optimization}\n\n### Query Optimization Techniques:\n\n#### 1. **Use EXPLAIN to analyze queries:**\n\n```sql\nEXPLAIN SELECT * FROM students WHERE age = 20;\n\n-- Example output:\n/*\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ id â”‚select_typeâ”‚table   â”‚ type â”‚possible_keysâ”‚key â”‚rows â”‚Extra  â”‚\nâ”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1  â”‚ SIMPLE  â”‚students   â”‚ ALL  â”‚ NULL     â”‚NULL â”‚1000  â”‚Using whereâ”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nType values (best to worst):\nâœ… system   - Table has only one row\nâœ… const    - Primary key or unique index lookup\nâœ… eq_ref   - One row per join combination\nâœ… ref      - Non-unique index lookup\nâœ… range    - Index range scan\nâš ï¸ index    - Full index scan\nâŒ ALL      - Full table scan (SLOW!)\n\nKey: Which index is used (NULL = no index!)\nRows: Estimated rows to examine\n*/\n\nEXPLAIN EXTENDED SELECT * FROM students WHERE age = 20;\nSHOW WARNINGS;  -- Shows optimized query\n```\n\n#### 2. **Select only needed columns:**\n\n```sql\n-- âŒ BAD: Select all columns\nSELECT * FROM students;\n\n-- âœ… GOOD: Select only needed columns\nSELECT name, email FROM students;\n\n-- Performance comparison:\n/*\nSELECT *:\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”\nâ”‚ id â”‚ name â”‚age â”‚ email â”‚ addr â”‚ gpa â”‚... â”‚... â”‚... â”‚ â† Transfer all data\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜\nNetwork: 1000 bytes per row\n\nSELECT name, email:\nâ”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ name â”‚ email â”‚ â† Transfer only 2 columns\nâ””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜\nNetwork: 200 bytes per row\n\n5x faster network transfer! âš¡\n*/\n```\n\n#### 3. **Use WHERE instead of HAVING when possible:**\n\n```sql\n-- âŒ SLOW: Filter after grouping\nSELECT age, COUNT(*)\nFROM students\nGROUP BY age\nHAVING age > 20;\n\n-- âœ… FAST: Filter before grouping\nSELECT age, COUNT(*)\nFROM students\nWHERE age > 20\nGROUP BY age;\n\n-- Execution flow:\n/*\nBad (HAVING):\nAll Rows â†’ GROUP BY â†’ Calculate â†’ HAVING filter\n(1000)     (groups)    (compute)   (filter)\n\nGood (WHERE):\nAll Rows â†’ WHERE filter â†’ GROUP BY â†’ Calculate\n(1000)     (200 rows)     (groups)    (compute)\n\nWHERE filters BEFORE grouping (fewer rows to group!)\n*/\n```\n\n#### 4. **Use EXISTS instead of IN for subqueries:**\n\n```sql\n-- âŒ SLOWER: IN with subquery\nSELECT name FROM students\nWHERE id IN (\n    SELECT student_id FROM enrollments WHERE grade = 'A'\n);\n\n-- âœ… FASTER: EXISTS\nSELECT name FROM students s\nWHERE EXISTS (\n    SELECT 1 FROM enrollments e \n    WHERE e.student_id = s.id AND e.grade = 'A'\n);\n\n-- Why EXISTS is faster:\n/*\nIN:\n1. Execute subquery (get ALL matching IDs)\n2. Check if each student.id is IN result set\n\nEXISTS:\n1. For each student, check if EXISTS\n2. STOPS as soon as one match found! âš¡\n\nExample with 10,000 enrollments:\nIN:    Find ALL 'A' grades (scan 10,000 rows)\nEXISTS: Find first 'A' grade, stop! (might scan 10 rows)\n*/\n```\n\n#### 5. **Use JOINs instead of subqueries:**\n\n```sql\n-- âŒ SLOWER: Subquery in SELECT\nSELECT \n    name,\n    (SELECT COUNT(*) FROM enrollments e WHERE e.student_id = s.id) AS course_count\nFROM students s;\n\n-- âœ… FASTER: JOIN\nSELECT \n    s.name,\n    COUNT(e.course_id) AS course_count\nFROM students s\nLEFT JOIN enrollments e ON s.id = e.student_id\nGROUP BY s.id, s.name;\n\n-- Performance:\n/*\nSubquery: O(n Ã— m) - For each student, scan enrollments\nJOIN:     O(n + m) - One pass through both tables\n\n1000 students Ã— 5000 enrollments = 5,000,000 operations\nvs\n1000 + 5000 = 6,000 operations\n\n833x faster! âš¡\n*/\n```\n\n#### 6. **Avoid functions in WHERE clause:**\n\n```sql\n-- âŒ BAD: Function on indexed column\nSELECT * FROM students WHERE YEAR(enrollment_date) = 2024;\n\n-- âœ… GOOD: Use range\nSELECT * FROM students \nWHERE enrollment_date >= '2024-01-01' \nAND enrollment_date < '2025-01-01';\n\n-- Why this matters:\n/*\nBad: YEAR(enrollment_date) = 2024\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚enrollment_date â”‚ â† Index on this column\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 2024-01-15     â”‚ Must apply YEAR() to EVERY row!\nâ”‚ 2024-03-20     â”‚ Index cannot be used! âŒ\nâ”‚ 2024-06-10     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nGood: enrollment_date >= '2024-01-01'\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚enrollment_date â”‚ â† Index can be used directly! âœ…\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 2024-01-15     â”‚ Fast range scan on index\nâ”‚ 2024-03-20     â”‚\nâ”‚ 2024-06-10     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n*/\n```\n\n#### 7. **Use LIMIT for large result sets:**\n\n```sql\n-- Without pagination (load everything)\nSELECT * FROM students ORDER BY gpa DESC;  -- 1 million rows!\n\n-- With pagination (load in chunks)\nSELECT * FROM students \nORDER BY gpa DESC \nLIMIT 100 OFFSET 0;  -- Page 1: rows 1-100\n\nSELECT * FROM students \nORDER BY gpa DESC \nLIMIT 100 OFFSET 100;  -- Page 2: rows 101-200\n\n-- Keyset pagination (faster for large offsets)\nSELECT * FROM students \nWHERE id > last_seen_id \nORDER BY id \nLIMIT 100;\n```\n\n#### 8. **Optimize JOIN order:**\n\n```sql\n-- MySQL optimizer usually does this, but understanding helps\n\n-- Small table first\nSELECT *\nFROM small_table s  -- 100 rows\nJOIN large_table l ON s.id = l.small_id  -- 1,000,000 rows\nWHERE s.category = 'active';\n\n-- Execution:\n/*\nStep 1: Filter small_table (100 â†’ 10 rows with category='active')\nStep 2: For each 10 rows, join with large_table\nTotal: 10 joins instead of 100!\n\nCompare to wrong order:\nStep 1: Scan large_table (1,000,000 rows)\nStep 2: Join with small_table for each row\nMuch slower! â°\n*/\n```\n\n#### 9. **Use covering indexes:**\n\n```sql\n-- Query: SELECT name, age FROM students WHERE age = 20;\n\n-- Regular index\nCREATE INDEX idx_age ON students(age);\n-- Must: lookup index â†’ find row IDs â†’ fetch rows from table\n\n-- Covering index\nCREATE INDEX idx_age_name ON students(age, name);\n-- All data in index! No table lookup needed! âš¡\n\n-- Visual:\n/*\nRegular index:\nidx_age â†’ [20, 20, 20, ...] â†’ Row IDs â†’ Fetch from table\n                                 â†“\n                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                          â”‚ TABLE LOOKUP â”‚ â† Extra I/O!\n                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nCovering index:\nidx_age_name â†’ [(20, 'Alice'), (20, 'Bob'), ...] âœ…\n                â†‘ All data here!\n*/\n```\n\n#### 10. **Avoid SELECT DISTINCT when possible:**\n\n```sql\n-- âŒ SLOWER: DISTINCT requires sorting/grouping\nSELECT DISTINCT name FROM students;\n\n-- âœ… FASTER: Use GROUP BY (if appropriate)\nSELECT name FROM students GROUP BY name;\n\n-- Or better: Fix data model to avoid duplicates!\n```\n\n### Query Optimization Checklist:\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ âœ… Query Optimization Checklist                  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ â–¡ Used EXPLAIN to analyze query                 â”‚\nâ”‚ â–¡ Created indexes on WHERE/JOIN columns         â”‚\nâ”‚ â–¡ Selected only needed columns (not SELECT *)   â”‚\nâ”‚ â–¡ Used WHERE instead of HAVING when possible    â”‚\nâ”‚ â–¡ Used EXISTS instead of IN for subqueries      â”‚\nâ”‚ â–¡ Used JOINs instead of correlated subqueries   â”‚\nâ”‚ â–¡ Avoided functions on indexed columns          â”‚\nâ”‚ â–¡ Added LIMIT for large results                 â”‚\nâ”‚ â–¡ Used covering indexes                         â”‚\nâ”‚ â–¡ Checked for missing indexes (type=ALL)        â”‚\nâ”‚ â–¡ Optimized JOIN order (small tables first)     â”‚\nâ”‚ â–¡ Avoided SELECT DISTINCT unnecessarily         â”‚\nâ”‚ â–¡ Used appropriate data types                   â”‚\nâ”‚ â–¡ Normalized database properly                  â”‚\nâ”‚ â–¡ Added composite indexes for multi-col queries â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ—„ï¸ NoSQL Databases {#nosql}\n\n### SQL vs NoSQL:\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Feature      â”‚ SQL              â”‚ NoSQL            â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Data Model   â”‚ Tables/Rows      â”‚ Documents/Key-Valâ”‚\nâ”‚ Schema       â”‚ Fixed (strict)   â”‚ Flexible/Dynamic â”‚\nâ”‚ Scalability  â”‚ Vertical (â†‘)     â”‚ Horizontal (â†’)   â”‚\nâ”‚ ACID         â”‚ Strong           â”‚ Eventual         â”‚\nâ”‚ Query        â”‚ SQL              â”‚ API calls        â”‚\nâ”‚ Joins        â”‚ Yes              â”‚ Limited/None     â”‚\nâ”‚ Best For     â”‚ Complex queries  â”‚ Large scale data â”‚\nâ”‚ Examples     â”‚ MySQL,PostgreSQL â”‚ MongoDB,Cassandraâ”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nVisual comparison:\nSQL (Relational):\nstudents table         enrollments table\nâ”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”\nâ”‚ id â”‚ name  â”‚       â”‚sid â”‚cid â”‚\nâ”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤\nâ”‚ 1  â”‚ Alice â”‚       â”‚ 1  â”‚101 â”‚\nâ”‚ 2  â”‚ Bob   â”‚       â”‚ 2  â”‚102 â”‚\nâ””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜\n    â†“ JOIN required\n\nNoSQL (Document):\n{\n  id: 1,\n  name: \"Alice\",\n  enrollments: [\n    {courseId: 101, grade: \"A\"},\n    {courseId: 102, grade: \"B\"}\n  ]\n}\n    â†‘ All data in one document!\n```\n\n### MongoDB Examples:\n\n```javascript\n// MongoDB is document-oriented NoSQL\n\n// Insert document\ndb.students.insertOne({\n  name: \"Alice Johnson\",\n  age: 20,\n  email: \"alice@email.com\",\n  gpa: 3.8,\n  courses: [\n    {name: \"Math\", grade: \"A\"},\n    {name: \"Physics\", grade: \"B\"}\n  ],\n  address: {\n    city: \"New York\",\n    zip: \"10001\"\n  }\n});\n\n// Query\ndb.students.find({ age: { $gt: 20 } });\n\n// Update\ndb.students.updateOne(\n  { name: \"Alice Johnson\" },\n  { $set: { gpa: 3.9 } }\n);\n\n// Aggregation\ndb.students.aggregate([\n  { $match: { gpa: { $gte: 3.5 } } },\n  { $group: { _id: \"$age\", avgGpa: { $avg: \"$gpa\" } } }\n]);\n\n// Visual MongoDB document:\n/*\n{\n  _id: ObjectId(\"507f1f77bcf86cd799439011\"),\n  name: \"Alice Johnson\",\n  age: 20,\n  email: \"alice@email.com\",\n  gpa: 3.8,\n  courses: [                    â† Embedded array\n    {\n      name: \"Math\",\n      grade: \"A\",\n      credits: 3\n    },\n    {\n      name: \"Physics\",\n      grade: \"B\",\n      credits: 4\n    }\n  ],\n  address: {                    â† Embedded document\n    street: \"123 Main St\",\n    city: \"New York\",\n    zip: \"10001\"\n  },\n  enrollmentDate: ISODate(\"2024-01-15T00:00:00Z\")\n}\n\nBenefits:\nâœ… Flexible schema (can add fields anytime)\nâœ… No joins needed (data embedded)\nâœ… Horizontal scaling (sharding)\nâœ… Fast for read-heavy workloads\n*/\n```\n\n### Redis Examples:\n\n```bash\n# Redis is key-value store (in-memory)\n\n# String operations\nSET user:1:name \"Alice\"\nGET user:1:name\nINCR page:views:count\n\n# Hash (like object)\nHSET user:1 name \"Alice\" age 20 gpa 3.8\nHGET user:1 name\nHGETALL user:1\n\n# List (ordered)\nLPUSH queue:tasks \"task1\"\nLPUSH queue:tasks \"task2\"\nRPOP queue:tasks\n\n# Set (unique values)\nSADD tags:post:1 \"python\" \"database\" \"tutorial\"\nSMEMBERS tags:post:1\nSISMEMBER tags:post:1 \"python\"\n\n# Sorted Set (with scores)\nZADD leaderboard 100 \"Alice\"\nZADD leaderboard 95 \"Bob\"\nZADD leaderboard 98 \"Charlie\"\nZRANGE leaderboard 0 -1 WITHSCORES\n\n# Expiration (TTL)\nSET session:abc123 \"user_data\" EX 3600  # Expires in 1 hour\nTTL session:abc123\n\n# Visual Redis data structures:\n/*\nString:\nKey: \"user:1:name\"\nValue: \"Alice\"\n\nHash:\nKey: \"user:1\"\nValue: {name: \"Alice\", age: 20, gpa: 3.8}\n\nList:\nKey: \"queue:tasks\"\nValue: [\"task3\", \"task2\", \"task1\"] (FIFO)\n\nSet:\nKey: \"tags:post:1\"\nValue: {\"python\", \"database\", \"tutorial\"} (unique)\n\nSorted Set:\nKey: \"leaderboard\"\nValue: [(100, \"Alice\"), (98, \"Charlie\"), (95, \"Bob\")]\n         â†‘ scores\n\nCommon use cases:\nâœ… Caching (session data, API responses)\nâœ… Real-time leaderboards\nâœ… Rate limiting\nâœ… Pub/Sub messaging\nâœ… Job queues\n*/\n```\n\n### When to Use NoSQL:\n\n```\nUse NoSQL when:\nâœ… Need to scale horizontally (millions of users)\nâœ… Schema changes frequently\nâœ… Storing unstructured/semi-structured data\nâœ… Need high performance reads/writes\nâœ… Willing to sacrifice some ACID for performance\n\nUse SQL when:\nâœ… Need complex joins and relationships\nâœ… Need ACID compliance (banking, finance)\nâœ… Schema is well-defined and stable\nâœ… Need complex queries and reporting\nâœ… Data integrity is critical\n\nHybrid approach (Polyglot Persistence):\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Application                         â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ User Data â†’ PostgreSQL (ACID)       â”‚\nâ”‚ Session â†’ Redis (Fast cache)        â”‚\nâ”‚ Logs â†’ MongoDB (Flexible schema)    â”‚\nâ”‚ Analytics â†’ Cassandra (Big data)    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nUse the right tool for each job!\n```\n\n---\n\n## ğŸ”’ Database Security {#security}\n\n### Common Security Threats:\n\n```\n1. SQL Injection\n2. Privilege Escalation\n3. Data Exposure\n4. Unauthorized Access\n5. DDoS Attacks\n6. Backup Theft\n```\n\n### SQL Injection Prevention:\n\n```sql\n-- âŒ VULNERABLE: String concatenation\nusername = request.POST['username']\npassword = request.POST['password']\nquery = \"SELECT * FROM users WHERE username='\" + username + \"' AND password='\" + password + \"'\"\n\n-- Attack: username = \"admin' --\"\n-- Results in: SELECT * FROM users WHERE username='admin' --' AND password='...'\n-- The -- comments out the password check!\n\n-- âœ… SAFE: Prepared statements (parameterized queries)\n-- Python example:\ncursor.execute(\n    \"SELECT * FROM users WHERE username=%s AND password=%s\",\n    (username, password)\n)\n\n-- Java example:\nPreparedStatement stmt = conn.prepareStatement(\n    \"SELECT * FROM users WHERE username=? AND password=?\"\n);\nstmt.setString(1, username);\nstmt.setString(2, password);\n```\n\n### User Management & Privileges:\n\n```sql\n-- Create user\nCREATE USER 'app_user'@'localhost' IDENTIFIED BY 'secure_password_123';\n\n-- Grant specific privileges\nGRANT SELECT, INSERT, UPDATE ON school.students TO 'app_user'@'localhost';\nGRANT SELECT ON school.courses TO 'app_user'@'localhost';\n\n-- Grant all privileges on database\nGRANT ALL PRIVILEGES ON school.* TO 'admin_user'@'localhost';\n\n-- Revoke privileges\nREVOKE INSERT, UPDATE ON school.students FROM 'app_user'@'localhost';\n\n-- Show grants\nSHOW GRANTS FOR 'app_user'@'localhost';\n\n-- Delete user\nDROP USER 'app_user'@'localhost';\n\n-- Best practices:\n/*\nâœ… Principle of Least Privilege\n   - Give only necessary permissions\n   - Read-only users for reporting\n   - No root access for apps\n\nâœ… Use application-specific users\n   - web_app_user (SELECT, INSERT, UPDATE)\n   - reporting_user (SELECT only)\n   - backup_user (SELECT, LOCK TABLES)\n\nâœ… Strong passwords\n   - Minimum 12 characters\n   - Mix of upper, lower, numbers, symbols\n   - Rotate regularly\n\nâœ… Limit connection sources\n   - 'user'@'specific-ip' instead of 'user'@'%'\n*/\n```\n\n---\n\n## ğŸ’¾ Backup & Recovery {#backup}\n\n### Backup Types:\n\n```sql\n-- 1. Full Backup (entire database)\nmysqldump -u root -p school > school_backup.sql\n\n-- 2. Specific tables\nmysqldump -u root -p school students courses > tables_backup.sql\n\n-- 3. Schema only (no data)\nmysqldump -u root -p --no-data school > schema_only.sql\n\n-- 4. Data only (no schema)\nmysqldump -u root -p --no-create-info school > data_only.sql\n\n-- 5. All databases\nmysqldump -u root -p --all-databases > all_databases_backup.sql\n\n-- Restore backup\nmysql -u root -p school < school_backup.sql\n\n-- Backup strategies:\n/*\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ 3-2-1 BACKUP RULE                      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 3 - Keep 3 copies of data              â”‚\nâ”‚ 2 - Store on 2 different media types  â”‚\nâ”‚ 1 - Keep 1 copy off-site              â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nBackup schedule:\nDaily:   Incremental backup (changes only)\nWeekly:  Full backup\nMonthly: Archive backup (long-term storage)\n\nAutomated backup script:\n#!/bin/bash\nDATE=$(date +%Y%m%d_%H%M%S)\nmysqldump -u backup_user -p$PASSWORD school > /backups/school_$DATE.sql\ngzip /backups/school_$DATE.sql\n# Upload to S3 or cloud storage\n*/\n```\n\n---\n\n## ğŸ¯ Interview Preparation {#interview-prep}\n\n### Top 50 SQL Interview Questions:\n\n#### **Basic (Easy) - Questions 1-15:**\n\n**Q1: What is the difference between DELETE, TRUNCATE, and DROP?**\n```sql\nDELETE: Removes rows, can be rolled back, slow\nTRUNCATE: Removes all rows, faster, resets auto-increment, can't rollback\nDROP: Removes entire table structure\n\n-- Examples:\nDELETE FROM students WHERE age < 18;        -- Specific rows, with WHERE\nTRUNCATE TABLE students;                    -- All rows, fast\nDROP TABLE students;                        -- Table gone!\n```\n\n**Q2: What are primary and foreign keys?**\n```sql\n-- Primary Key: Unique identifier, cannot be NULL\nCREATE TABLE students (\n    id INT PRIMARY KEY,      -- PK\n    name VARCHAR(100)\n);\n\n-- Foreign Key: References another table's primary key\nCREATE TABLE enrollments (\n    id INT PRIMARY KEY,\n    student_id INT,\n    FOREIGN KEY (student_id) REFERENCES students(id)  -- FK\n);\n```\n\n**Q3: What is the difference between INNER JOIN and LEFT JOIN?**\n```sql\n-- INNER JOIN: Only matching rows from both tables\nSELECT * FROM students s\nINNER JOIN enrollments e ON s.id = e.student_id;\n\n-- LEFT JOIN: All rows from left table + matching from right\nSELECT * FROM students s\nLEFT JOIN enrollments e ON s.id = e.student_id;\n-- Includes students with no enrollments (NULL in enrollment columns)\n```\n\n**Q4: How to find duplicate records?**\n```sql\nSELECT email, COUNT(*) as count\nFROM students\nGROUP BY email\nHAVING COUNT(*) > 1;\n```\n\n**Q5: What is the difference between WHERE and HAVING?**\n```sql\n-- WHERE: Filters rows BEFORE grouping\nSELECT age, COUNT(*)\nFROM students\nWHERE age > 18          -- Filter rows first\nGROUP BY age;\n\n-- HAVING: Filters groups AFTER grouping\nSELECT age, COUNT(*) as count\nFROM students\nGROUP BY age\nHAVING COUNT(*) > 5;    -- Filter groups\n```\n\n**Q6: How to find the Nth highest salary?**\n```sql\n-- Method 1: Using LIMIT and OFFSET\nSELECT DISTINCT salary\nFROM employees\nORDER BY salary DESC\nLIMIT 1 OFFSET 2;  -- 3rd highest (0-indexed)\n\n-- Method 2: Using subquery\nSELECT MAX(salary)\nFROM employees\nWHERE salary < (\n    SELECT MAX(salary) FROM employees\n);  -- 2nd highest\n\n-- Method 3: Using window functions\nSELECT salary\nFROM (\n    SELECT salary, DENSE_RANK() OVER (ORDER BY salary DESC) as rank\n    FROM employees\n) ranked\nWHERE rank = 3;\n```\n\n**Q7-15: Quick Fire Questions**\n```sql\n-- Q7: Select all columns from students\nSELECT * FROM students;\n\n-- Q8: Count total students\nSELECT COUNT(*) FROM students;\n\n-- Q9: Get students with GPA > 3.5\nSELECT * FROM students WHERE gpa > 3.5;\n\n-- Q10: Sort students by GPA descending\nSELECT * FROM students ORDER BY gpa DESC;\n\n-- Q11: Get top 5 students\nSELECT * FROM students ORDER BY gpa DESC LIMIT 5;\n\n-- Q12: Get average GPA\nSELECT AVG(gpa) FROM students;\n\n-- Q13: Get unique ages\nSELECT DISTINCT age FROM students;\n\n-- Q14: Update student email\nUPDATE students SET email = 'new@email.com' WHERE id = 1;\n\n-- Q15: Delete students under 18\nDELETE FROM students WHERE age < 18;\n```\n\n#### **Intermediate (Medium) - Questions 16-35:**\n\n**Q16: Find employees earning more than their manager**\n```sql\nSELECT e.name, e.salary\nFROM employees e\nJOIN employees m ON e.manager_id = m.id\nWHERE e.salary > m.salary;\n```\n\n**Q17: Find departments with no employees**\n```sql\nSELECT d.name\nFROM departments d\nLEFT JOIN employees e ON d.id = e.department_id\nWHERE e.id IS NULL;\n```\n\n**Q18: Get cumulative sum of sales**\n```sql\nSELECT \n    date,\n    amount,\n    SUM(amount) OVER (ORDER BY date) as cumulative_total\nFROM sales;\n```\n\n**Q19: Find consecutive dates**\n```sql\nWITH numbered AS (\n    SELECT \n        date,\n        ROW_NUMBER() OVER (ORDER BY date) as rn,\n        DATE_SUB(date, INTERVAL ROW_NUMBER() OVER (ORDER BY date) DAY) as grp\n    FROM events\n)\nSELECT MIN(date) as start_date, MAX(date) as end_date, COUNT(*) as days\nFROM numbered\nGROUP BY grp\nHAVING COUNT(*) >= 3;  -- At least 3 consecutive days\n```\n\n**Q20: Pivot data (rows to columns)**\n```sql\nSELECT \n    student_name,\n    MAX(CASE WHEN subject = 'Math' THEN score END) as Math,\n    MAX(CASE WHEN subject = 'English' THEN score END) as English,\n    MAX(CASE WHEN subject = 'Science' THEN score END) as Science\nFROM scores\nGROUP BY student_name;\n```\n\n**Q21-35: More Medium Questions**\n```sql\n-- Q21: Second highest salary\nSELECT MAX(salary) FROM employees\nWHERE salary < (SELECT MAX(salary) FROM employees);\n\n-- Q22: Employees with same salary\nSELECT salary, COUNT(*) FROM employees\nGROUP BY salary HAVING COUNT(*) > 1;\n\n-- Q23: Running total\nSELECT date, amount,\n    (SELECT SUM(amount) FROM sales s2 WHERE s2.date <= s1.date) as running_total\nFROM sales s1;\n\n-- Q24: Month over month growth\nSELECT \n    MONTH(date) as month,\n    SUM(amount) as current_month,\n    LAG(SUM(amount)) OVER (ORDER BY MONTH(date)) as prev_month,\n    ((SUM(amount) - LAG(SUM(amount)) OVER (ORDER BY MONTH(date))) / \n     LAG(SUM(amount)) OVER (ORDER BY MONTH(date))) * 100 as growth_percent\nFROM sales\nGROUP BY MONTH(date);\n\n-- Q25: Top 3 per department\nSELECT * FROM (\n    SELECT \n        name, department, salary,\n        ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) as rn\n    FROM employees\n) ranked WHERE rn <= 3;\n```\n\n#### **Advanced (Hard) - Questions 36-50:**\n\n**Q36: Median salary calculation**\n```sql\nSELECT AVG(salary) as median\nFROM (\n    SELECT salary,\n           ROW_NUMBER() OVER (ORDER BY salary) as rn,\n           COUNT(*) OVER () as cnt\n    FROM employees\n) t\nWHERE rn IN (FLOOR((cnt + 1) / 2), FLOOR((cnt + 2) / 2));\n```\n\n**Q37: Find gaps in sequential IDs**\n```sql\nSELECT \n    id + 1 as gap_start,\n    (SELECT MIN(id) - 1 FROM students s2 WHERE s2.id > s1.id) as gap_end\nFROM students s1\nWHERE NOT EXISTS (SELECT 1 FROM students s2 WHERE s2.id = s1.id + 1);\n```\n\n**Q38: Hierarchical query (employee tree)**\n```sql\nWITH RECURSIVE emp_tree AS (\n    -- Anchor: CEO (no manager)\n    SELECT id, name, manager_id, 1 as level\n    FROM employees\n    WHERE manager_id IS NULL\n    \n    UNION ALL\n    \n    -- Recursive: employees under managers\n    SELECT e.id, e.name, e.manager_id, et.level + 1\n    FROM employees e\n    JOIN emp_tree et ON e.manager_id = et.id\n)\nSELECT * FROM emp_tree ORDER BY level, id;\n```\n\n**Q39: Complex aggregation with multiple conditions**\n```sql\nSELECT \n    department,\n    COUNT(*) as total_employees,\n    COUNT(CASE WHEN salary > 100000 THEN 1 END) as high_earners,\n    AVG(salary) as avg_salary,\n    PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY salary) as median_salary,\n    MAX(CASE WHEN tenure_years > 5 THEN salary END) as max_senior_salary\nFROM employees\nGROUP BY department\nHAVING AVG(salary) > 75000;\n```\n\n**Q40-50: Expert Level**\n```sql\n-- Q40: Moving average (3-month)\nSELECT \n    month,\n    revenue,\n    AVG(revenue) OVER (\n        ORDER BY month \n        ROWS BETWEEN 2 PRECEDING AND CURRENT ROW\n    ) as moving_avg_3month\nFROM monthly_revenue;\n\n-- Q41: Find overlapping date ranges\nSELECT a.id, b.id\nFROM bookings a\nJOIN bookings b ON a.id < b.id\nWHERE a.start_date <= b.end_date AND a.end_date >= b.start_date;\n\n-- Q42: Complex join with aggregation\nSELECT \n    s.name,\n    COUNT(DISTINCT e.course_id) as courses_enrolled,\n    COUNT(DISTINCT CASE WHEN e.grade = 'A' THEN e.course_id END) as courses_with_A,\n    AVG(c.credits) as avg_course_credits\nFROM students s\nLEFT JOIN enrollments e ON s.id = e.student_id\nLEFT JOIN courses c ON e.course_id = c.id\nGROUP BY s.id, s.name\nHAVING COUNT(DISTINCT e.course_id) > 3;\n```\n\n---\n\n## ğŸ“ Practice Problems {#practice}\n\n### 100+ Practice Problems by Category:\n\n#### **SELECT Basics (10 problems):**\n\n```sql\n-- 1. Select all columns from employees\nSELECT * FROM employees;\n\n-- 2. Select name and salary from employees\nSELECT name, salary FROM employees;\n\n-- 3. Select employees with salary > 50000\nSELECT * FROM employees WHERE salary > 50000;\n\n-- 4. Select employees in IT department\nSELECT * FROM employees WHERE department = 'IT';\n\n-- 5. Select employees hired after 2020\nSELECT * FROM employees WHERE hire_date > '2020-01-01';\n\n-- 6. Select employees with NULL email\nSELECT * FROM employees WHERE email IS NULL;\n\n-- 7. Select employees named John or Jane\nSELECT * FROM employees WHERE name IN ('John', 'Jane');\n\n-- 8. Select employees with salary between 40k-60k\nSELECT * FROM employees WHERE salary BETWEEN 40000 AND 60000;\n\n-- 9. Select employees whose name starts with 'A'\nSELECT * FROM employees WHERE name LIKE 'A%';\n\n-- 10. Select distinct departments\nSELECT DISTINCT department FROM employees;\n```\n\n#### **Aggregation (15 problems):**\n\n```sql\n-- 11. Count total employees\nSELECT COUNT(*) FROM employees;\n\n-- 12. Average salary\nSELECT AVG(salary) FROM employees;\n\n-- 13. Max and min salary\nSELECT MAX(salary), MIN(salary) FROM employees;\n\n-- 14. Total salary expense\nSELECT SUM(salary) FROM employees;\n\n-- 15. Count employees per department\nSELECT department, COUNT(*) FROM employees GROUP BY department;\n\n-- 16. Average salary per department\nSELECT department, AVG(salary) FROM employees GROUP BY department;\n\n-- 17. Departments with more than 10 employees\nSELECT department, COUNT(*) FROM employees \nGROUP BY department HAVING COUNT(*) > 10;\n\n-- 18. Highest salary per department\nSELECT department, MAX(salary) FROM employees GROUP BY department;\n\n-- 19. Count employees by hire year\nSELECT YEAR(hire_date), COUNT(*) \nFROM employees GROUP BY YEAR(hire_date);\n\n-- 20-25: More aggregation challenges...\n```\n\n#### **JOINs (20 problems):**\n\n```sql\n-- 26. List employees with their department names\nSELECT e.name, d.department_name\nFROM employees e\nINNER JOIN departments d ON e.department_id = d.id;\n\n-- 27. List all departments and their employee count\nSELECT d.department_name, COUNT(e.id) as emp_count\nFROM departments d\nLEFT JOIN employees e ON d.id = e.department_id\nGROUP BY d.id;\n\n-- 28. Find employees and their managers\nSELECT e.name as employee, m.name as manager\nFROM employees e\nLEFT JOIN employees m ON e.manager_id = m.id;\n\n-- 29. Three-way join: employees, departments, locations\nSELECT e.name, d.department_name, l.city\nFROM employees e\nJOIN departments d ON e.department_id = d.id\nJOIN locations l ON d.location_id = l.id;\n\n-- 30-45: More JOIN challenges...\n```\n\n#### **Subqueries (15 problems):**\n\n```sql\n-- 46. Employees earning more than average\nSELECT * FROM employees\nWHERE salary > (SELECT AVG(salary) FROM employees);\n\n-- 47. Departments with highest average salary\nSELECT * FROM departments\nWHERE id = (\n    SELECT department_id \n    FROM employees \n    GROUP BY department_id \n    ORDER BY AVG(salary) DESC \n    LIMIT 1\n);\n\n-- 48-60: More subquery challenges...\n```\n\n#### **Window Functions (10 problems):**\n\n```sql\n-- 61. Rank employees by salary\nSELECT name, salary,\n    RANK() OVER (ORDER BY salary DESC) as rank\nFROM employees;\n\n-- 62. Running total of sales\nSELECT date, amount,\n    SUM(amount) OVER (ORDER BY date) as running_total\nFROM sales;\n\n-- 63-70: More window function challenges...\n```\n\n#### **Date/String Functions (10 problems):**\n\n```sql\n-- 71. Extract year from hire date\nSELECT name, YEAR(hire_date) as hire_year FROM employees;\n\n-- 72. Concatenate first and last name\nSELECT CONCAT(first_name, ' ', last_name) as full_name FROM employees;\n\n-- 73-80: More function challenges...\n```\n\n#### **Complex Queries (20 problems):**\n\n```sql\n-- 81. Pivot table: Sales by quarter\n-- 82. Find consecutive days\n-- 83. Calculate retention rate\n-- 84. Find user purchase patterns\n-- 85-100: Advanced challenges...\n```\n\n---\n\n## ğŸ† Real-World Projects {#projects}\n\n### Project 1: School Management System\n\n```sql\n-- Complete database design\n\n-- 1. Create database\nCREATE DATABASE school_management;\nUSE school_management;\n\n-- 2. Students table\nCREATE TABLE students (\n    student_id INT PRIMARY KEY AUTO_INCREMENT,\n    first_name VARCHAR(50) NOT NULL,\n    last_name VARCHAR(50) NOT NULL,\n    email VARCHAR(100) UNIQUE,\n    phone VARCHAR(20),\n    date_of_birth DATE,\n    enrollment_date DATE DEFAULT (CURRENT_DATE),\n    gpa DECIMAL(3,2),\n    status ENUM('active', 'graduated', 'suspended') DEFAULT 'active',\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- 3. Courses table\nCREATE TABLE courses (\n    course_id INT PRIMARY KEY AUTO_INCREMENT,\n    course_code VARCHAR(10) UNIQUE NOT NULL,\n    course_name VARCHAR(100) NOT NULL,\n    credits INT,\n    department VARCHAR(50),\n    description TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- 4. Instructors table\nCREATE TABLE instructors (\n    instructor_id INT PRIMARY KEY AUTO_INCREMENT,\n    first_name VARCHAR(50) NOT NULL,\n    last_name VARCHAR(50) NOT NULL,\n    email VARCHAR(100) UNIQUE,\n    department VARCHAR(50),\n    hire_date DATE,\n    salary DECIMAL(10,2)\n);\n\n-- 5. Enrollments table\nCREATE TABLE enrollments (\n    enrollment_id INT PRIMARY KEY AUTO_INCREMENT,\n    student_id INT,\n    course_id INT,\n    instructor_id INT,\n    semester VARCHAR(20),\n    year INT,\n    grade VARCHAR(2),\n    enrollment_date DATE DEFAULT (CURRENT_DATE),\n    FOREIGN KEY (student_id) REFERENCES students(student_id) ON DELETE CASCADE,\n    FOREIGN KEY (course_id) REFERENCES courses(course_id),\n    FOREIGN KEY (instructor_id) REFERENCES instructors(instructor_id),\n    UNIQUE KEY (student_id, course_id, semester, year)\n);\n\n-- 6. Sample queries for school system\n\n-- Get student transcript\nSELECT \n    s.first_name, s.last_name,\n    c.course_code, c.course_name, c.credits,\n    e.grade, e.semester, e.year\nFROM students s\nJOIN enrollments e ON s.student_id = e.student_id\nJOIN courses c ON e.course_id = c.course_id\nWHERE s.student_id = 1\nORDER BY e.year DESC, e.semester;\n\n-- Calculate GPA\nUPDATE students s\nSET gpa = (\n    SELECT AVG(\n        CASE \n            WHEN e.grade = 'A' THEN 4.0\n            WHEN e.grade = 'B' THEN 3.0\n            WHEN e.grade = 'C' THEN 2.0\n            WHEN e.grade = 'D' THEN 1.0\n            ELSE 0\n        END\n    )\n    FROM enrollments e\n    WHERE e.student_id = s.student_id\n)\nWHERE s.student_id = 1;\n\n-- Find popular courses\nSELECT \n    c.course_name,\n    COUNT(e.student_id) as enrollment_count,\n    AVG(\n        CASE e.grade\n            WHEN 'A' THEN 4.0\n            WHEN 'B' THEN 3.0\n            WHEN 'C' THEN 2.0\n            ELSE 1.0\n        END\n    ) as avg_grade\nFROM courses c\nLEFT JOIN enrollments e ON c.course_id = e.course_id\nGROUP BY c.course_id\nORDER BY enrollment_count DESC;\n```\n\n### Project 2: E-Commerce Database\n\n```sql\n-- Complete e-commerce system\n\nCREATE DATABASE ecommerce;\nUSE ecommerce;\n\n-- Users\nCREATE TABLE users (\n    user_id INT PRIMARY KEY AUTO_INCREMENT,\n    username VARCHAR(50) UNIQUE NOT NULL,\n    email VARCHAR(100) UNIQUE NOT NULL,\n    password_hash VARCHAR(255) NOT NULL,\n    first_name VARCHAR(50),\n    last_name VARCHAR(50),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    last_login TIMESTAMP\n);\n\n-- Products\nCREATE TABLE products (\n    product_id INT PRIMARY KEY AUTO_INCREMENT,\n    name VARCHAR(200) NOT NULL,\n    description TEXT,\n    price DECIMAL(10,2) NOT NULL,\n    stock_quantity INT DEFAULT 0,\n    category VARCHAR(50),\n    image_url VARCHAR(255),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    CHECK (price >= 0),\n    CHECK (stock_quantity >= 0)\n);\n\n-- Orders\nCREATE TABLE orders (\n    order_id INT PRIMARY KEY AUTO_INCREMENT,\n    user_id INT NOT NULL,\n    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    total_amount DECIMAL(10,2),\n    status ENUM('pending', 'processing', 'shipped', 'delivered', 'cancelled') DEFAULT 'pending',\n    shipping_address TEXT,\n    FOREIGN KEY (user_id) REFERENCES users(user_id)\n);\n\n-- Order Items\nCREATE TABLE order_items (\n    order_item_id INT PRIMARY KEY AUTO_INCREMENT,\n    order_id INT NOT NULL,\n    product_id INT NOT NULL,\n    quantity INT NOT NULL,\n    price_at_time DECIMAL(10,2) NOT NULL,\n    FOREIGN KEY (order_id) REFERENCES orders(order_id) ON DELETE CASCADE,\n    FOREIGN KEY (product_id) REFERENCES products(product_id)\n);\n\n-- Reviews\nCREATE TABLE reviews (\n    review_id INT PRIMARY KEY AUTO_INCREMENT,\n    product_id INT NOT NULL,\n    user_id INT NOT NULL,\n    rating INT CHECK (rating BETWEEN 1 AND 5),\n    comment TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (product_id) REFERENCES products(product_id) ON DELETE CASCADE,\n    FOREIGN KEY (user_id) REFERENCES users(user_id)\n);\n\n-- Useful queries:\n\n-- Top selling products\nSELECT \n    p.name,\n    SUM(oi.quantity) as total_sold,\n    SUM(oi.quantity * oi.price_at_time) as revenue\nFROM products p\nJOIN order_items oi ON p.product_id = oi.product_id\nJOIN orders o ON oi.order_id = o.order_id\nWHERE o.status = 'delivered'\nGROUP BY p.product_id\nORDER BY total_sold DESC\nLIMIT 10;\n\n-- Customer lifetime value\nSELECT \n    u.user_id,\n    u.username,\n    COUNT(DISTINCT o.order_id) as total_orders,\n    SUM(o.total_amount) as lifetime_value,\n    AVG(o.total_amount) as avg_order_value\nFROM users u\nLEFT JOIN orders o ON u.user_id = o.user_id\nGROUP BY u.user_id\nORDER BY lifetime_value DESC;\n\n-- Product recommendations (customers who bought X also bought Y)\nSELECT \n    oi2.product_id as recommended_product,\n    p.name,\n    COUNT(*) as times_bought_together\nFROM order_items oi1\nJOIN order_items oi2 ON oi1.order_id = oi2.order_id AND oi1.product_id != oi2.product_id\nJOIN products p ON oi2.product_id = p.product_id\nWHERE oi1.product_id = 1  -- For product ID 1\nGROUP BY oi2.product_id\nORDER BY times_bought_together DESC\nLIMIT 5;\n```\n\n### Project 3: Social Media Database\n\n```sql\n-- Simple social media schema\n\nCREATE DATABASE social_media;\nUSE social_media;\n\n-- Users\nCREATE TABLE users (\n    user_id INT PRIMARY KEY AUTO_INCREMENT,\n    username VARCHAR(50) UNIQUE NOT NULL,\n    email VARCHAR(100) UNIQUE NOT NULL,\n    bio TEXT,\n    avatar_url VARCHAR(255),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Posts\nCREATE TABLE posts (\n    post_id INT PRIMARY KEY AUTO_INCREMENT,\n    user_id INT NOT NULL,\n    content TEXT NOT NULL,\n    image_url VARCHAR(255),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    likes_count INT DEFAULT 0,\n    comments_count INT DEFAULT 0,\n    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE\n);\n\n-- Follows (who follows whom)\nCREATE TABLE follows (\n    follower_id INT NOT NULL,\n    following_id INT NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (follower_id, following_id),\n    FOREIGN KEY (follower_id) REFERENCES users(user_id) ON DELETE CASCADE,\n    FOREIGN KEY (following_id) REFERENCES users(user_id) ON DELETE CASCADE,\n    CHECK (follower_id != following_id)\n);\n\n-- Comments\nCREATE TABLE comments (\n    comment_id INT PRIMARY KEY AUTO_INCREMENT,\n    post_id INT NOT NULL,\n    user_id INT NOT NULL,\n    content TEXT NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (post_id) REFERENCES posts(post_id) ON DELETE CASCADE,\n    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE\n);\n\n-- Likes\nCREATE TABLE likes (\n    post_id INT NOT NULL,\n    user_id INT NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (post_id, user_id),\n    FOREIGN KEY (post_id) REFERENCES posts(post_id) ON DELETE CASCADE,\n    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE\n);\n\n-- Query examples:\n\n-- News feed (posts from people you follow)\nSELECT \n    p.post_id,\n    u.username,\n    p.content,\n    p.likes_count,\n    p.comments_count,\n    p.created_at\nFROM posts p\nJOIN users u ON p.user_id = u.user_id\nWHERE p.user_id IN (\n    SELECT following_id FROM follows WHERE follower_id = 1  -- Current user\n)\nORDER BY p.created_at DESC\nLIMIT 20;\n\n-- Popular users (most followers)\nSELECT \n    u.user_id,\n    u.username,\n    COUNT(f.follower_id) as follower_count\nFROM users u\nLEFT JOIN follows f ON u.user_id = f.following_id\nGROUP BY u.user_id\nORDER BY follower_count DESC\nLIMIT 10;\n\n-- Mutual follows (friends)\nSELECT \n    u.user_id,\n    u.username\nFROM users u\nWHERE u.user_id IN (\n    SELECT f1.following_id\n    FROM follows f1\n    JOIN follows f2 ON f1.following_id = f2.follower_id AND f1.follower_id = f2.following_id\n    WHERE f1.follower_id = 1  -- Current user\n);\n```\n\n---\n\n## ğŸ“ Learning Roadmap\n\n### 30-Day SQL Mastery Plan:\n\n```\nWeek 1: Basics (Days 1-7)\nâ”œâ”€ Day 1: Installation, CREATE, INSERT\nâ”œâ”€ Day 2: SELECT, WHERE, ORDER BY\nâ”œâ”€ Day 3: UPDATE, DELETE, LIMIT\nâ”œâ”€ Day 4: Aggregate functions (COUNT, AVG, SUM)\nâ”œâ”€ Day 5: GROUP BY, HAVING\nâ”œâ”€ Day 6: JOIN basics (INNER, LEFT)\nâ””â”€ Day 7: Practice & Review\n\nWeek 2: Intermediate (Days 8-14)\nâ”œâ”€ Day 8: Subqueries\nâ”œâ”€ Day 9: UNION, CASE statements\nâ”œâ”€ Day 10: String functions\nâ”œâ”€ Day 11: Date functions\nâ”œâ”€ Day 12: Indexes basics\nâ”œâ”€ Day 13: Views\nâ””â”€ Day 14: Practice & Review\n\nWeek 3: Advanced (Days 15-21)\nâ”œâ”€ Day 15: Window functions\nâ”œâ”€ Day 16: CTEs (Common Table Expressions)\nâ”œâ”€ Day 17: Stored procedures\nâ”œâ”€ Day 18: Triggers\nâ”œâ”€ Day 19: Transactions & ACID\nâ”œâ”€ Day 20: Query optimization\nâ””â”€ Day 21: Practice & Review\n\nWeek 4: Real-World (Days 22-30)\nâ”œâ”€ Day 22: Database design principles\nâ”œâ”€ Day 23: Normalization\nâ”œâ”€ Day 24: NoSQL basics\nâ”œâ”€ Day 25: Security & best practices\nâ”œâ”€ Day 26-28: Build complete project\nâ””â”€ Day 29-30: Interview preparation\n```\n\n---\n\n## ğŸ“š Additional Resources\n\n### Books:\n1. \"SQL in 10 Minutes\" - Ben Forta\n2. \"Learning SQL\" - Alan Beaulieu\n3. \"High Performance MySQL\" - Baron Schwartz\n4. \"Database Design for Mere Mortals\" - Michael J. Hernandez\n\n### Online Platforms:\n- SQLZoo (interactive)\n- LeetCode Database section\n- HackerRank SQL challenges\n- Mode Analytics SQL Tutorial\n\n### YouTube Channels:\n- freeCodeCamp SQL course\n- Programming with Mosh\n- Traversy Media\n- Database Star\n\n---\n\n## âœ… Completion Checklist\n\n```\nSQL Mastery Checklist:\n\nBasics:\nâ–¡ Can create databases and tables\nâ–¡ Understand all data types\nâ–¡ Comfortable with INSERT, SELECT, UPDATE, DELETE\nâ–¡ Know WHERE, ORDER BY, LIMIT\n\nIntermediate:\nâ–¡ Can use aggregate functions\nâ–¡ Understand GROUP BY and HAVING\nâ–¡ Comfortable with all JOIN types\nâ–¡ Can write subqueries\nâ–¡ Know string and date functions\n\nAdvanced:\nâ–¡ Can use window functions\nâ–¡ Understand CTEs\nâ–¡ Can write stored procedures and functions\nâ–¡ Know about triggers\nâ–¡ Understand transactions and ACID\nâ–¡ Can optimize queries with indexes\n\nProfessional:\nâ–¡ Can design normalized databases\nâ–¡ Know security best practices\nâ–¡ Understand backup strategies\nâ–¡ Can troubleshoot performance issues\nâ–¡ Completed at least 2 real-world projects\nâ–¡ Ready for SQL interviews\n```\n\n---\n\n## ğŸ† Final Tips\n\n```\n1. Practice Daily\n   - Even 30 minutes makes a difference\n   - Use SQLFiddle or db-fiddle for quick practice\n\n2. Build Real Projects\n   - Theory is important, but practice is crucial\n   - Clone existing systems (Twitter, Instagram, etc.)\n\n3. Read Query Execution Plans\n   - Use EXPLAIN for every complex query\n   - Understand what's happening under the hood\n\n4. Learn by Teaching\n   - Explain concepts to others\n   - Write blog posts about what you learn\n\n5. Stay Updated\n   - New features in MySQL 8.0, PostgreSQL 15\n   - Follow database blogs and newsletters\n\n6. Master One, Learn Others\n   - Start with MySQL or PostgreSQL\n   - Once mastered, other SQL databases are similar\n\n7. Don't Fear Errors\n   - Every error teaches something\n   - Keep a log of errors and solutions\n\n8. Benchmark Everything\n   - Test different approaches\n   - Measure performance improvements\n\n9. Security First\n   - Never concatenate user input in queries\n   - Always use prepared statements\n   - Follow principle of least privilege\n\n10. Have Fun!\n    - SQL is powerful and elegant\n    - Enjoy the journey of mastery\n```\n\n---\n\n## ğŸ‰ Congratulations!\n\nYou've completed the **SQL & Databases: Zero to Hero** guide!\n\nYou now know:\n- âœ… SQL fundamentals (SELECT, JOIN, subqueries)\n- âœ… Advanced techniques (window functions, CTEs, optimization)\n- âœ… Database design (normalization, relationships)\n- âœ… Performance optimization (indexes, query tuning)\n- âœ… Security best practices\n- âœ… Real-world application development\n- âœ… Interview preparation\n\n### What's Next?\n\n1. Complete all 100 practice problems\n2. Build all 3 real-world projects\n3. Take online SQL certification\n4. Practice on Leetcode SQL section\n5. Contribute to open-source databases\n\n---\n\n*\"Data is the new oil, and SQL is the refinery.\"*\n\n**Now go build something amazing with your SQL skills!** ğŸš€\n\n---\n\n*SQL & Databases: Complete Guide*\n*Version 1.0 - 100% Complete*\n*Created: January 2026*\n*Total: 5,000+ lines of comprehensive SQL education*\n\n"}