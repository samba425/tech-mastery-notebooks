{"id":"mongodb","title":"üçÉ MongoDB Zero to Hero","content":"# MongoDB: Zero to Hero Guide\n## Complete NoSQL Database Mastery\n\n---\n\n## üìö Table of Contents\n\n1. [Introduction to MongoDB](#introduction)\n2. [Installation & Setup](#setup)\n3. [MongoDB Basics](#basics)\n4. [CRUD Operations](#crud)\n5. [Query Operators](#operators)\n6. [Data Modeling](#modeling)\n7. [Aggregation Framework](#aggregation)\n8. [Indexing & Performance](#indexing)\n9. [Transactions](#transactions)\n10. [Mongoose ODM](#mongoose)\n11. [Security & Authentication](#security)\n12. [Replication & Sharding](#scaling)\n13. [Backup & Recovery](#backup)\n14. [Best Practices](#best-practices)\n15. [Real-World Projects](#projects)\n\n---\n\n## üéØ Introduction to MongoDB {#introduction}\n\n### What is MongoDB?\n\n**MongoDB** is a NoSQL document database that stores data in flexible, JSON-like documents.\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ    Relational Database (SQL)        ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ  Tables with rows and columns       ‚îÇ\n‚îÇ  Fixed schema                       ‚îÇ\n‚îÇ  SQL queries                        ‚îÇ\n‚îÇ  Joins required                     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                 vs\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ    MongoDB (NoSQL)                  ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ  Collections with documents         ‚îÇ\n‚îÇ  Flexible schema                    ‚îÇ\n‚îÇ  JSON-like queries                  ‚îÇ\n‚îÇ  Embedded documents                 ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n### Why MongoDB?\n\n- ‚úÖ **Flexible Schema** - No predefined structure\n- ‚úÖ **Scalable** - Horizontal scaling with sharding\n- ‚úÖ **High Performance** - Fast read/write operations\n- ‚úÖ **Rich Queries** - Powerful query language\n- ‚úÖ **Document-Based** - Natural data representation\n\n### Document Structure\n\n```javascript\n// SQL Table\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ id ‚îÇ name ‚îÇ email             ‚îÇ age ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ 1  ‚îÇ John ‚îÇ john@example.com  ‚îÇ 30  ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\n// MongoDB Document\n{\n  _id: ObjectId(\"507f1f77bcf86cd799439011\"),\n  name: \"John\",\n  email: \"john@example.com\",\n  age: 30,\n  address: {           // Embedded document\n    street: \"123 Main St\",\n    city: \"New York\"\n  },\n  hobbies: [\"reading\", \"coding\"]  // Array\n}\n```\n\n### MongoDB Architecture\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ         Application                 ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ      MongoDB Driver                 ‚îÇ\n‚îÇ  (Node.js, Python, Java, etc.)     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n               ‚îÇ\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ      MongoDB Server                 ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ\n‚îÇ  ‚îÇ  Database 1                 ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Collection 1           ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ Document 1         ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ Document 2         ‚îÇ   ‚îÇ\n‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ Collection 2           ‚îÇ   ‚îÇ\n‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ\n‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ\n‚îÇ  ‚îÇ  Database 2                 ‚îÇ   ‚îÇ\n‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n---\n\n## üîß Installation & Setup {#setup}\n\n### Install MongoDB\n\n**macOS (using Homebrew)**\n\n```bash\n# Install MongoDB Community Edition\nbrew tap mongodb/brew\nbrew install mongodb-community\n\n# Start MongoDB service\nbrew services start mongodb-community\n\n# Stop MongoDB service\nbrew services stop mongodb-community\n```\n\n**Windows**\n\n1. Download from https://www.mongodb.com/try/download/community\n2. Run installer\n3. MongoDB runs as Windows service automatically\n\n**Linux (Ubuntu)**\n\n```bash\n# Import public key\nwget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -\n\n# Create list file\necho \"deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list\n\n# Install MongoDB\nsudo apt-get update\nsudo apt-get install -y mongodb-org\n\n# Start MongoDB\nsudo systemctl start mongod\n```\n\n### Verify Installation\n\n```bash\n# Check MongoDB version\nmongod --version\n\n# Connect to MongoDB shell\nmongosh\n\n# In mongosh\n> db.version()\n> show dbs\n```\n\n### MongoDB Compass (GUI)\n\nDownload from: https://www.mongodb.com/products/compass\n\n---\n\n## üìñ MongoDB Basics {#basics}\n\n### Database & Collections\n\n```javascript\n// Show all databases\nshow dbs\n\n// Create/Switch to database\nuse myDatabase\n\n// Current database\ndb\n\n// Create collection\ndb.createCollection(\"users\")\n\n// Show collections\nshow collections\n\n// Drop collection\ndb.users.drop()\n\n// Drop database\ndb.dropDatabase()\n```\n\n### Documents\n\n```javascript\n// A document is like a JSON object\n{\n  _id: ObjectId(\"...\"),        // Unique identifier (auto-generated)\n  name: \"John Doe\",            // String\n  age: 30,                     // Number\n  email: \"john@example.com\",   // String\n  isActive: true,              // Boolean\n  createdAt: new Date(),       // Date\n  address: {                   // Embedded document\n    street: \"123 Main St\",\n    city: \"New York\",\n    zipCode: \"10001\"\n  },\n  tags: [\"developer\", \"writer\"], // Array\n  skills: [                    // Array of objects\n    { name: \"JavaScript\", level: \"expert\" },\n    { name: \"Python\", level: \"intermediate\" }\n  ]\n}\n```\n\n### Data Types\n\n```javascript\n// String\n{ name: \"John Doe\" }\n\n// Number (Integer or Float)\n{ age: 30, price: 99.99 }\n\n// Boolean\n{ isActive: true }\n\n// Date\n{ createdAt: new Date() }\n\n// Array\n{ tags: [\"tag1\", \"tag2\"] }\n\n// Object/Embedded Document\n{ address: { city: \"NYC\" } }\n\n// ObjectId\n{ _id: ObjectId(\"507f1f77bcf86cd799439011\") }\n\n// Null\n{ middleName: null }\n```\n\n---\n\n## ‚úèÔ∏è CRUD Operations {#crud}\n\n### Create (Insert)\n\n**Insert One**\n\n```javascript\n// Insert single document\ndb.users.insertOne({\n  name: \"John Doe\",\n  email: \"john@example.com\",\n  age: 30,\n  createdAt: new Date()\n})\n\n// Returns\n{\n  acknowledged: true,\n  insertedId: ObjectId(\"507f1f77bcf86cd799439011\")\n}\n```\n\n**Insert Many**\n\n```javascript\n// Insert multiple documents\ndb.users.insertMany([\n  {\n    name: \"Jane Smith\",\n    email: \"jane@example.com\",\n    age: 25\n  },\n  {\n    name: \"Bob Johnson\",\n    email: \"bob@example.com\",\n    age: 35\n  }\n])\n\n// Returns\n{\n  acknowledged: true,\n  insertedIds: {\n    '0': ObjectId(\"...\"),\n    '1': ObjectId(\"...\")\n  }\n}\n```\n\n### Read (Find)\n\n**Find All**\n\n```javascript\n// Get all documents\ndb.users.find()\n\n// Pretty print\ndb.users.find().pretty()\n```\n\n**Find with Filter**\n\n```javascript\n// Find by exact match\ndb.users.find({ name: \"John Doe\" })\n\n// Find by age\ndb.users.find({ age: 30 })\n\n// Find with multiple conditions (AND)\ndb.users.find({\n  age: 30,\n  isActive: true\n})\n```\n\n**Find One**\n\n```javascript\n// Get first matching document\ndb.users.findOne({ email: \"john@example.com\" })\n\n// Find by _id\ndb.users.findOne({ _id: ObjectId(\"507f1f77bcf86cd799439011\") })\n```\n\n**Projection (Select Fields)**\n\n```javascript\n// Only return name and email (exclude _id)\ndb.users.find(\n  { age: 30 },\n  { name: 1, email: 1, _id: 0 }\n)\n\n// Exclude specific fields\ndb.users.find(\n  {},\n  { password: 0 }\n)\n```\n\n**Limit & Skip**\n\n```javascript\n// Limit results\ndb.users.find().limit(5)\n\n// Skip results (pagination)\ndb.users.find().skip(10).limit(5)\n\n// Page 1: skip(0).limit(10)\n// Page 2: skip(10).limit(10)\n// Page 3: skip(20).limit(10)\n```\n\n**Sort**\n\n```javascript\n// Sort ascending (1)\ndb.users.find().sort({ age: 1 })\n\n// Sort descending (-1)\ndb.users.find().sort({ age: -1 })\n\n// Multiple sort fields\ndb.users.find().sort({ age: -1, name: 1 })\n```\n\n**Count**\n\n```javascript\n// Count all documents\ndb.users.countDocuments()\n\n// Count with filter\ndb.users.countDocuments({ age: { $gte: 30 } })\n```\n\n### Update\n\n**Update One**\n\n```javascript\n// Update single document\ndb.users.updateOne(\n  { email: \"john@example.com\" },    // Filter\n  { $set: { age: 31 } }             // Update\n)\n\n// Returns\n{\n  acknowledged: true,\n  matchedCount: 1,\n  modifiedCount: 1\n}\n```\n\n**Update Many**\n\n```javascript\n// Update multiple documents\ndb.users.updateMany(\n  { age: { $lt: 18 } },           // Filter: age < 18\n  { $set: { isMinor: true } }     // Update\n)\n```\n\n**Update Operators**\n\n```javascript\n// $set - Set field value\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $set: { name: \"John Smith\", age: 32 } }\n)\n\n// $unset - Remove field\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $unset: { middleName: \"\" } }\n)\n\n// $inc - Increment number\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $inc: { age: 1 } }           // Increase age by 1\n)\n\n// $mul - Multiply\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $mul: { price: 1.1 } }       // Increase price by 10%\n)\n\n// $rename - Rename field\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $rename: { \"name\": \"fullName\" } }\n)\n\n// $min - Update if new value is less\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $min: { lowestScore: 75 } }\n)\n\n// $max - Update if new value is greater\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $max: { highestScore: 95 } }\n)\n\n// $currentDate - Set to current date\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $currentDate: { lastModified: true } }\n)\n```\n\n**Array Update Operators**\n\n```javascript\n// $push - Add to array\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $push: { hobbies: \"swimming\" } }\n)\n\n// $push with $each (multiple items)\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $push: { hobbies: { $each: [\"reading\", \"coding\"] } } }\n)\n\n// $pull - Remove from array\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $pull: { hobbies: \"swimming\" } }\n)\n\n// $addToSet - Add to array if not exists\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $addToSet: { tags: \"developer\" } }\n)\n\n// $pop - Remove first (-1) or last (1) element\ndb.users.updateOne(\n  { _id: ObjectId(\"...\") },\n  { $pop: { hobbies: 1 } }        // Remove last\n)\n```\n\n**Replace One**\n\n```javascript\n// Replace entire document (except _id)\ndb.users.replaceOne(\n  { email: \"john@example.com\" },\n  {\n    name: \"John Smith\",\n    email: \"john@example.com\",\n    age: 32,\n    city: \"Boston\"\n  }\n)\n```\n\n**Upsert (Update or Insert)**\n\n```javascript\n// Insert if not found, update if found\ndb.users.updateOne(\n  { email: \"new@example.com\" },\n  { $set: { name: \"New User\", age: 25 } },\n  { upsert: true }\n)\n```\n\n### Delete\n\n**Delete One**\n\n```javascript\n// Delete single document\ndb.users.deleteOne({ email: \"john@example.com\" })\n\n// Returns\n{\n  acknowledged: true,\n  deletedCount: 1\n}\n```\n\n**Delete Many**\n\n```javascript\n// Delete multiple documents\ndb.users.deleteMany({ age: { $lt: 18 } })\n\n// Delete all documents\ndb.users.deleteMany({})\n```\n\n---\n\n## üîç Query Operators {#operators}\n\n### Comparison Operators\n\n```javascript\n// $eq - Equal\ndb.users.find({ age: { $eq: 30 } })\n// Same as: db.users.find({ age: 30 })\n\n// $ne - Not equal\ndb.users.find({ age: { $ne: 30 } })\n\n// $gt - Greater than\ndb.users.find({ age: { $gt: 30 } })\n\n// $gte - Greater than or equal\ndb.users.find({ age: { $gte: 30 } })\n\n// $lt - Less than\ndb.users.find({ age: { $lt: 30 } })\n\n// $lte - Less than or equal\ndb.users.find({ age: { $lte: 30 } })\n\n// $in - In array\ndb.users.find({ age: { $in: [25, 30, 35] } })\n\n// $nin - Not in array\ndb.users.find({ age: { $nin: [25, 30, 35] } })\n\n// Range query\ndb.users.find({ age: { $gte: 25, $lte: 35 } })\n```\n\n### Logical Operators\n\n```javascript\n// $and - All conditions must be true\ndb.users.find({\n  $and: [\n    { age: { $gte: 25 } },\n    { age: { $lte: 35 } }\n  ]\n})\n\n// $or - At least one condition must be true\ndb.users.find({\n  $or: [\n    { age: { $lt: 18 } },\n    { age: { $gt: 65 } }\n  ]\n})\n\n// $not - Negation\ndb.users.find({\n  age: { $not: { $gte: 30 } }\n})\n\n// $nor - None of the conditions should be true\ndb.users.find({\n  $nor: [\n    { age: { $lt: 18 } },\n    { isActive: false }\n  ]\n})\n\n// Complex query\ndb.users.find({\n  $and: [\n    { age: { $gte: 18 } },\n    {\n      $or: [\n        { city: \"New York\" },\n        { city: \"Boston\" }\n      ]\n    }\n  ]\n})\n```\n\n### Element Operators\n\n```javascript\n// $exists - Field exists\ndb.users.find({ middleName: { $exists: true } })\n\n// $type - Field type\ndb.users.find({ age: { $type: \"number\" } })\ndb.users.find({ age: { $type: \"string\" } })\n\n// Type codes\n// \"double\" = 1, \"string\" = 2, \"object\" = 3, \"array\" = 4\n// \"bool\" = 8, \"date\" = 9, \"null\" = 10\n```\n\n### Array Operators\n\n```javascript\n// $all - Array contains all elements\ndb.users.find({\n  hobbies: { $all: [\"reading\", \"coding\"] }\n})\n\n// $elemMatch - Array element matches all conditions\ndb.users.find({\n  skills: {\n    $elemMatch: {\n      name: \"JavaScript\",\n      level: \"expert\"\n    }\n  }\n})\n\n// $size - Array size\ndb.users.find({\n  hobbies: { $size: 3 }\n})\n\n// Array element by index\ndb.users.find({ \"hobbies.0\": \"reading\" })\n```\n\n### String Operators\n\n```javascript\n// $regex - Regular expression\ndb.users.find({\n  name: { $regex: /john/i }     // Case-insensitive\n})\n\n// Search by pattern\ndb.users.find({\n  email: { $regex: /@gmail\\.com$/ }\n})\n\n// Starts with\ndb.users.find({\n  name: { $regex: /^J/ }\n})\n\n// Contains\ndb.users.find({\n  name: { $regex: /Doe/ }\n})\n```\n\n---\n\n## üìê Data Modeling {#modeling}\n\n### Schema Design Patterns\n\n**Embedded Documents (One-to-Few)**\n\n```javascript\n// User with embedded address (1-to-1)\n{\n  _id: ObjectId(\"...\"),\n  name: \"John Doe\",\n  email: \"john@example.com\",\n  address: {                    // Embedded\n    street: \"123 Main St\",\n    city: \"New York\",\n    zipCode: \"10001\"\n  }\n}\n\n// User with embedded posts (1-to-few)\n{\n  _id: ObjectId(\"...\"),\n  name: \"John Doe\",\n  posts: [                      // Embedded array\n    {\n      title: \"First Post\",\n      content: \"Hello World\",\n      date: new Date()\n    },\n    {\n      title: \"Second Post\",\n      content: \"MongoDB is great\",\n      date: new Date()\n    }\n  ]\n}\n```\n\n**References (One-to-Many)**\n\n```javascript\n// Author document\n{\n  _id: ObjectId(\"author123\"),\n  name: \"John Doe\",\n  email: \"john@example.com\"\n}\n\n// Book documents (many)\n{\n  _id: ObjectId(\"book1\"),\n  title: \"MongoDB Basics\",\n  authorId: ObjectId(\"author123\"),   // Reference\n  pages: 300\n}\n\n{\n  _id: ObjectId(\"book2\"),\n  title: \"Advanced MongoDB\",\n  authorId: ObjectId(\"author123\"),   // Reference\n  pages: 500\n}\n\n// Query\nconst author = db.authors.findOne({ _id: ObjectId(\"author123\") })\nconst books = db.books.find({ authorId: author._id })\n```\n\n**Hybrid Approach**\n\n```javascript\n// Store most-used fields embedded, reference for complete data\n{\n  _id: ObjectId(\"...\"),\n  title: \"Great Product\",\n  author: {                      // Embedded (frequently accessed)\n    id: ObjectId(\"author123\"),\n    name: \"John Doe\"\n  },\n  comments: [                    // Only IDs\n    ObjectId(\"comment1\"),\n    ObjectId(\"comment2\")\n  ]\n}\n```\n\n### Relationships Diagram\n\n```\nEmbedded (1-to-Few)\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  User           ‚îÇ\n‚îÇ  ‚îú‚îÄ name        ‚îÇ\n‚îÇ  ‚îî‚îÄ address     ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ Embedded\n‚îÇ     ‚îú‚îÄ street   ‚îÇ\n‚îÇ     ‚îî‚îÄ city     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\nReferenced (1-to-Many)\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  Author         ‚îÇ         ‚îÇ  Book           ‚îÇ\n‚îÇ  ‚îú‚îÄ _id         ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îú‚îÄ title       ‚îÇ\n‚îÇ  ‚îî‚îÄ name        ‚îÇ       ‚îî‚îÄ‚îÇ  ‚îî‚îÄ authorId    ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n### Schema Validation\n\n```javascript\n// Create collection with validation\ndb.createCollection(\"users\", {\n  validator: {\n    $jsonSchema: {\n      bsonType: \"object\",\n      required: [\"name\", \"email\", \"age\"],\n      properties: {\n        name: {\n          bsonType: \"string\",\n          description: \"must be a string and is required\"\n        },\n        email: {\n          bsonType: \"string\",\n          pattern: \"^.+@.+$\",\n          description: \"must be a valid email\"\n        },\n        age: {\n          bsonType: \"int\",\n          minimum: 18,\n          maximum: 120,\n          description: \"must be an integer between 18 and 120\"\n        },\n        hobbies: {\n          bsonType: \"array\",\n          items: {\n            bsonType: \"string\"\n          }\n        }\n      }\n    }\n  }\n})\n```\n\n---\n\n## üìä Aggregation Framework {#aggregation}\n\n### What is Aggregation?\n\nAggregation is a powerful way to process and analyze data by passing documents through a multi-stage pipeline. Each stage transforms the documents and passes the result to the next stage.\n\n**Why Use Aggregation?**\n\n- **Data Analysis**: Calculate statistics, averages, totals, counts\n- **Data Transformation**: Reshape documents, add computed fields\n- **Complex Queries**: Join collections ($lookup), group data, filter results\n- **Performance**: Server-side processing faster than client-side for large datasets\n\n**How Aggregation Works:**\n\nDocuments flow through stages like a factory assembly line. Each stage performs an operation:\n\n```\nInput Documents ‚îÄ‚îÄ‚ñ∂ [$match] ‚îÄ‚îÄ‚ñ∂ [$group] ‚îÄ‚îÄ‚ñ∂ [$sort] ‚îÄ‚îÄ‚ñ∂ [$project] ‚îÄ‚îÄ‚ñ∂ Output\n                    Filter      Aggregate     Order      Shape\n```\n\n**Common Use Cases:**\n- Sales reports and revenue analytics\n- User behavior analysis\n- Real-time dashboards\n- Data aggregation for charts\n- ETL (Extract, Transform, Load) operations\n\n**Aggregation vs Find:**\n\n| Feature | find() | aggregate() |\n|---------|--------|-------------|\n| Purpose | Simple queries | Complex data processing |\n| Joins | ‚ùå No | ‚úÖ Yes ($lookup) |\n| Grouping | ‚ùå No | ‚úÖ Yes ($group) |\n| Calculations | Limited | Extensive operators |\n| Transformations | No reshaping | ‚úÖ $project, $addFields |\n| Performance | Fast for simple | Better for analytics |\n\n### Basic Aggregation\n\n```javascript\n// Simple aggregation\ndb.orders.aggregate([\n  { $match: { status: \"completed\" } },      // Filter\n  { $group: {                               // Group\n      _id: \"$customerId\",\n      totalAmount: { $sum: \"$amount\" }\n    }\n  },\n  { $sort: { totalAmount: -1 } }            // Sort\n])\n```\n\n### Common Pipeline Stages\n\n**$match - Filter Documents**\n\n**What it does**: Filters documents (like `find()`). Should be placed early in pipeline for better performance.\n\n**When to use**: \n- Reduce documents before processing\n- Filter by date range, status, or any field\n- Always use early to minimize data in pipeline\n\n```javascript\ndb.orders.aggregate([\n  {\n    $match: {\n      status: \"completed\",\n      amount: { $gte: 100 }\n    }\n  }\n])\n```\n\n**$group - Group Documents**\n\n**What it does**: Groups documents by a specified field and performs aggregate calculations on grouped data.\n\n**Common Accumulators:**\n- `$sum`: Calculate totals or count documents (`{ $sum: 1 }` for count)\n- `$avg`: Calculate average of numeric values\n- `$min` / `$max`: Find minimum/maximum values\n- `$push`: Create array of all values from grouped docs\n- `$addToSet`: Create array of unique values\n- `$first` / `$last`: Get first/last document value\n\n**When to use**:\n- Calculate totals (revenue, orders)\n- Count occurrences (users per country)\n- Find statistics (min, max, average prices)\n- Create arrays of related data\n\n```javascript\n// Count documents by category\ndb.products.aggregate([\n  {\n    $group: {\n      _id: \"$category\",               // Group by field\n      count: { $sum: 1 },             // Count\n      avgPrice: { $avg: \"$price\" },   // Average\n      maxPrice: { $max: \"$price\" },   // Maximum\n      minPrice: { $min: \"$price\" }    // Minimum\n    }\n  }\n])\n\n// Example result:\n[\n  { _id: \"Electronics\", count: 50, avgPrice: 299.99, maxPrice: 999, minPrice: 49.99 },\n  { _id: \"Books\", count: 100, avgPrice: 19.99, maxPrice: 49.99, minPrice: 9.99 }\n]\n```\n\n**$project - Shape Output**\n\n**What it does**: Reshapes documents by including, excluding, or computing fields. Like SQL's SELECT.\n\n**Use Cases:**\n- Include/exclude specific fields (reduce data size)\n- Rename fields\n- Compute new fields with expressions\n- Extract nested field values\n- Format dates, strings, numbers\n\n**When to use**:\n- Clean up response structure\n- Add calculated fields (fullName = firstName + lastName)\n- Convert data types or formats\n- Reduce bandwidth (exclude large fields)\n\n```javascript\ndb.users.aggregate([\n  {\n    $project: {\n      _id: 0,                          // Exclude _id\n      name: 1,                         // Include name\n      email: 1,                        // Include email\n      ageGroup: {                      // Computed field\n        $cond: {\n          if: { $gte: [\"$age\", 18] },\n          then: \"Adult\",\n          else: \"Minor\"\n        }\n      }\n    }\n  }\n])\n```\n\n**$sort - Sort Results**\n\n```javascript\ndb.users.aggregate([\n  { $sort: { age: -1, name: 1 } }     // Sort by age desc, name asc\n])\n```\n\n**$limit & $skip - Pagination**\n\n```javascript\ndb.users.aggregate([\n  { $sort: { createdAt: -1 } },\n  { $skip: 20 },\n  { $limit: 10 }\n])\n```\n\n**$lookup - Join Collections**\n\n**What it does**: Performs a left outer join with another collection, similar to SQL JOIN.\n\n**How it works**:\n1. Matches `localField` from current collection\n2. With `foreignField` from target collection\n3. Returns matching documents in an array field\n\n**When to use**:\n- Get related data from another collection\n- Denormalize data for reads\n- Combine user orders with user profiles\n- Join products with categories\n\n**Performance Tips**:\n- Index `foreignField` for faster joins\n- Use `$match` before `$lookup` to reduce documents\n- Consider embedding data if frequently accessed together\n\n```javascript\n// Left outer join\ndb.orders.aggregate([\n  {\n    $lookup: {\n      from: \"users\",              // Collection to join\n      localField: \"userId\",       // Field from orders\n      foreignField: \"_id\",        // Field from users\n      as: \"userDetails\"           // Output array field\n    }\n  }\n])\n\n// Result:\n{\n  _id: ObjectId(\"...\"),\n  userId: ObjectId(\"user123\"),\n  amount: 100,\n  userDetails: [                  // Joined data\n    {\n      _id: ObjectId(\"user123\"),\n      name: \"John Doe\",\n      email: \"john@example.com\"\n    }\n  ]\n}\n```\n\n**$unwind - Deconstruct Array**\n\n```javascript\n// Document with array\n{\n  _id: 1,\n  name: \"John\",\n  hobbies: [\"reading\", \"coding\", \"gaming\"]\n}\n\n// Unwind\ndb.users.aggregate([\n  { $unwind: \"$hobbies\" }\n])\n\n// Result: Creates separate document for each array element\n[\n  { _id: 1, name: \"John\", hobbies: \"reading\" },\n  { _id: 1, name: \"John\", hobbies: \"coding\" },\n  { _id: 1, name: \"John\", hobbies: \"gaming\" }\n]\n```\n\n### Real-World Examples\n\n**Sales Report**\n\n```javascript\ndb.orders.aggregate([\n  // Filter by date range\n  {\n    $match: {\n      orderDate: {\n        $gte: new Date(\"2024-01-01\"),\n        $lt: new Date(\"2025-01-01\")\n      }\n    }\n  },\n  // Group by month\n  {\n    $group: {\n      _id: {\n        year: { $year: \"$orderDate\" },\n        month: { $month: \"$orderDate\" }\n      },\n      totalSales: { $sum: \"$amount\" },\n      orderCount: { $sum: 1 },\n      avgOrderValue: { $avg: \"$amount\" }\n    }\n  },\n  // Sort by month\n  {\n    $sort: { \"_id.year\": 1, \"_id.month\": 1 }\n  },\n  // Format output\n  {\n    $project: {\n      _id: 0,\n      period: {\n        $concat: [\n          { $toString: \"$_id.year\" },\n          \"-\",\n          { $toString: \"$_id.month\" }\n        ]\n      },\n      totalSales: 1,\n      orderCount: 1,\n      avgOrderValue: { $round: [\"$avgOrderValue\", 2] }\n    }\n  }\n])\n```\n\n**User Analytics**\n\n```javascript\ndb.users.aggregate([\n  // Add computed fields\n  {\n    $addFields: {\n      accountAge: {\n        $dateDiff: {\n          startDate: \"$createdAt\",\n          endDate: \"$$NOW\",\n          unit: \"day\"\n        }\n      }\n    }\n  },\n  // Group by age range\n  {\n    $bucket: {\n      groupBy: \"$age\",\n      boundaries: [0, 18, 30, 50, 100],\n      default: \"Other\",\n      output: {\n        count: { $sum: 1 },\n        users: { $push: \"$name\" }\n      }\n    }\n  }\n])\n```\n\n---\n\n## ‚ö° Indexing & Performance {#indexing}\n\n### What is an Index?\n\nIndexes improve query performance by creating a sorted data structure.\n\n```\nWithout Index (Collection Scan)\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Doc1‚îÇ Doc2‚îÇ Doc3‚îÇ Doc4‚îÇ Doc5‚îÇ  ‚óÑ‚îÄ‚îÄ Search all documents\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\nWith Index (Index Scan)\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  Index (age)  ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ 25 ‚Üí Doc2     ‚îÇ\n‚îÇ 30 ‚Üí Doc1     ‚îÇ  ‚óÑ‚îÄ‚îÄ Jump directly\n‚îÇ 35 ‚Üí Doc4     ‚îÇ\n‚îÇ 40 ‚Üí Doc3     ‚îÇ\n‚îÇ 45 ‚Üí Doc5     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n### Create Index\n\n```javascript\n// Single field index\ndb.users.createIndex({ email: 1 })     // Ascending\ndb.users.createIndex({ age: -1 })      // Descending\n\n// Compound index (multiple fields)\ndb.users.createIndex({ age: 1, name: 1 })\n\n// Unique index\ndb.users.createIndex({ email: 1 }, { unique: true })\n\n// Text index (for text search)\ndb.articles.createIndex({ title: \"text\", content: \"text\" })\n\n// TTL index (auto-delete after time)\ndb.sessions.createIndex(\n  { createdAt: 1 },\n  { expireAfterSeconds: 3600 }  // Delete after 1 hour\n)\n```\n\n### View Indexes\n\n```javascript\n// List all indexes\ndb.users.getIndexes()\n\n// Drop index\ndb.users.dropIndex(\"email_1\")\n\n// Drop all indexes (except _id)\ndb.users.dropIndexes()\n```\n\n### Explain Query\n\n```javascript\n// Analyze query performance\ndb.users.find({ email: \"john@example.com\" }).explain(\"executionStats\")\n\n// Key metrics:\n// - executionTimeMillis: Query time\n// - totalDocsExamined: Documents scanned\n// - totalKeysExamined: Index entries scanned\n// - executionStages.stage: IXSCAN (index) or COLLSCAN (full scan)\n```\n\n### Index Best Practices\n\n```javascript\n// ‚úÖ Good: Index on frequently queried fields\ndb.users.createIndex({ email: 1 })\n\n// ‚úÖ Good: Compound index for common queries\ndb.orders.createIndex({ userId: 1, status: 1 })\n\n// ‚úÖ Good: Index on sort fields\ndb.products.createIndex({ price: -1 })\n\n// ‚ùå Bad: Too many indexes (slows writes)\n// ‚ùå Bad: Index on fields that change frequently\n// ‚ùå Bad: Index on low-cardinality fields (few unique values)\n```\n\n---\n\n## üîÑ Transactions {#transactions}\n\n### ACID Transactions\n\nMongoDB supports multi-document ACID transactions.\n\n```javascript\nconst session = db.getMongo().startSession()\nsession.startTransaction()\n\ntry {\n  // Transfer money between accounts\n  const accounts = session.getDatabase(\"mydb\").accounts\n  \n  // Withdraw from account 1\n  accounts.updateOne(\n    { _id: \"account1\" },\n    { $inc: { balance: -100 } },\n    { session }\n  )\n  \n  // Deposit to account 2\n  accounts.updateOne(\n    { _id: \"account2\" },\n    { $inc: { balance: 100 } },\n    { session }\n  )\n  \n  // Commit transaction\n  session.commitTransaction()\n  print(\"Transaction successful\")\n  \n} catch (error) {\n  // Rollback on error\n  session.abortTransaction()\n  print(\"Transaction failed:\", error)\n  \n} finally {\n  session.endSession()\n}\n```\n\n---\n\n## üêò Mongoose ODM {#mongoose}\n\n### What is Mongoose?\n\nMongoose is an Object Data Modeling (ODM) library for MongoDB and Node.js.\n\n**Install**\n\n```bash\nnpm install mongoose\n```\n\n### Connection\n\n```javascript\nconst mongoose = require('mongoose')\n\n// Connect to MongoDB\nmongoose.connect('mongodb://localhost:27017/myapp')\n  .then(() => console.log('Connected to MongoDB'))\n  .catch(err => console.error('Connection error:', err))\n```\n\n### Schema & Model\n\n```javascript\nconst mongoose = require('mongoose')\n\n// Define schema\nconst userSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: [true, 'Name is required'],\n    trim: true,\n    minlength: 3,\n    maxlength: 50\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true,\n    lowercase: true,\n    match: [/^\\S+@\\S+\\.\\S+$/, 'Please enter a valid email']\n  },\n  age: {\n    type: Number,\n    min: 18,\n    max: 120\n  },\n  role: {\n    type: String,\n    enum: ['user', 'admin'],\n    default: 'user'\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  }\n}, {\n  timestamps: true  // Auto-add createdAt and updatedAt\n})\n\n// Create model\nconst User = mongoose.model('User', userSchema)\n\nmodule.exports = User\n```\n\n### CRUD with Mongoose\n\n```javascript\nconst User = require('./models/User')\n\n// CREATE\nconst createUser = async () => {\n  const user = new User({\n    name: 'John Doe',\n    email: 'john@example.com',\n    age: 30\n  })\n  \n  await user.save()\n  // Or: await User.create({ name: 'John', email: '...' })\n}\n\n// READ\nconst getUsers = async () => {\n  const users = await User.find()\n  const john = await User.findOne({ email: 'john@example.com' })\n  const userById = await User.findById('507f1f77bcf86cd799439011')\n}\n\n// UPDATE\nconst updateUser = async () => {\n  const user = await User.findByIdAndUpdate(\n    '507f1f77bcf86cd799439011',\n    { age: 31 },\n    { new: true, runValidators: true }\n  )\n}\n\n// DELETE\nconst deleteUser = async () => {\n  await User.findByIdAndDelete('507f1f77bcf86cd799439011')\n  await User.deleteMany({ age: { $lt: 18 } })\n}\n```\n\n### Middleware (Hooks)\n\n```javascript\nconst bcrypt = require('bcryptjs')\n\n// Pre-save hook\nuserSchema.pre('save', async function(next) {\n  // Only hash if password is modified\n  if (!this.isModified('password')) return next()\n  \n  // Hash password\n  this.password = await bcrypt.hash(this.password, 10)\n  next()\n})\n\n// Post-save hook\nuserSchema.post('save', function(doc, next) {\n  console.log(`New user created: ${doc.name}`)\n  next()\n})\n```\n\n### Virtual Properties\n\n```javascript\n// Virtual property (not stored in DB)\nuserSchema.virtual('fullName').get(function() {\n  return `${this.firstName} ${this.lastName}`\n})\n\n// Use in document\nconst user = await User.findById(id)\nconsole.log(user.fullName)  // \"John Doe\"\n```\n\n### Instance Methods\n\n```javascript\n// Add custom method\nuserSchema.methods.comparePassword = async function(candidatePassword) {\n  return await bcrypt.compare(candidatePassword, this.password)\n}\n\n// Use method\nconst user = await User.findOne({ email: 'john@example.com' })\nconst isMatch = await user.comparePassword('password123')\n```\n\n### Static Methods\n\n```javascript\n// Add static method\nuserSchema.statics.findByEmail = function(email) {\n  return this.findOne({ email: email.toLowerCase() })\n}\n\n// Use static method\nconst user = await User.findByEmail('JOHN@EXAMPLE.COM')\n```\n\n### Population (References)\n\n```javascript\n// Author schema\nconst authorSchema = new mongoose.Schema({\n  name: String,\n  email: String\n})\n\n// Book schema with reference\nconst bookSchema = new mongoose.Schema({\n  title: String,\n  author: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: 'Author'\n  }\n})\n\nconst Author = mongoose.model('Author', authorSchema)\nconst Book = mongoose.model('Book', bookSchema)\n\n// Create with reference\nconst author = await Author.create({ name: 'John Doe' })\nconst book = await Book.create({\n  title: 'MongoDB Guide',\n  author: author._id\n})\n\n// Populate reference\nconst bookWithAuthor = await Book.findById(book._id).populate('author')\nconsole.log(bookWithAuthor.author.name)  // \"John Doe\"\n```\n\n---\n\n## üîí Security & Authentication {#security}\n\n### Enable Authentication\n\n```bash\n# Start MongoDB with auth\nmongod --auth --dbpath /data/db\n\n# Create admin user\nuse admin\ndb.createUser({\n  user: \"admin\",\n  pwd: \"securePassword\",\n  roles: [\"root\"]\n})\n\n# Authenticate\ndb.auth(\"admin\", \"securePassword\")\n```\n\n### User Management\n\n```javascript\n// Create database user\nuse myDatabase\ndb.createUser({\n  user: \"appUser\",\n  pwd: \"appPassword\",\n  roles: [\n    { role: \"readWrite\", db: \"myDatabase\" }\n  ]\n})\n\n// Grant roles\ndb.grantRolesToUser(\"appUser\", [\n  { role: \"dbAdmin\", db: \"myDatabase\" }\n])\n\n// Revoke roles\ndb.revokeRolesFromUser(\"appUser\", [\n  { role: \"dbAdmin\", db: \"myDatabase\" }\n])\n```\n\n### Connection with Auth\n\n```javascript\n// Mongoose connection with auth\nmongoose.connect('mongodb://appUser:appPassword@localhost:27017/myDatabase')\n```\n\n### Encryption\n\n```javascript\n// Field-level encryption\nconst encryptedSchema = new mongoose.Schema({\n  ssn: {\n    type: String,\n    encrypt: true  // Requires mongoose-encryption\n  }\n})\n```\n\n---\n\n## üìà Replication & Sharding {#scaling}\n\n### Replication (High Availability)\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   Primary   ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ Writes\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n       ‚îÇ\n       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Secondary 1  ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ Reads\n       ‚îÇ\n       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Secondary 2  ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ Reads\n```\n\n**Replica Set Benefits:**\n- High availability\n- Data redundancy\n- Automatic failover\n- Read scaling\n\n### Sharding (Horizontal Scaling)\n\n```\n            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n            ‚îÇ   MongoDB    ‚îÇ\n            ‚îÇ    Router    ‚îÇ\n            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                   ‚îÇ\n        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n        ‚îÇ          ‚îÇ          ‚îÇ\n    ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê\n    ‚îÇShard 1‚îÇ  ‚îÇShard 2‚îÇ  ‚îÇShard 3‚îÇ\n    ‚îÇ A - H ‚îÇ  ‚îÇ I - P ‚îÇ  ‚îÇ Q - Z ‚îÇ\n    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n---\n\n## üíæ Backup & Recovery {#backup}\n\n### Backup\n\n```bash\n# Backup entire database\nmongodump --db myDatabase --out /backup/\n\n# Backup specific collection\nmongodump --db myDatabase --collection users --out /backup/\n\n# Backup with authentication\nmongodump --username admin --password pass --authenticationDatabase admin --db myDatabase --out /backup/\n```\n\n### Restore\n\n```bash\n# Restore database\nmongorestore --db myDatabase /backup/myDatabase/\n\n# Restore collection\nmongorestore --db myDatabase --collection users /backup/myDatabase/users.bson\n```\n\n---\n\n## ‚úÖ Best Practices {#best-practices}\n\n### 1. Schema Design\n- Embed for 1-to-few relationships\n- Reference for 1-to-many relationships\n- Denormalize for performance\n- Use schema validation\n\n### 2. Indexing\n- Index frequently queried fields\n- Use compound indexes wisely\n- Monitor index performance\n- Remove unused indexes\n\n### 3. Queries\n- Use projection to limit fields\n- Avoid $where operator\n- Use covered queries (index-only)\n- Paginate large result sets\n\n### 4. Performance\n- Use aggregation pipeline efficiently\n- Enable query profiling\n- Monitor slow queries\n- Use connection pooling\n\n### 5. Security\n- Enable authentication\n- Use role-based access control\n- Encrypt sensitive data\n- Regular backups\n\n---\n\n## üîÑ Change Streams (Real-time Data) {#changestreams}\n\n**What are Change Streams?**\n\nChange Streams allow applications to listen to real-time changes in MongoDB collections, databases, or entire deployments. They provide a stream of change events that occur in your database.\n\n**Why Use Change Streams?**\n\n- **Real-time Updates**: Instantly notify users of data changes\n- **Event-Driven Architecture**: Trigger actions based on database changes\n- **Data Synchronization**: Keep multiple systems in sync\n- **Audit Logging**: Track all changes for compliance\n- **No Polling**: More efficient than constantly querying database\n\n**How Change Streams Work:**\n\n1. Open a stream on a collection/database\n2. MongoDB tracks changes using the oplog (operation log)\n3. Your application receives change events\n4. Process events in real-time\n\n**When to Use Change Streams:**\n- Live dashboards and analytics\n- Collaborative applications (Google Docs style)\n- Real-time notifications\n- Data synchronization across services\n- Invalidating caches when data changes\n\n**Change Stream Types:**\n\n| Type | Scope | Use Case |\n|------|-------|----------|\n| Collection | Single collection | Product updates |\n| Database | All collections in DB | User activity tracking |\n| Deployment | All databases | Global audit log |\n\n**Basic Change Stream**\n\n```javascript\nconst { MongoClient } = require('mongodb')\n\n// Watch collection for changes\nconst collection = db.collection('products')\nconst changeStream = collection.watch()\n\nchangeStream.on('change', (change) => {\n  console.log('Change detected:', change)\n  \n  // Types of changes: insert, update, replace, delete\n  if (change.operationType === 'insert') {\n    console.log('New document:', change.fullDocument)\n  }\n  \n  if (change.operationType === 'update') {\n    console.log('Updated fields:', change.updateDescription.updatedFields)\n  }\n  \n  if (change.operationType === 'delete') {\n    console.log('Deleted document ID:', change.documentKey._id)\n  }\n})\n```\n\n**Filter Change Events**\n\n```javascript\n// Only watch specific operations\nconst pipeline = [\n  { $match: { operationType: 'insert' } },\n  { $match: { 'fullDocument.price': { $gte: 1000 } } }\n]\n\nconst changeStream = collection.watch(pipeline)\nchangeStream.on('change', (change) => {\n  console.log('Expensive product added:', change.fullDocument)\n})\n```\n\n**Mongoose Change Streams**\n\n```javascript\nconst Product = mongoose.model('Product', productSchema)\n\n// Watch for changes\nProduct.watch().on('change', (change) => {\n  console.log('Product changed:', change)\n  \n  // Emit to WebSocket clients\n  io.emit('productUpdate', change.fullDocument)\n})\n```\n\n**Real-time Notifications Example**\n\n```javascript\n// Server-side: Listen to orders\nconst Order = mongoose.model('Order', orderSchema)\n\nOrder.watch([\n  { $match: { operationType: 'insert' } }\n]).on('change', async (change) => {\n  const newOrder = change.fullDocument\n  \n  // Send email notification\n  await sendEmail(newOrder.customerEmail, 'Order Confirmed')\n  \n  // Update analytics\n  await Analytics.increment('totalOrders', 1)\n  \n  // Broadcast to admin dashboard\n  io.to('admins').emit('newOrder', newOrder)\n})\n```\n\n---\n\n## üîç Text Search {#textsearch}\n\n**What is Text Search?**\n\nMongoDB's text search allows you to search string content using text indexes. It supports stemming, stop words, and relevance scoring.\n\n**Why Use Text Search?**\n\n- **User Search**: Search products, articles, documents\n- **Full-text Queries**: Match words, phrases, negations\n- **Language Support**: 15+ languages with stemming\n- **Relevance Scoring**: Rank results by relevance\n- **Performance**: Optimized text indexes\n\n**How Text Search Works:**\n\n1. Create text index on string fields\n2. MongoDB tokenizes and stems words\n3. Removes stop words (the, a, an, etc.)\n4. Stores in inverted index structure\n5. Searches match tokens, not exact strings\n\n**Create Text Index**\n\n```javascript\n// Single field\ndb.articles.createIndex({ title: \"text\" })\n\n// Multiple fields\ndb.products.createIndex({\n  name: \"text\",\n  description: \"text\",\n  tags: \"text\"\n})\n\n// With weights (importance)\ndb.products.createIndex(\n  {\n    name: \"text\",\n    description: \"text\"\n  },\n  {\n    weights: {\n      name: 10,        // Name is 10x more important\n      description: 5\n    }\n  }\n)\n```\n\n**Basic Text Search**\n\n```javascript\n// Search for \"laptop\"\ndb.products.find({ $text: { $search: \"laptop\" } })\n\n// Search for phrase\ndb.products.find({ $text: { $search: \"\\\"gaming laptop\\\"\" } })\n\n// Search multiple words (OR)\ndb.products.find({ $text: { $search: \"laptop desktop tablet\" } })\n\n// Exclude words (negation)\ndb.products.find({ $text: { $search: \"laptop -gaming\" } })\n```\n\n**Text Search with Score**\n\n```javascript\n// Get relevance score\ndb.products.find(\n  { $text: { $search: \"laptop gaming\" } },\n  { score: { $meta: \"textScore\" } }\n).sort({ score: { $meta: \"textScore\" } })\n\n// Results sorted by relevance\n```\n\n**Mongoose Text Search**\n\n```javascript\nconst articleSchema = new Schema({\n  title: String,\n  content: String,\n  tags: [String]\n})\n\n// Create text index\narticleSchema.index({ title: 'text', content: 'text', tags: 'text' })\n\nconst Article = mongoose.model('Article', articleSchema)\n\n// Search\nconst results = await Article.find(\n  { $text: { $search: \"mongodb tutorial\" } },\n  { score: { $meta: \"textScore\" } }\n).sort({ score: { $meta: \"textScore\" } })\n.limit(10)\n```\n\n**Language-Specific Search**\n\n```javascript\n// Create index with language\ndb.articles.createIndex(\n  { content: \"text\" },\n  { default_language: \"spanish\" }\n)\n\n// Search in specific language\ndb.articles.find(\n  { $text: { $search: \"b√∫squeda\", $language: \"spanish\" } }\n)\n```\n\n**Limitations:**\n- Only one text index per collection\n- Cannot combine with other index types\n- Case-insensitive by default\n- For complex search, consider Elasticsearch\n\n---\n\n## üì¶ GridFS (Large Files) {#gridfs}\n\n**What is GridFS?**\n\nGridFS is a specification for storing and retrieving files larger than 16MB (BSON document size limit). It splits files into chunks and stores them in two collections.\n\n**Why Use GridFS?**\n\n- **Large Files**: Store files bigger than 16MB\n- **Streaming**: Stream file data (don't load entire file in memory)\n- **Metadata**: Store file metadata with the file\n- **Range Queries**: Serve partial file content\n- **Replication**: Files replicated like any MongoDB data\n\n**How GridFS Works:**\n\n1. **fs.files**: Stores file metadata (filename, size, upload date)\n2. **fs.chunks**: Stores file data in 255KB chunks\n3. Files split automatically when uploaded\n4. Reassembled automatically when downloaded\n\n**When to Use GridFS:**\n- Files > 16MB (videos, backups, large images)\n- Need atomic operations on files + metadata\n- Want files to be replicated with MongoDB\n- Need to access file chunks individually\n\n**When NOT to Use GridFS:**\n- Small files < 16MB (use regular documents with Binary data)\n- High-performance file serving (use CDN/S3 instead)\n- Need file system features (permissions, links)\n\n**GridFS with Node.js**\n\n```javascript\nconst { MongoClient, GridFSBucket } = require('mongodb')\nconst fs = require('fs')\n\nconst client = await MongoClient.connect('mongodb://localhost:27017')\nconst db = client.db('mydb')\n\n// Create GridFS bucket\nconst bucket = new GridFSBucket(db, {\n  bucketName: 'files'  // Creates files.files and files.chunks\n})\n\n// Upload file\nconst uploadStream = bucket.openUploadStream('video.mp4', {\n  metadata: { \n    uploadedBy: 'user123',\n    type: 'video',\n    size: 52428800\n  }\n})\n\nfs.createReadStream('./video.mp4')\n  .pipe(uploadStream)\n  .on('finish', () => {\n    console.log('Upload complete')\n  })\n\n// Download file\nconst downloadStream = bucket.openDownloadStreamByName('video.mp4')\ndownloadStream.pipe(fs.createWriteStream('./downloaded-video.mp4'))\n\n// Find files\nconst files = await bucket.find({ \n  'metadata.type': 'video' \n}).toArray()\n\n// Delete file\nawait bucket.delete(fileId)\n```\n\n**GridFS with Multer (Express)**\n\n```javascript\nconst multer = require('multer')\nconst { GridFsStorage } = require('multer-gridfs-storage')\n\n// Create storage engine\nconst storage = new GridFsStorage({\n  url: 'mongodb://localhost:27017/mydb',\n  file: (req, file) => {\n    return {\n      filename: Date.now() + '-' + file.originalname,\n      bucketName: 'uploads',\n      metadata: {\n        uploadedBy: req.user.id,\n        originalName: file.originalname\n      }\n    }\n  }\n})\n\nconst upload = multer({ storage })\n\n// Upload endpoint\napp.post('/upload', upload.single('file'), (req, res) => {\n  res.json({ \n    file: req.file,\n    message: 'File uploaded successfully'\n  })\n})\n\n// Download endpoint\napp.get('/files/:filename', async (req, res) => {\n  const bucket = new GridFSBucket(db, { bucketName: 'uploads' })\n  \n  const files = await bucket.find({ \n    filename: req.params.filename \n  }).toArray()\n  \n  if (files.length === 0) {\n    return res.status(404).json({ error: 'File not found' })\n  }\n  \n  // Stream file to response\n  bucket.openDownloadStreamByName(req.params.filename).pipe(res)\n})\n```\n\n**GridFS vs Regular Storage:**\n\n| Feature | GridFS | File System | Cloud Storage (S3) |\n|---------|--------|-------------|-------------------|\n| Max Size | Unlimited | Unlimited | 5 TB per file |\n| Performance | Good | Excellent | Excellent |\n| Replication | Automatic | Manual | Automatic |\n| Cost | Storage cost | Included | Storage + transfer |\n| Use Case | MongoDB-centric apps | High performance | Scalable, global |\n\n---\n\n## üéØ Real-World Projects {#projects}\n\n### Project 1: E-commerce Database\n\n```javascript\n// Product Schema\nconst productSchema = new Schema({\n  name: String,\n  price: Number,\n  category: String,\n  inventory: Number,\n  reviews: [{\n    user: { type: ObjectId, ref: 'User' },\n    rating: Number,\n    comment: String\n  }]\n})\n\n// Order Schema\nconst orderSchema = new Schema({\n  user: { type: ObjectId, ref: 'User' },\n  items: [{\n    product: { type: ObjectId, ref: 'Product' },\n    quantity: Number,\n    price: Number\n  }],\n  totalAmount: Number,\n  status: { type: String, enum: ['pending', 'shipped', 'delivered'] }\n})\n```\n\n### Project 2: Social Media Platform\n\n```javascript\n// User with friends (many-to-many)\nconst userSchema = new Schema({\n  username: String,\n  friends: [{ type: ObjectId, ref: 'User' }],\n  posts: [{ type: ObjectId, ref: 'Post' }]\n})\n\n// Post with comments\nconst postSchema = new Schema({\n  author: { type: ObjectId, ref: 'User' },\n  content: String,\n  likes: [{ type: ObjectId, ref: 'User' }],\n  comments: [{\n    user: { type: ObjectId, ref: 'User' },\n    text: String,\n    createdAt: Date\n  }]\n})\n```\n\n---\n\n## üéì Learning Path\n\n### Beginner\n1. ‚úÖ Install MongoDB\n2. ‚úÖ Learn basic CRUD\n3. ‚úÖ Understand documents and collections\n4. ‚úÖ Practice query operators\n\n### Intermediate\n5. ‚úÖ Master aggregation\n6. ‚úÖ Learn indexing\n7. ‚úÖ Use Mongoose ODM\n8. ‚úÖ Implement authentication\n\n### Advanced\n9. ‚úÖ Design complex schemas\n10. ‚úÖ Optimize performance\n11. ‚úÖ Setup replication\n12. ‚úÖ Deploy to production\n\n---\n\n## üèÜ Congratulations!\n\nYou've completed the MongoDB Zero to Hero guide! You can now:\n\n- ‚úÖ Design flexible NoSQL schemas\n- ‚úÖ Perform complex queries and aggregations\n- ‚úÖ Optimize database performance\n- ‚úÖ Build production-ready applications\n- ‚úÖ Scale MongoDB horizontally\n\n**Next Steps:**\n- Build real-world projects\n- Learn MongoDB Atlas (cloud)\n- Explore advanced patterns\n- Study MongoDB administration\n\nKeep building! üöÄ\n"}